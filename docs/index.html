<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Access data from Global Fishing Watch APIs • gfwr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Access data from Global Fishing Watch APIs">
<meta name="description" content="This package connects to several Global Fishing Watch APIs to get vessel and events information in an R-friendly format.">
<meta property="og:description" content="This package connects to several Global Fishing Watch APIs to get vessel and events information in an R-friendly format.">
<meta property="og:image" content="https://globalfishingwatch.github.io/gfwr/logo.png">
<!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WXTMN69');</script><!-- End Google Tag Manager -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXTMN69" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <!-- inserted before the package title in the header ->
    <a class="navbar-brand me-2" href="index.html">gfwr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.4</small>

    <!-- inserted before the navbar links -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/identity.html">Using get_vessel_info(): the basics of vessel identity in Global Fishing Watch and gfwr</a></li>
    <li><a class="dropdown-item" href="articles/making-maps.html">Making maps with `gfwr`</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GlobalFishingWatch/gfwr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>

    <!-- inserted after the navbar links -->
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="gfwr-access-data-from-global-fishing-watch-apis-">
<code>gfwr</code>: Access data from Global Fishing Watch APIs <img src="reference/figures/gfwr_hex_rgb.png" align="right" width="200px"><a class="anchor" aria-label="anchor" href="#gfwr-access-data-from-global-fishing-watch-apis-"></a>
</h1>
</div>
<!-- badges: start -->

<blockquote>
<p><strong>Important</strong><br>
This version of <code>gfwr</code> gives access to Global Fishing Watch API <a href="https://globalfishingwatch.org/our-apis/documentation#version-3-api" class="external-link">version 3</a>. Starting April 30th, 2024, this is the official API version. For latest API releases, please check our <a href="https://globalfishingwatch.org/our-apis/documentation#api-release-notes" class="external-link">API release notes</a></p>
</blockquote>
<blockquote>
<p>A <strong>Python package</strong> to communicate with Global Fishing Watch APIs was released in April 2025. Check the <a href="https://github.com/GlobalFishingWatch/gfw-api-python-client" class="external-link">gfw-api-python-client</a> repository.</p>
</blockquote>
<p>The <code>gfwr</code> R package is a simple wrapper for the Global Fishing Watch (GFW) <a href="https://globalfishingwatch.org/our-apis/documentation#introduction" class="external-link">APIs</a>. It provides convenient functions to freely pull GFW data directly into R in tidy formats.</p>
<p>The package currently works with the following APIs:</p>
<ul>
<li>
<a href="https://globalfishingwatch.org/our-apis/documentation#vessels-api" class="external-link">Vessels API</a>: vessel search and identity based on AIS self reported data and public registry information</li>
<li>
<a href="https://globalfishingwatch.org/our-apis/documentation#events-api" class="external-link">Events API</a>: encounters, loitering, port visits, AIS-disabling events and fishing events based on AIS data</li>
<li>
<a href="https://globalfishingwatch.org/our-apis/documentation#map-visualization-4wings-api" class="external-link">Gridded apparent fishing effort (4Wings API)</a>: apparent fishing effort based on AIS data</li>
</ul>
<blockquote>
<p><strong>Note</strong>: See the <a href="https://globalfishingwatch.org/our-apis/documentation#reference-data" class="external-link">Terms of Use</a> page for Global Fishing Watch APIs for information on our API licenses and rate limits.</p>
</blockquote>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the most recent version of <code>gfwr</code> using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check/install remotes</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"GlobalFishingWatch/gfwr"</span>,</span>
<span>                        dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><code>gfwr</code> is also in the rOpenSci <a href="https://globalfishingwatch.r-universe.dev/gfwr#" class="external-link">R-universe</a>, and can be installed like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"gfwr"</span>, </span>
<span>                 repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://globalfishingwatch.r-universe.dev"</span>,</span>
<span>                           <span class="st">"https://cran.r-project.org"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Once everything is installed, you can load and use <code>gfwr</code> in your scripts with <code><a href="https://github.com/GlobalFishingWatch/gfwr" class="external-link">library(gfwr)</a></code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/GlobalFishingWatch/gfwr" class="external-link">gfwr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="authorization">Authorization<a class="anchor" aria-label="anchor" href="#authorization"></a>
</h2>
<p>The use of <code>gfwr</code> requires a GFW API token, which users can request from the <a href="https://globalfishingwatch.org/our-apis/tokens" class="external-link">GFW API Portal</a>. Save this token to your <code>.Renviron</code> file using <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code> and adding a variable named <code>GFW_TOKEN</code> to the file (<code>GFW_TOKEN="PASTE_YOUR_TOKEN_HERE"</code>). Save the <code>.Renviron</code> file and restart the R session to make the edit effective.</p>
<p><code>gfwr</code> functions are set to use <code>key = gfw_auth()</code> by default so in general you shouldn’t need to refer to the key in your function calls.</p>
<p>If the token configuration was not done properly you will see the following error:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>Error <span class="cf">in</span> <span class="st">`</span><span class="at">httr2::req_perform()</span><span class="st">`</span><span class="sc">:</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="sc">!</span> HTTP <span class="dv">401</span> Unauthorized.</span></code></pre></div>
<p>In case you need to specify the key you can use <code><a href="reference/gfw_auth.html">gfw_auth()</a></code> to save an object</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gfw_auth.html">gfw_auth</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>or fetch the key directly from the <code>.Renviron</code> file</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GFW_TOKEN"</span><span class="op">)</span></span></code></pre></div>
<p>The examples in the package documentation will omit an explicit call to key.</p>
</div>
<div class="section level2">
<h2 id="vessels-api">Vessels API<a class="anchor" aria-label="anchor" href="#vessels-api"></a>
</h2>
<p>The <code><a href="reference/get_vessel_info.html">get_vessel_info()</a></code> function allows you to get vessel identity details from the <a href="https://globalfishingwatch.org/our-apis/documentation#introduction-vessels-api" class="external-link">Vessels API</a>.</p>
<p>There are two search types: <code>search</code>, and <code>id</code>.</p>
<ul>
<li>
<code>search</code> is performed by using parameters <code>query</code> for basic searches and <code>where</code> for advanced searchers using SQL expressions
<ul>
<li>
<code>query</code> takes a single identifier that can be the MMSI, IMO, callsign, or shipname as input and identifies all vessels that match.</li>
<li>
<code>where</code> search allows for the use of complex search with logical clauses (AND, OR) and fuzzy matching with terms such as LIKE, using SQL syntax (see examples in the function)</li>
<li>
<code>includes</code> adds information from public registries. Options are “MATCH_CRITERIA”, “OWNERSHIP” and “AUTHORIZATIONS”</li>
</ul>
</li>
</ul>
<div class="section level3">
<h3 id="basic-search-by-identity-markers-search_type--search">Basic search by identity markers <code>(search_type = "search")</code>
<a class="anchor" aria-label="anchor" href="#basic-search-by-identity-markers-search_type--search"></a>
</h3>
<p>To get information of a vessel using its MMSI, IMO number, callsign or name, the search can be done directly using the number or the string. For example, to look for a vessel with <code>MMSI = 224224000</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>query <span class="op">=</span> <span class="fl">224224000</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">"search"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1 total vessels</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   dataset                           </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                             </span></span>
<span><span class="co">#&gt; 1 public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1                        1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 16</span></span>
<span><span class="co">#&gt;   index recordId        sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;list&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     1 e0c9823749264a… &lt;chr [7]&gt;  2242… ESP   AGURTZA… AGURTZAB… EBSJ     8733…</span></span>
<span><span class="co">#&gt; # ℹ 7 more variables: transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   geartypes &lt;chr&gt;, lengthM &lt;int&gt;, tonnageGt &lt;dbl&gt;, vesselInfoReference &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   extraFields &lt;list&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; # A tibble: 0 × 2</span></span>
<span><span class="co">#&gt; # ℹ 2 variables: index &lt;dbl&gt;, &lt;list&gt; &lt;list&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span><span class="co">#&gt;   index dateFrom             dateTo               ssvid     sourceCode</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt;                &lt;chr&gt;     &lt;list&gt;    </span></span>
<span><span class="co">#&gt; 1     1 2019-01-01T00:00:00Z 2019-10-01T00:00:00Z 224224000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 2     1 2012-01-01T00:00:00Z 2019-01-01T00:00:00Z 224224000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 3     1 2019-10-15T00:00:00Z 2023-02-01T00:00:00Z 306118000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 10</span></span>
<span><span class="co">#&gt;   index vesselId              geartypes_name geartypes_source geartypes_yearFrom</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;          &lt;chr&gt;                         &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1     1 3c99c326d-dd2e-175d-… PURSE_SEINE_S… GFW_VESSEL_LIST                2015</span></span>
<span><span class="co">#&gt; 2     1 6632c9eb8-8009-abdb-… PURSE_SEINE_S… GFW_VESSEL_LIST                2019</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: geartypes_yearTo &lt;int&gt;, shiptypes_name &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_source &lt;chr&gt;, shiptypes_yearFrom &lt;int&gt;, shiptypes_yearTo &lt;int&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 14</span></span>
<span><span class="co">#&gt;   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1     1 6632c9eb8… 3061… AGURTZA… AGURTZAB… BES   PJBL     8733…          418581</span></span>
<span><span class="co">#&gt; 2     1 3c99c326d… 2242… AGURTZA… AGURTZAB… ESP   EBSJ     8733…          135057</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="complex-searches-using-where">Complex searches using <code>where</code>
<a class="anchor" aria-label="anchor" href="#complex-searches-using-where"></a>
</h3>
<p>To do more specific searches (e.g. <code>"imo = '8300949'"</code>), combine different fields (<code>"imo = '8300949' AND ssvid = '214182732'"</code>) and do fuzzy matching (<code>"shipname LIKE '%GABU REEFE%' OR imo = '8300949'"</code>), use parameter <code>where</code> instead of <code>query</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>where <span class="op">=</span> <span class="st">"shipname LIKE '%GABU REEFE%' OR imo = '8300949'"</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">"search"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1 total vessels</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   dataset                           </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                             </span></span>
<span><span class="co">#&gt; 1 public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1                        1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 17</span></span>
<span><span class="co">#&gt;   index recordId        sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;list&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     1 b16ca93ea690fc… &lt;chr [3]&gt;  6290… GMB   GABU RE… GABUREEF… C5J278   8300…</span></span>
<span><span class="co">#&gt; # ℹ 8 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   transmissionDateTo &lt;chr&gt;, geartypes &lt;chr&gt;, lengthM &lt;dbl&gt;, tonnageGt &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   vesselInfoReference &lt;chr&gt;, extraFields &lt;list&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 7</span></span>
<span><span class="co">#&gt;   index name                   flag  ssvid     sourceCode dateFrom        dateTo</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;                  &lt;chr&gt; &lt;chr&gt;     &lt;list&gt;     &lt;chr&gt;           &lt;chr&gt; </span></span>
<span><span class="co">#&gt; 1     1 FISHING CARGO SERVICES PAN   629009266 &lt;chr [2]&gt;  2024-08-07T10:… 2025-…</span></span>
<span><span class="co">#&gt; 2     1 FISHING CARGO SERVICES PAN   613590000 &lt;chr [2]&gt;  2022-01-24T09:… 2024-…</span></span>
<span><span class="co">#&gt; 3     1 FISHING CARGO SERVICES PAN   214182732 &lt;chr [2]&gt;  2019-02-23T11:… 2022-…</span></span>
<span><span class="co">#&gt; 4     1 FISHING CARGO SERVICES PAN   616852000 &lt;chr [2]&gt;  2012-01-08T19:… 2019-…</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; # A tibble: 0 × 2</span></span>
<span><span class="co">#&gt; # ℹ 2 variables: index &lt;dbl&gt;, &lt;list&gt; &lt;list&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; # A tibble: 7 × 10</span></span>
<span><span class="co">#&gt;   index vesselId              geartypes_name geartypes_source geartypes_yearFrom</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;          &lt;chr&gt;                         &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1     1 1da8dbc23-3c48-d5ce-… CARRIER        GFW_VESSEL_LIST                2022</span></span>
<span><span class="co">#&gt; 2     1 58cf536b1-1fca-dac3-… CARRIER        GFW_VESSEL_LIST                2012</span></span>
<span><span class="co">#&gt; 3     1 0b7047cb5-58c8-6e63-… CARRIER        GFW_VESSEL_LIST                2019</span></span>
<span><span class="co">#&gt; 4     1 9827ea1ea-a120-f374-… CARRIER        GFW_VESSEL_LIST                2024</span></span>
<span><span class="co">#&gt; 5     1 9827ea1ea-a120-f374-… CARRIER        GFW_VESSEL_LIST                2024</span></span>
<span><span class="co">#&gt; 6     1 9827ea1ea-a120-f374-… CARRIER        GFW_VESSEL_LIST                2025</span></span>
<span><span class="co">#&gt; 7     1 9827ea1ea-a120-f374-… CARRIER        GFW_VESSEL_LIST                2025</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: geartypes_yearTo &lt;int&gt;, shiptypes_name &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_source &lt;chr&gt;, shiptypes_yearFrom &lt;int&gt;, shiptypes_yearTo &lt;int&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 14</span></span>
<span><span class="co">#&gt;   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1     1 9827ea1ea… 6290… GABU RE… GABUREEF… GMB   C5J278   8300…          759956</span></span>
<span><span class="co">#&gt; 2     1 1da8dbc23… 6135… GABU RE… GABUREEF… CMR   TJMC996  8300…          973251</span></span>
<span><span class="co">#&gt; 3     1 0b7047cb5… 2141… GABU RE… GABUREEF… MDA   ER2732   8300…          642750</span></span>
<span><span class="co">#&gt; 4     1 58cf536b1… 6168… GABU RE… GABUREEF… COM   D6FJ2    8300…          469834</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="search-by-vessel-id">Search by vessel ID<a class="anchor" aria-label="anchor" href="#search-by-vessel-id"></a>
</h3>
<p>To search by <code>vesselId</code>, use parameter <code>ids</code> and specify <code>search_type = "id"</code>.</p>
<blockquote>
<p><strong>Note</strong>: <code>vesselId</code> is an internal ID generated by Global Fishing Watch to connect data accross APIs and involves a combination of vessel and tracking data information. It can be retrieved using <code><a href="reference/get_vessel_info.html">get_vessel_info()</a></code> and fetching the vector of responses inside <code>$selfReportedInfo$vesselId</code>. See the <a href="https://globalfishingwatch.github.io/gfwr/articles/identity">identity vignette</a> for more information.</p>
</blockquote>
<div class="section level4">
<h4 id="single-vessel-ids">Single vessel IDs<a class="anchor" aria-label="anchor" href="#single-vessel-ids"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="st">"8c7304226-6c71-edbe-0b63-c246734b3c01"</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1 total vessels</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   dataset                           </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                             </span></span>
<span><span class="co">#&gt; 1 public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1                        5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; # A tibble: 5 × 17</span></span>
<span><span class="co">#&gt;   index recordId        sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;list&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     1 a8d00ce54b37ad… &lt;chr [4]&gt;  2733… RUS   FRIO FO… FRIOFORW… UCRZ     9076…</span></span>
<span><span class="co">#&gt; 2     1 a8d00ce54b37ad… &lt;chr [3]&gt;  5111… PLW   FRIO FO… FRIOFORW… T8A4891  9076…</span></span>
<span><span class="co">#&gt; 3     1 a8d00ce54b37ad… &lt;chr [7]&gt;  2106… CYP   FRIO FO… FRIOFORW… 5BWC3    9076…</span></span>
<span><span class="co">#&gt; 4     1 a8d00ce54b37ad… &lt;chr [2]&gt;  3413… KNA   FRIO FO… FRIOFORW… V4JQ3    9076…</span></span>
<span><span class="co">#&gt; 5     1 a8d00ce54b37ad… &lt;chr [3]&gt;  3546… PAN   FRIOAEG… FRIOAEGE… 3FGY4    9076…</span></span>
<span><span class="co">#&gt; # ℹ 8 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   transmissionDateTo &lt;chr&gt;, geartypes &lt;chr&gt;, lengthM &lt;int&gt;, tonnageGt &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   vesselInfoReference &lt;chr&gt;, extraFields &lt;list&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 7</span></span>
<span><span class="co">#&gt;   index name    flag  ssvid     sourceCode dateFrom             dateTo          </span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;     &lt;list&gt;     &lt;chr&gt;                &lt;chr&gt;           </span></span>
<span><span class="co">#&gt; 1     1 COLINER RUS   273379740 &lt;chr [2]&gt;  2015-02-27T10:59:43Z 2025-05-31T23:5…</span></span>
<span><span class="co">#&gt; 2     1 COLINER CYP   511101495 &lt;chr [1]&gt;  2024-07-04T14:27:04Z 2024-07-24T14:2…</span></span>
<span><span class="co">#&gt; 3     1 COLINER CYP   210631000 &lt;chr [1]&gt;  2013-05-15T20:19:43Z 2024-07-04T14:1…</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span><span class="co">#&gt;   index dateFrom             dateTo               ssvid     sourceCode</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt;                &lt;chr&gt;     &lt;list&gt;    </span></span>
<span><span class="co">#&gt; 1     1 2023-01-01T00:00:00Z 2024-12-31T00:00:00Z 210631000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 2     1 2020-01-01T00:00:00Z 2024-12-01T00:00:00Z 210631000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 3     1 2024-08-09T00:00:00Z 2025-05-01T00:00:00Z 273379740 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; # A tibble: 13 × 10</span></span>
<span><span class="co">#&gt;    index vesselId             geartypes_name geartypes_source geartypes_yearFrom</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt;          &lt;chr&gt;                         &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1     1 3c81a942b-bf0a-f476… CARRIER        GFW_VESSEL_LIST                2015</span></span>
<span><span class="co">#&gt;  2     1 8c7304226-6c71-edbe… CARRIER        GFW_VESSEL_LIST                2013</span></span>
<span><span class="co">#&gt;  3     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2019</span></span>
<span><span class="co">#&gt;  4     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2019</span></span>
<span><span class="co">#&gt;  5     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2019</span></span>
<span><span class="co">#&gt;  6     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2025</span></span>
<span><span class="co">#&gt;  7     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2025</span></span>
<span><span class="co">#&gt;  8     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2025</span></span>
<span><span class="co">#&gt;  9     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2015</span></span>
<span><span class="co">#&gt; 10     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2015</span></span>
<span><span class="co">#&gt; 11     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2015</span></span>
<span><span class="co">#&gt; 12     1 0edad163f-f53d-9ddb… CARRIER        GFW_VESSEL_LIST                2024</span></span>
<span><span class="co">#&gt; 13     1 0cb77880e-ee49-2ce4… CARRIER        GFW_VESSEL_LIST                2012</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: geartypes_yearTo &lt;int&gt;, shiptypes_name &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_source &lt;chr&gt;, shiptypes_yearFrom &lt;int&gt;, shiptypes_yearTo &lt;int&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 14</span></span>
<span><span class="co">#&gt;   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1     1 8c7304226… 2106… FRIO FO… FRIOFORW… CYP   5BWC3    9076…         3369802</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="multiple-vessel-ids">Multiple vessel IDs<a class="anchor" aria-label="anchor" href="#multiple-vessel-ids"></a>
</h4>
<p>To specify more than one <code>vesselId</code>, you can submit a vector:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"8c7304226-6c71-edbe-0b63-c246734b3c01"</span>,</span>
<span>                        <span class="st">"6583c51e3-3626-5638-866a-f47c3bc7ef7c"</span>,</span>
<span>                        <span class="st">"71e7da672-2451-17da-b239-857831602eca"</span><span class="op">)</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 3 total vessels</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 1</span></span>
<span><span class="co">#&gt;   dataset                           </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                             </span></span>
<span><span class="co">#&gt; 1 public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; 2 public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; 3 public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 1</span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1                        5</span></span>
<span><span class="co">#&gt; 2                        2</span></span>
<span><span class="co">#&gt; 3                        1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 17</span></span>
<span><span class="co">#&gt;   index recordId        sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;           &lt;list&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     1 a8d00ce54b37ad… &lt;chr [4]&gt;  2733… RUS   FRIO FO… FRIOFORW… UCRZ     9076…</span></span>
<span><span class="co">#&gt; 2     1 a8d00ce54b37ad… &lt;chr [3]&gt;  5111… PLW   FRIO FO… FRIOFORW… T8A4891  9076…</span></span>
<span><span class="co">#&gt; 3     1 a8d00ce54b37ad… &lt;chr [7]&gt;  2106… CYP   FRIO FO… FRIOFORW… 5BWC3    9076…</span></span>
<span><span class="co">#&gt; 4     1 a8d00ce54b37ad… &lt;chr [2]&gt;  3413… KNA   FRIO FO… FRIOFORW… V4JQ3    9076…</span></span>
<span><span class="co">#&gt; 5     1 a8d00ce54b37ad… &lt;chr [3]&gt;  3546… PAN   FRIOAEG… FRIOAEGE… 3FGY4    9076…</span></span>
<span><span class="co">#&gt; 6     2 b82d02e5c2c11e… &lt;chr [6]&gt;  4417… KOR   ADRIA    ADRIA     DTBY3    8919…</span></span>
<span><span class="co">#&gt; 7     2 b82d02e5c2c11e… &lt;chr [5]&gt;  4417… KOR   PREMIER  PREMIER   DTBY3    8919…</span></span>
<span><span class="co">#&gt; 8     3 685862e0626f62… &lt;chr [6]&gt;  5480… PHL   JOHNREY… JOHNREYN… DUQA7    8118…</span></span>
<span><span class="co">#&gt; # ℹ 8 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   transmissionDateTo &lt;chr&gt;, geartypes &lt;chr&gt;, lengthM &lt;dbl&gt;, tonnageGt &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   vesselInfoReference &lt;chr&gt;, extraFields &lt;list&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 7</span></span>
<span><span class="co">#&gt;   index name    flag  ssvid     sourceCode dateFrom             dateTo          </span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;     &lt;list&gt;     &lt;chr&gt;                &lt;chr&gt;           </span></span>
<span><span class="co">#&gt; 1     1 COLINER RUS   273379740 &lt;chr [2]&gt;  2015-02-27T10:59:43Z 2025-05-31T23:5…</span></span>
<span><span class="co">#&gt; 2     1 COLINER CYP   511101495 &lt;chr [1]&gt;  2024-07-04T14:27:04Z 2024-07-24T14:2…</span></span>
<span><span class="co">#&gt; 3     1 COLINER CYP   210631000 &lt;chr [1]&gt;  2013-05-15T20:19:43Z 2024-07-04T14:1…</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 5</span></span>
<span><span class="co">#&gt;   index dateFrom             dateTo               ssvid     sourceCode</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt;                &lt;chr&gt;     &lt;list&gt;    </span></span>
<span><span class="co">#&gt; 1     1 2023-01-01T00:00:00Z 2024-12-31T00:00:00Z 210631000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 2     1 2020-01-01T00:00:00Z 2024-12-01T00:00:00Z 210631000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 3     1 2024-08-09T00:00:00Z 2025-05-01T00:00:00Z 273379740 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 4     2 2015-10-08T00:00:00Z 2020-07-21T00:00:00Z 441734000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 5     2 2012-01-01T00:00:00Z 2013-09-19T00:00:00Z 441734000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 6     2 2013-09-20T00:00:00Z 2025-01-01T00:00:00Z 441734000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 7     3 2012-01-01T00:00:00Z 2017-10-25T00:00:00Z 548012100 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 8     3 2019-02-10T18:02:49Z 2025-05-01T00:00:00Z 548012100 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; # A tibble: 17 × 10</span></span>
<span><span class="co">#&gt;    index vesselId             geartypes_name geartypes_source geartypes_yearFrom</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt;          &lt;chr&gt;                         &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1     1 3c81a942b-bf0a-f476… CARRIER        GFW_VESSEL_LIST                2015</span></span>
<span><span class="co">#&gt;  2     1 8c7304226-6c71-edbe… CARRIER        GFW_VESSEL_LIST                2013</span></span>
<span><span class="co">#&gt;  3     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2019</span></span>
<span><span class="co">#&gt;  4     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2019</span></span>
<span><span class="co">#&gt;  5     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2019</span></span>
<span><span class="co">#&gt;  6     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2025</span></span>
<span><span class="co">#&gt;  7     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2025</span></span>
<span><span class="co">#&gt;  8     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2025</span></span>
<span><span class="co">#&gt;  9     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2015</span></span>
<span><span class="co">#&gt; 10     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2015</span></span>
<span><span class="co">#&gt; 11     1 da1cd7e1b-b8d0-539c… CARRIER        GFW_VESSEL_LIST                2015</span></span>
<span><span class="co">#&gt; 12     1 0edad163f-f53d-9ddb… CARRIER        GFW_VESSEL_LIST                2024</span></span>
<span><span class="co">#&gt; 13     1 0cb77880e-ee49-2ce4… CARRIER        GFW_VESSEL_LIST                2012</span></span>
<span><span class="co">#&gt; 14     2 aca119c29-95dd-f5c4… TUNA_PURSE_SE… COMBINATION_OF_…               2012</span></span>
<span><span class="co">#&gt; 15     2 6583c51e3-3626-5638… TUNA_PURSE_SE… COMBINATION_OF_…               2013</span></span>
<span><span class="co">#&gt; 16     3 55889aefb-bef9-224c… TUNA_PURSE_SE… COMBINATION_OF_…               2017</span></span>
<span><span class="co">#&gt; 17     3 71e7da672-2451-17da… TUNA_PURSE_SE… COMBINATION_OF_…               2017</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: geartypes_yearTo &lt;int&gt;, shiptypes_name &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_source &lt;chr&gt;, shiptypes_yearFrom &lt;int&gt;, shiptypes_yearTo &lt;int&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 14</span></span>
<span><span class="co">#&gt;   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1     1 8c7304226… 2106… FRIO FO… FRIOFORW… CYP   5BWC3    9076…         3369802</span></span>
<span><span class="co">#&gt; 2     2 6583c51e3… 4417… ADRIA    ADRIA     KOR   DTBY3    &lt;NA&gt;           360249</span></span>
<span><span class="co">#&gt; 3     3 71e7da672… 5480… JOHN RE… JOHNREYN… PHL   DUQA-7   8118…          133081</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></code></pre></div>
<p><strong>Check the function documentation for examples with the other function arguments and <a href="https://globalfishingwatch.github.io/gfwr/articles/identity">our dedicated vignette</a> for more information about vessel identity markers and the outputs retrieved.</strong></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="events-api">Events API<a class="anchor" aria-label="anchor" href="#events-api"></a>
</h2>
<p>The <code><a href="reference/get_event.html">get_event()</a></code> function allows you to get data on specific vessel activities from the <a href="https://globalfishingwatch.org/our-apis/documentation#events-api" class="external-link">Events API</a>. Event types include apparent fishing events, potential transshipment events (two-vessel encounters and loitering by refrigerated carrier vessels), port visits, and AIS-disabling events (“gaps”). Find more information about events in our <a href="https://globalfishingwatch.org/our-apis/documentation#data-caveat" class="external-link">caveat documentation</a>.</p>
<div class="section level3">
<h3 id="events-in-a-given-time-range">Events in a given time range<a class="anchor" aria-label="anchor" href="#events-in-a-given-time-range"></a>
</h3>
<p>You can get events in a given date range. By not specifying <code>vessels</code>, the response will return results for all vessels.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">"ENCOUNTER"</span>,</span>
<span>          start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"2020-01-02"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 288 events from GFW"</span></span>
<span><span class="co">#&gt; # A tibble: 288 × 17</span></span>
<span><span class="co">#&gt;    start               end                 eventId        eventType    lat   lon</span></span>
<span><span class="co">#&gt;    &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;          &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 2019-12-30 11:00:00 2020-01-06 14:00:00 3067e6a37d326… encounter   9.49 -99.1</span></span>
<span><span class="co">#&gt;  2 2019-12-31 12:00:00 2020-01-01 13:50:00 c11e047615243… encounter -17.6  -79.3</span></span>
<span><span class="co">#&gt;  3 2020-01-01 00:00:00 2020-01-01 02:40:00 3b109ab4e8fc4… encounter  34.7  129. </span></span>
<span><span class="co">#&gt;  4 2020-01-01 00:40:00 2020-01-01 08:20:00 3de48259ac99d… encounter  26.6  120. </span></span>
<span><span class="co">#&gt;  5 2020-01-01 17:30:00 2020-01-02 04:30:00 4d721ad85f1cf… encounter  68.7   50.3</span></span>
<span><span class="co">#&gt;  6 2020-01-01 00:00:00 2020-01-01 11:20:00 255d53a814907… encounter  44.5  136. </span></span>
<span><span class="co">#&gt;  7 2020-01-01 17:40:00 2020-01-01 23:30:00 24df89e2316c7… encounter  38.3  121. </span></span>
<span><span class="co">#&gt;  8 2020-01-01 14:20:00 2020-01-01 16:30:00 96ccfc41e8c64… encounter   6.18  99.7</span></span>
<span><span class="co">#&gt;  9 2020-01-01 13:20:00 2020-01-01 20:50:00 8663bd73cdffd… encounter -45.4  -60.6</span></span>
<span><span class="co">#&gt; 10 2020-01-01 18:20:00 2020-01-01 22:20:00 1f565991a7c23… encounter  38.5  121. </span></span>
<span><span class="co">#&gt; # ℹ 278 more rows</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   vessel_type &lt;chr&gt;, vessel_publicAuthorizations &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   vessel_nextPort &lt;list&gt;, event_info &lt;list&gt;</span></span></code></pre></div>
<blockquote>
<p><em>Note</em>: We do not recommend trying too large downloads, such as all encounters for all vessels over a long period of time. This will possibly return time out (524) errors. Our API team is working on another API specific for large downloads in the future.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="events-in-a-specific-area">Events in a specific area<a class="anchor" aria-label="anchor" href="#events-in-a-specific-area"></a>
</h3>
<p>You can provide a polygon in <code>sf</code> format or the region code (such as an EEZ code) to filter the raster. Check the function documentation for more information about parameters <code>region</code> and <code>region_source</code></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="co"># fishing events in user shapefile</span></span>
<span><span class="va">test_polygon</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="op">-</span><span class="fl">70</span>,</span>
<span>                              xmax <span class="op">=</span> <span class="op">-</span><span class="fl">40</span>,</span>
<span>                              ymin <span class="op">=</span> <span class="op">-</span><span class="fl">10</span>,</span>
<span>                              ymax <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sfc.html" class="external-link">st_as_sfc</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">"FISHING"</span>,</span>
<span>               start_date <span class="op">=</span> <span class="st">"2020-10-01"</span>,</span>
<span>               end_date <span class="op">=</span> <span class="st">"2020-10-31"</span>,</span>
<span>               region <span class="op">=</span> <span class="va">test_polygon</span>,</span>
<span>               region_source <span class="op">=</span> <span class="st">"USER_SHAPEFILE"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 59 events from GFW"</span></span>
<span><span class="co">#&gt; # A tibble: 59 × 17</span></span>
<span><span class="co">#&gt;    start               end                 eventId         eventType   lat   lon</span></span>
<span><span class="co">#&gt;    &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;           &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 2020-10-20 03:23:35 2020-10-20 16:14:26 97790a3a15dc5f… fishing   4.89  -51.8</span></span>
<span><span class="co">#&gt;  2 2020-10-01 12:54:31 2020-10-01 21:26:31 083f87bff85928… fishing   4.75  -51.6</span></span>
<span><span class="co">#&gt;  3 2020-10-01 23:29:31 2020-10-03 03:11:17 4d538f3b37e2ae… fishing   4.74  -51.5</span></span>
<span><span class="co">#&gt;  4 2020-10-05 08:50:27 2020-10-06 17:35:21 c75671db2488b8… fishing   4.71  -51.5</span></span>
<span><span class="co">#&gt;  5 2020-10-03 05:50:14 2020-10-05 03:35:27 b68b49e7e3655c… fishing   4.73  -51.5</span></span>
<span><span class="co">#&gt;  6 2020-10-30 12:22:15 2020-10-30 13:51:56 8524e3c9d9c25f… fishing   3.79  -50.1</span></span>
<span><span class="co">#&gt;  7 2020-10-03 21:08:06 2020-10-04 03:31:11 3ce13bbe2752ec… fishing   4.75  -51.6</span></span>
<span><span class="co">#&gt;  8 2020-10-17 17:59:45 2020-10-17 19:45:10 b08ba788b149c2… fishing   0.222 -47.7</span></span>
<span><span class="co">#&gt;  9 2020-10-24 15:44:03 2020-10-24 18:56:19 fbf1567e527d4d… fishing   0.259 -47.9</span></span>
<span><span class="co">#&gt; 10 2020-10-18 21:29:13 2020-10-18 22:28:02 eb82a3cc27a9e0… fishing   4.95  -51.6</span></span>
<span><span class="co">#&gt; # ℹ 49 more rows</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   vessel_type &lt;chr&gt;, vessel_publicAuthorizations &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   vessel_nextPort &lt;lgl&gt;, event_info &lt;list&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="events-for-specific-vessels">Events for specific vessels<a class="anchor" aria-label="anchor" href="#events-for-specific-vessels"></a>
</h3>
<p>To extract events for specific vessels, the Events API needs <code>vesselId</code> as input, so you always need to use <code><a href="reference/get_vessel_info.html">get_vessel_info()</a></code> first to extract <code>vesselId</code> from <code>$selfReportedInfo</code> in the response.</p>
<div class="section level4">
<h4 id="single-vessel-events">Single vessel events<a class="anchor" aria-label="anchor" href="#single-vessel-events"></a>
</h4>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vessel_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>query <span class="op">=</span> <span class="fl">224224000</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1 total vessels</span></span>
<span><span class="va">vessel_info</span><span class="op">$</span><span class="va">selfReportedInfo</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 14</span></span>
<span><span class="co">#&gt;   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1     1 6632c9eb8… 3061… AGURTZA… AGURTZAB… BES   PJBL     8733…          418581</span></span>
<span><span class="co">#&gt; 2     1 3c99c326d… 2242… AGURTZA… AGURTZAB… ESP   EBSJ     8733…          135057</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></code></pre></div>
<p>The results show this vessel’s story is grouped in two <code>vesselIds</code>.</p>
<p>To get a list of port visits for that vessel, you can use a single <code>vesselId</code> of your interest:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="va">vessel_info</span><span class="op">$</span><span class="va">selfReportedInfo</span><span class="op">$</span><span class="va">vesselId</span></span>
<span><span class="va">id</span></span>
<span><span class="co">#&gt; [1] "6632c9eb8-8009-abdb-baf9-b67d65f20510"</span></span>
<span><span class="co">#&gt; [2] "3c99c326d-dd2e-175d-626f-a3c488a4342b"</span></span>
<span></span>
<span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">"PORT_VISIT"</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>          confidences <span class="op">=</span> <span class="fl">4</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 25 events from GFW"</span></span>
<span><span class="co">#&gt; # A tibble: 25 × 16</span></span>
<span><span class="co">#&gt;    start               end                 eventId        eventType   lat    lon</span></span>
<span><span class="co">#&gt;    &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;          &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 2020-01-27 08:04:38 2020-02-23 10:18:02 abed2e0c06e4e… port_vis… 16.9  -25.0 </span></span>
<span><span class="co">#&gt;  2 2021-08-01 12:58:44 2021-08-16 16:00:15 a26f4940e189c… port_vis…  5.20  -4.02</span></span>
<span><span class="co">#&gt;  3 2020-03-05 13:28:59 2020-03-10 02:26:24 0d845cb306614… port_vis…  5.20  -4.02</span></span>
<span><span class="co">#&gt;  4 2020-04-19 06:16:46 2020-04-21 14:02:19 5ad5c93c5448d… port_vis… 28.1  -15.4 </span></span>
<span><span class="co">#&gt;  5 2020-11-01 14:17:48 2020-11-06 12:25:53 f39043169c3c4… port_vis…  5.20  -4.02</span></span>
<span><span class="co">#&gt;  6 2020-05-05 06:52:54 2020-05-07 14:22:35 729df630342f0… port_vis…  5.20  -4.02</span></span>
<span><span class="co">#&gt;  7 2021-10-17 09:52:51 2021-10-17 16:06:40 d133e151d9edd… port_vis… 14.6  -17.4 </span></span>
<span><span class="co">#&gt;  8 2021-11-11 18:41:10 2021-11-20 18:43:26 af0cb5d7ee288… port_vis…  5.20  -4.04</span></span>
<span><span class="co">#&gt;  9 2020-06-25 09:13:36 2020-06-25 20:31:10 29863e18bfa98… port_vis… 16.9  -25.0 </span></span>
<span><span class="co">#&gt; 10 2020-07-06 06:45:06 2020-07-12 09:13:39 6845cffacfe25… port_vis…  5.20  -4.02</span></span>
<span><span class="co">#&gt; # ℹ 15 more rows</span></span>
<span><span class="co">#&gt; # ℹ 10 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   vessel_type &lt;chr&gt;, vessel_nextPort &lt;lgl&gt;, event_info &lt;list&gt;</span></span></code></pre></div>
<p>But to get the whole event history, it’s better to use the whole vector of <code>vesselId</code> for that vessel. Notice how the following request provides more results than the previous one:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">"PORT_VISIT"</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">id</span>, <span class="co">#using the whole vector of vesselIds</span></span>
<span>          confidences <span class="op">=</span> <span class="fl">4</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 74 events from GFW"</span></span>
<span><span class="co">#&gt; # A tibble: 74 × 16</span></span>
<span><span class="co">#&gt;    start               end                 eventId        eventType   lat    lon</span></span>
<span><span class="co">#&gt;    &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;          &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 2019-09-29 05:40:18 2019-10-02 17:16:39 baa809792afe6… port_vis… 14.6  -17.4 </span></span>
<span><span class="co">#&gt;  2 2016-05-18 19:31:04 2016-05-22 14:20:05 8f19c373a1d4b… port_vis…  5.20  -4.02</span></span>
<span><span class="co">#&gt;  3 2017-06-11 13:06:41 2017-06-11 20:24:21 37dd9b53c8e95… port_vis… 14.7  -17.4 </span></span>
<span><span class="co">#&gt;  4 2017-07-20 01:24:50 2017-08-17 13:14:35 c3a91322707ba… port_vis…  5.20  -4.02</span></span>
<span><span class="co">#&gt;  5 2016-02-25 14:26:38 2016-03-01 13:21:21 6265aa07f2c16… port_vis…  5.23  -3.97</span></span>
<span><span class="co">#&gt;  6 2016-06-26 15:08:16 2016-06-30 10:39:03 bf64dfbc753b4… port_vis…  5.19  -4.08</span></span>
<span><span class="co">#&gt;  7 2019-12-06 11:02:09 2019-12-11 10:20:04 bcd967c59306c… port_vis…  5.20  -4.04</span></span>
<span><span class="co">#&gt;  8 2021-08-01 12:58:44 2021-08-16 16:00:15 a26f4940e189c… port_vis…  5.20  -4.02</span></span>
<span><span class="co">#&gt;  9 2020-01-11 11:18:49 2020-01-15 11:54:49 889beb4fc4bfb… port_vis…  5.23  -4.02</span></span>
<span><span class="co">#&gt; 10 2017-09-26 05:57:58 2017-09-30 09:45:51 bd92902851ea3… port_vis…  5.20  -4.02</span></span>
<span><span class="co">#&gt; # ℹ 64 more rows</span></span>
<span><span class="co">#&gt; # ℹ 10 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   vessel_type &lt;chr&gt;, vessel_nextPort &lt;lgl&gt;, event_info &lt;list&gt;</span></span></code></pre></div>
<blockquote>
<p><em>Note</em>: Try narrowing your search using <code>start_date</code> and <code>end_date</code> if the request is too large and returns a time out error (524)</p>
</blockquote>
<p>When a date range is provided to <code><a href="reference/get_event.html">get_event()</a></code> using both <code>start_date</code> and <code>end_date</code>, any event overlapping that range will be returned, including events that start prior to <code>start_date</code> or end after <code>end_date</code>. If just <code>start_date</code> or <code>end_date</code> are provided, results will include all events that end after <code>start_date</code> or begin prior to <code>end_date</code>, respectively.</p>
<blockquote>
<p><strong>Note</strong>:<br>
Because encounter events are events between two vessels, a single event will be represented twice in the data, once for each vessel. To capture this information and link the related data rows, the <code>id</code> field for encounter events includes an additional suffix (1 or 2) separated by a period. The <code>vessel</code> field will also contain different information specific to each vessel.</p>
</blockquote>
</div>
<div class="section level4">
<h4 id="events-for-multiple-vessels">Events for multiple vessels<a class="anchor" aria-label="anchor" href="#events-for-multiple-vessels"></a>
</h4>
<p>As another example, let’s combine the Vessels and Events APIs to get fishing events for a list of USA-flagged trawlers:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download the list of USA trawlers</span></span>
<span><span class="va">usa_trawlers</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span></span>
<span>  where <span class="op">=</span> <span class="st">"flag='USA' AND geartypes='TRAWLERS'"</span>,</span>
<span>  search_type <span class="op">=</span> <span class="st">"search"</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span> </span>
<span>  <span class="op">)</span></span>
<span><span class="co"># Set quiet = TRUE if you want the output to return silently</span></span></code></pre></div>
<p>This list returns 6486 <code>vesselIds</code> belonging to 4163 vessels.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">usa_trawlers</span><span class="op">$</span><span class="va">selfReportedInfo</span></span>
<span><span class="co">#&gt; # A tibble: 6,662 × 14</span></span>
<span><span class="co">#&gt;    index vesselId  ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1     1 d32af732… 3680… SUPERMA… SUPERMAN… USA   WDJ8890  &lt;NA&gt;           267397</span></span>
<span><span class="co">#&gt;  2     1 5446e7cd… 3680… SUPERMA… SUPERMAN… USA   &lt;NA&gt;     &lt;NA&gt;             6184</span></span>
<span><span class="co">#&gt;  3     2 47b94476… 3668… ORION    ORION     USA   &lt;NA&gt;     &lt;NA&gt;            23007</span></span>
<span><span class="co">#&gt;  4     3 9f555214… 3680… PELICAN  PELICAN   USA   WDJ8253  &lt;NA&gt;           401525</span></span>
<span><span class="co">#&gt;  5     3 15cea26f… 3680… PELICAN  PELICAN   USA   &lt;NA&gt;     &lt;NA&gt;              407</span></span>
<span><span class="co">#&gt;  6     4 0dddd2a8… 3673… SHAMROCK SHAMROCK  USA   WDD8722  &lt;NA&gt;             2720</span></span>
<span><span class="co">#&gt;  7     4 695b254f… 3673… SHAMROCK SHAMROCK  USA   &lt;NA&gt;     &lt;NA&gt;              477</span></span>
<span><span class="co">#&gt;  8     4 ac994bda… 3673… &lt;NA&gt;     &lt;NA&gt;      USA   WDD8722  &lt;NA&gt;             3179</span></span>
<span><span class="co">#&gt;  9     5 bc29946f… 3667… ALEX     ALEX      USA   WDA2216  &lt;NA&gt;           840772</span></span>
<span><span class="co">#&gt; 10     5 0e4052b1… 3667… &lt;NA&gt;     &lt;NA&gt;      USA   WDA2216  &lt;NA&gt;             8403</span></span>
<span><span class="co">#&gt; # ℹ 6,652 more rows</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></code></pre></div>
<p>To fetch events for this list of vessels, we will use the <code>vesselId</code> column and send it to the <code>vessels</code> parameter in <code><a href="reference/get_event.html">get_event()</a></code> function.</p>
<p>For clarity, we should try to send groups of <code>vesselIds</code> that belong to the same vessels. For this, we can check the <code>index</code> column in the <code>$selfReportedInfo</code> dataset.</p>
<blockquote>
<p><em>Note</em>: <code><a href="reference/get_event.html">get_event()</a></code> can receive several <code>vesselIds</code> at a time but will fail when the character length of the whole request is too long (~100,000 characters). This means it will fail with error <strong>HTTP 422: Unprocessable entity</strong> when too many <code>vesselIds</code> are requested, this value can be around 2,800 <code>vesselIds</code> depending on the other parameters of the search.</p>
</blockquote>
<p>For this example, we will send the <code>vesselIds</code> corresponding to the first twenty vessels in the response:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">each_USA_trawler</span> <span class="op">&lt;-</span> <span class="va">usa_trawlers</span><span class="op">$</span><span class="va">selfReportedInfo</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index"</span>, <span class="st">"vesselId"</span><span class="op">)</span><span class="op">]</span> </span>
<span><span class="co"># how many vessels correspond to the first twenty vessels. </span></span>
<span><span class="op">(</span><span class="va">twenty_usa_trawlers</span> <span class="op">&lt;-</span> <span class="va">each_USA_trawler</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">index</span> <span class="op">&lt;=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 51 × 2</span></span>
<span><span class="co">#&gt;    index vesselId                             </span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;                                </span></span>
<span><span class="co">#&gt;  1     1 d32af7320-0748-9a63-abd7-48ad721e63b8</span></span>
<span><span class="co">#&gt;  2     1 5446e7cd1-1f75-4672-d859-01211df72fba</span></span>
<span><span class="co">#&gt;  3     2 47b944765-5819-b2ab-8c2e-cfc82bd2e82c</span></span>
<span><span class="co">#&gt;  4     3 9f5552145-50ed-92f4-4514-5177b1a6511d</span></span>
<span><span class="co">#&gt;  5     3 15cea26f5-57ad-acac-4cbf-b45cefb7ab04</span></span>
<span><span class="co">#&gt;  6     4 0dddd2a83-3626-24f1-0fe6-3c4d45bbb409</span></span>
<span><span class="co">#&gt;  7     4 695b254f7-7e6c-ff50-dc63-55139d9e0101</span></span>
<span><span class="co">#&gt;  8     4 ac994bdab-b59c-9fcc-659e-40179e5dddfb</span></span>
<span><span class="co">#&gt;  9     5 bc29946f2-2b0b-9613-054a-cd59327226d9</span></span>
<span><span class="co">#&gt; 10     5 0e4052b12-2e16-969f-d3e3-2a266be74255</span></span>
<span><span class="co">#&gt; # ℹ 41 more rows</span></span></code></pre></div>
<p>There are 51 <code>vesselIds</code> corresponding to those 20 vessels.</p>
<p>Let’s pass the vector of <code>vesselIds</code> to Events API. Now get the list of fishing events for these trawlers in January, 2020:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fishing_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">"FISHING"</span>,</span>
<span>                            vessels <span class="op">=</span> <span class="va">twenty_usa_trawlers</span><span class="op">$</span><span class="va">vesselId</span>,</span>
<span>                            start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>                            end_date <span class="op">=</span> <span class="st">"2020-02-01"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 63 events from GFW"</span></span>
<span><span class="va">fishing_events</span></span>
<span><span class="co">#&gt; # A tibble: 63 × 17</span></span>
<span><span class="co">#&gt;    start               end                 eventId        eventType   lat    lon</span></span>
<span><span class="co">#&gt;    &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;          &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 2020-01-22 03:07:24 2020-01-23 03:57:57 7812ab3b7950f… fishing    38.0  -73.9</span></span>
<span><span class="co">#&gt;  2 2020-01-05 03:57:26 2020-01-05 05:24:51 0a79fe4183554… fishing    44.4 -124. </span></span>
<span><span class="co">#&gt;  3 2020-01-18 06:54:55 2020-01-18 07:29:56 5ff9724477b70… fishing    41.4  -69.3</span></span>
<span><span class="co">#&gt;  4 2020-01-25 09:38:35 2020-01-25 10:34:01 6b4c28449e7fe… fishing    40.1  -72.7</span></span>
<span><span class="co">#&gt;  5 2020-01-16 15:07:04 2020-01-16 17:16:20 db046d9ebb664… fishing    41.4  -69.3</span></span>
<span><span class="co">#&gt;  6 2020-01-17 18:15:20 2020-01-17 23:14:40 4fe0db533d5a6… fishing    41.5  -70.2</span></span>
<span><span class="co">#&gt;  7 2020-01-17 09:10:03 2020-01-17 17:57:00 e5d2760a2cd5e… fishing    41.5  -70.1</span></span>
<span><span class="co">#&gt;  8 2020-01-05 15:00:22 2020-01-06 00:35:34 873cf3ee8755c… fishing    41.4  -68.7</span></span>
<span><span class="co">#&gt;  9 2020-01-15 21:35:14 2020-01-16 11:01:12 2c309e235a0d1… fishing    41.4  -68.7</span></span>
<span><span class="co">#&gt; 10 2020-01-16 17:38:41 2020-01-17 07:47:12 1b4256ca28af9… fishing    41.4  -69.6</span></span>
<span><span class="co">#&gt; # ℹ 53 more rows</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   vessel_type &lt;chr&gt;, vessel_publicAuthorizations &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   vessel_nextPort &lt;lgl&gt;, event_info &lt;list&gt;</span></span></code></pre></div>
<p>The columns starting by <code>vessel</code> hold the vessel-related information for each event: <code>vesselId</code>, <code>vessel_name</code>, <code>ssvid</code> (MMSI), <code>flag</code>, <code>vessel type</code> and public authorizations.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fishing_events</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"vessel"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 63 × 7</span></span>
<span><span class="co">#&gt;    vesselId                     vessel_name vessel_ssvid vessel_flag vessel_type</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                        &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;      </span></span>
<span><span class="co">#&gt;  1 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt;  2 0203066e4-4f99-c97a-7b94-0e… PROSPECTOR  367428110    USA         fishing    </span></span>
<span><span class="co">#&gt;  3 35eb371c0-088a-1382-098a-c7… STARBRITE   367707710    USA         fishing    </span></span>
<span><span class="co">#&gt;  4 35eb371c0-088a-1382-098a-c7… STARBRITE   367707710    USA         fishing    </span></span>
<span><span class="co">#&gt;  5 35eb371c0-088a-1382-098a-c7… STARBRITE   367707710    USA         fishing    </span></span>
<span><span class="co">#&gt;  6 35eb371c0-088a-1382-098a-c7… STARBRITE   367707710    USA         fishing    </span></span>
<span><span class="co">#&gt;  7 35eb371c0-088a-1382-098a-c7… STARBRITE   367707710    USA         fishing    </span></span>
<span><span class="co">#&gt;  8 35eb371c0-088a-1382-098a-c7… STARBRITE   367707710    USA         fishing    </span></span>
<span><span class="co">#&gt;  9 35eb371c0-088a-1382-098a-c7… STARBRITE   367707710    USA         fishing    </span></span>
<span><span class="co">#&gt; 10 35eb371c0-088a-1382-098a-c7… STARBRITE   367707710    USA         fishing    </span></span>
<span><span class="co">#&gt; # ℹ 53 more rows</span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: vessel_publicAuthorizations &lt;list&gt;, vessel_nextPort &lt;lgl&gt;</span></span></code></pre></div>
<p>When no events are available, the <code><a href="reference/get_event.html">get_event()</a></code> function returns nothing.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">"FISHING"</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">twenty_usa_trawlers</span><span class="op">$</span><span class="va">vesselId</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>          start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"2020-01-01"</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Your request returned zero results"</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="apparent-fishing-effort-api">Apparent fishing effort API<a class="anchor" aria-label="anchor" href="#apparent-fishing-effort-api"></a>
</h2>
<p>The <code><a href="reference/get_raster.html">get_raster()</a></code> function gets a raster from the <a href="https://globalfishingwatch.org/our-apis/documentation#map-visualization-4wings-api" class="external-link">4Wings API</a> and converts the response to a data frame. In order to use it, you should specify:</p>
<ul>
<li>The spatial resolution, which can be <code>LOW</code> (0.1 degree) or <code>HIGH</code> (0.01 degree)</li>
<li>The temporal resolution, which can be <code>HOURLY</code>, <code>DAILY</code>, <code>MONTHLY</code>, <code>YEARLY</code> or <code>ENTIRE</code>.</li>
<li>The variable to group by: <code>FLAG</code>, <code>GEARTYPE</code>, <code>FLAGANDGEARTYPE</code>, <code>MMSI</code> or <code>VESSEL_ID</code>
</li>
<li>The date range <code>note: this must be 366 days or less</code>
</li>
<li>The region polygon in <code>sf</code> format or the region code (such as an EEZ code) to filter the raster</li>
<li>The source for the specified region. Currently, <code>EEZ</code>, <code>MPA</code>, <code>RFMO</code> or <code>USER_SHAPEFILE</code> (for <code>sf</code> shapefiles).</li>
</ul>
<div class="section level3">
<h3 id="user-defined-shapefile">User-defined shapefile<a class="anchor" aria-label="anchor" href="#user-defined-shapefile"></a>
</h3>
<p>You can load an <code>sf</code> shapefile with your area of interest and fetch apparent fishing effort for this area using <code>region_source = "USER_SHAPEFILE"</code> and <code>region = [YOUR_SHAPE]</code>. We added a sample shapefile inside <code>gfwr</code> to show how <code>"USER_SHAPEFILE"</code> works:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"test_shape"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">test_shape</span></span>
<span><span class="co">#&gt; Simple feature collection with 1 feature and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 56.74815 ymin: 0 xmax: 70 ymax: 21.79799</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt;                         geometry</span></span>
<span><span class="co">#&gt; 1 MULTIPOLYGON (((70 15.20471...</span></span>
<span></span>
<span><span class="fu"><a href="reference/get_raster.html">get_raster</a></span><span class="op">(</span></span>
<span>  spatial_resolution <span class="op">=</span> <span class="st">"LOW"</span>,</span>
<span>  temporal_resolution <span class="op">=</span> <span class="st">"YEARLY"</span>,</span>
<span>  group_by <span class="op">=</span> <span class="st">"FLAG"</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2021-02-01"</span>,</span>
<span>  region_source <span class="op">=</span> <span class="st">"USER_SHAPEFILE"</span>,</span>
<span>  region <span class="op">=</span> <span class="va">test_shape</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2,686 × 6</span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  15.1  60.4         2021 CHN              2                    15.6 </span></span>
<span><span class="co">#&gt;  2  15.2  61.4         2021 CHN              3                    13.3 </span></span>
<span><span class="co">#&gt;  3  15.7  63.7         2021 CHN              2                    14.6 </span></span>
<span><span class="co">#&gt;  4  15.6  62.7         2021 CHN              1                    11.7 </span></span>
<span><span class="co">#&gt;  5   4.6  65.7         2021 TWN              1                     1.82</span></span>
<span><span class="co">#&gt;  6   5.8  67.2         2021 TWN              1                    10.2 </span></span>
<span><span class="co">#&gt;  7  15.4  60.6         2021 CHN              1                     7.81</span></span>
<span><span class="co">#&gt;  8  12.5  62.2         2021 CHN              1                     5.78</span></span>
<span><span class="co">#&gt;  9   6    68.8         2021 &lt;NA&gt;             1                     5.46</span></span>
<span><span class="co">#&gt; 10   3.5  65.5         2021 LKA              1                     3.98</span></span>
<span><span class="co">#&gt; # ℹ 2,676 more rows</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="apparent-fishing-effort-in-preloaded-eez-rfmos-and-mpas">Apparent fishing effort in preloaded EEZ, RFMOs and MPAs<a class="anchor" aria-label="anchor" href="#apparent-fishing-effort-in-preloaded-eez-rfmos-and-mpas"></a>
</h3>
<div class="section level4">
<h4 id="eez">EEZ<a class="anchor" aria-label="anchor" href="#eez"></a>
</h4>
<p>If you want raster data from a particular EEZ, you can use the <code><a href="reference/get_region_id.html">get_region_id()</a></code> function to get the EEZ id, and enter that code in the <code>region_name</code> argument of <code><a href="reference/get_raster.html">get_raster()</a></code> instead of the region shapefile (with <code>region_source = "EEZ"</code>):</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># use EEZ function to get EEZ code of Cote d'Ivoire</span></span>
<span><span class="va">code_eez</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">"CIV"</span>, region_source <span class="op">=</span> <span class="st">"EEZ"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">"LOW"</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">"YEARLY"</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">"FLAG"</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2021-10-01"</span>,</span>
<span>           region <span class="op">=</span> <span class="va">code_eez</span><span class="op">$</span><span class="va">id</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">"EEZ"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 595 × 6</span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1   4.5  -3.8         2021 PAN              1                     2.24</span></span>
<span><span class="co">#&gt;  2   2.1  -6.4         2021 BLZ              1                     3.98</span></span>
<span><span class="co">#&gt;  3   4.5  -6.7         2021 CHN              1                    35.4 </span></span>
<span><span class="co">#&gt;  4   3.3  -6.6         2021 BLZ              1                     4.05</span></span>
<span><span class="co">#&gt;  5   1.4  -6.8         2021 BLZ              1                     3.27</span></span>
<span><span class="co">#&gt;  6   4.7  -5.8         2021 CHN              1                     3.62</span></span>
<span><span class="co">#&gt;  7   4.4  -3.7         2021 BLZ              1                     0.72</span></span>
<span><span class="co">#&gt;  8   1.7  -5.6         2021 BLZ              1                     0.39</span></span>
<span><span class="co">#&gt;  9   4    -3.6         2021 BES              1                     2.99</span></span>
<span><span class="co">#&gt; 10   3.1  -4           2021 FRA              1                     5.1 </span></span>
<span><span class="co">#&gt; # ℹ 585 more rows</span></span></code></pre></div>
<p>You could search for just one word in the name of the EEZ and then decide which one you want:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fu"><a href="reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">"France"</span>, region_source <span class="op">=</span> <span class="st">"EEZ"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span><span class="co">#&gt;   iso3  label                                id GEONAME                 POL_TYPE</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;                             &lt;dbl&gt; &lt;chr&gt;                   &lt;chr&gt;   </span></span>
<span><span class="co">#&gt; 1 &lt;NA&gt;  Joint regime area: Spain / France 48966 Joint regime area: Spa… Joint r…</span></span>
<span><span class="co">#&gt; 2 &lt;NA&gt;  Joint regime area: France / Italy 48976 Joint regime area: Fra… Joint r…</span></span>
<span><span class="co">#&gt; 3 FRA   France                             5677 French Exclusive Econo… 200NM</span></span></code></pre></div>
<p>From the results above, let’s say we’re interested in the French Exclusive Economic Zone, <code>5677</code></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">"LOW"</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">"YEARLY"</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">"FLAG"</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2021-10-01"</span>,</span>
<span>           region <span class="op">=</span> <span class="fl">5677</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">"EEZ"</span></span>
<span>           <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 5,618 × 6</span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  45.2  -3           2021 FRA             13                   239.  </span></span>
<span><span class="co">#&gt;  2  45.1  -3.3         2021 ESP             21                    62.2 </span></span>
<span><span class="co">#&gt;  3  41.3   8.9         2021 ITA              1                     2.16</span></span>
<span><span class="co">#&gt;  4  43.4   4.5         2021 FRA             12                    86.4 </span></span>
<span><span class="co">#&gt;  5  44.4  -1.6         2021 FRA              4                    61.7 </span></span>
<span><span class="co">#&gt;  6  46.2  -3.8         2021 FRA             11                    76.7 </span></span>
<span><span class="co">#&gt;  7  46.1  -3.5         2021 ESP              5                    14.2 </span></span>
<span><span class="co">#&gt;  8  49.9  -1.2         2021 FRA              9                    82.5 </span></span>
<span><span class="co">#&gt;  9  43.3   4.4         2021 FRA             20                   342.  </span></span>
<span><span class="co">#&gt; 10  50     0.2         2021 GBR              3                   165.  </span></span>
<span><span class="co">#&gt; # ℹ 5,608 more rows</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="marine-protected-areas-mpas">Marine Protected Areas (MPAs)<a class="anchor" aria-label="anchor" href="#marine-protected-areas-mpas"></a>
</h4>
<p>A similar approach can be used to search for a specific Marine Protected Area, in this case the Phoenix Island Protected Area (PIPA)</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># use region id function to get MPA code of Phoenix Island Protected Area</span></span>
<span><span class="va">code_mpa</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">"Phoenix"</span>,</span>
<span>                          region_source <span class="op">=</span> <span class="st">"MPA"</span><span class="op">)</span></span>
<span><span class="va">code_mpa</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;   id        label                                                               </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;                                                               </span></span>
<span><span class="co">#&gt; 1 309888    Phoenix Islands Protected Area - Protected Area                     </span></span>
<span><span class="co">#&gt; 2 555512002 Phoenix Islands Protected Area - World Heritage Site (natural or mi…</span></span>
<span><span class="fu"><a href="reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">"LOW"</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">"YEARLY"</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">"FLAG"</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2015-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2015-06-01"</span>,</span>
<span>           region <span class="op">=</span> <span class="va">code_mpa</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">"MPA"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 38 × 6</span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  -3.6 -176.         2015 KOR              1                     1.98</span></span>
<span><span class="co">#&gt;  2  -2.8 -176.         2015 KOR              1                    10.4 </span></span>
<span><span class="co">#&gt;  3  -3.5 -176.         2015 KOR              1                     3.11</span></span>
<span><span class="co">#&gt;  4  -1   -170.         2015 KOR              1                     2.39</span></span>
<span><span class="co">#&gt;  5  -4.1 -176.         2015 KOR              1                     2.67</span></span>
<span><span class="co">#&gt;  6  -2.9 -176.         2015 FSM              1                     2.77</span></span>
<span><span class="co">#&gt;  7  -3   -176.         2015 FSM              1                     2.16</span></span>
<span><span class="co">#&gt;  8  -2.6 -176.         2015 KOR              1                    13.9 </span></span>
<span><span class="co">#&gt;  9  -3.6 -176.         2015 KIR              1                     6.07</span></span>
<span><span class="co">#&gt; 10  -2.3 -176.         2015 TWN              1                    17.3 </span></span>
<span><span class="co">#&gt; # ℹ 28 more rows</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="regional-fisheries-management-organizations-rfmos">Regional Fisheries Management Organizations (RFMOs)<a class="anchor" aria-label="anchor" href="#regional-fisheries-management-organizations-rfmos"></a>
</h4>
<p>It is also possible to filter rasters to regional fisheries management organizations (RFMO) like <code>"ICCAT"</code>, <code>"IATTC"</code>, <code>"IOTC"</code>, <code>"CCSBT"</code> and <code>"WCPFC"</code>.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">"LOW"</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">"DAILY"</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">"FLAG"</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2021-01-04"</span>,</span>
<span>           region <span class="op">=</span> <span class="st">"ICCAT"</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">"RFMO"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 16,878 × 6</span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;       &lt;chr&gt;        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  44.5 -57.1 2021-01-02   CAN              1                     0.43</span></span>
<span><span class="co">#&gt;  2  14.3 -17.2 2021-01-02   SEN              3                     6   </span></span>
<span><span class="co">#&gt;  3 -30     2.5 2021-01-01   SEN              1                     0.57</span></span>
<span><span class="co">#&gt;  4  19.8 -17.2 2021-01-01   FRA              1                     1.81</span></span>
<span><span class="co">#&gt;  5  57.8  10.4 2021-01-03   DNK              6                     5.91</span></span>
<span><span class="co">#&gt;  6  59.3  -3.6 2021-01-02   GBR              1                     0.34</span></span>
<span><span class="co">#&gt;  7   8.6 -26.9 2021-01-01   JPN              1                     1.96</span></span>
<span><span class="co">#&gt;  8  50.1  -4.5 2021-01-02   GBR              3                     4.81</span></span>
<span><span class="co">#&gt;  9  55.5   8.2 2021-01-03   DNK              4                     7.09</span></span>
<span><span class="co">#&gt; 10  16.5 -18.1 2021-01-01   JPN              1                     0.53</span></span>
<span><span class="co">#&gt; # ℹ 16,868 more rows</span></span></code></pre></div>
<blockquote>
<p><em>Note</em>: For a complete list of MPAs, RFMOs and EEZ, check the function <code><a href="reference/get_regions.html">get_regions()</a></code></p>
</blockquote>
</div>
</div>
<div class="section level3">
<h3 id="when-your-api-request-times-out">When your API request times out<a class="anchor" aria-label="anchor" href="#when-your-api-request-times-out"></a>
</h3>
<p>For API performance reasons, the <code><a href="reference/get_raster.html">get_raster()</a></code> function restricts individual queries to a single year of data. However, even with this restriction, it is possible for API request to time out before it completes. When this occurs, the initial <code><a href="reference/get_raster.html">get_raster()</a></code> call will return an <code>HTTP 524 error</code>, and subsequent API requests using any <code>gfwr</code> <code>get_</code> function will return an <code>HTTP 429 error</code> until the original request completes:</p>
<blockquote>
<p>Error in <code><a href="https://httr2.r-lib.org/reference/req_perform.html" class="external-link">httr2::req_perform()</a></code>: ! HTTP 429 Too Many Requests. • Your application token is not currently enabled to perform more than one concurrent report. If you need to generate more than one report concurrently, contact us at <a href="mailto:apis@globalfishingwatch.org" class="email">apis@globalfishingwatch.org</a></p>
</blockquote>
<p>Although no data was received, the request is still being processed by the APIs and will become available when it completes. To account for this, <code>gfwr</code> includes the <code><a href="reference/get_last_report.html">get_last_report()</a></code> function, which lets users request the results of their last API request with <code><a href="reference/get_raster.html">get_raster()</a></code>.</p>
<p>The <code><a href="reference/get_last_report.html">get_last_report()</a></code> function will tell you if the APIs are still processing your request and will download the results if the request has finished successfully. You will receive an error message if the request finished but resulted in an error or if it’s been &gt;30 minutes since the last report was generated using <code><a href="reference/get_raster.html">get_raster()</a></code>. For more information, see the <a href="https://globalfishingwatch.org/our-apis/documentation#get-last-report-generated" class="external-link">Get last report generated endpoint</a> documentation on the Global Fishing Watch API page.</p>
</div>
</div>
<div class="section level2">
<h2 id="reverse-region-id-search">Reverse region id search<a class="anchor" aria-label="anchor" href="#reverse-region-id-search"></a>
</h2>
<p>The <code><a href="reference/get_region_id.html">get_region_id()</a></code> function also works in reverse. If a region id is passed as a <code>numeric</code> to the function as the <code>region_name</code>, the corresponding region label or iso3 code can be returned. This is especially useful when events are returned with regions.</p>
<p>Using the same example with twenty trawlers fishing events, <code>fishing_events</code>, you can see the <code>eez</code> information is returned as the numeric code in the <code>"eez"</code> column.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fishing_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">"FISHING"</span>,</span>
<span>                            vessels <span class="op">=</span> <span class="va">twenty_usa_trawlers</span><span class="op">$</span><span class="va">vesselId</span>,</span>
<span>                            start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>                            end_date <span class="op">=</span> <span class="st">"2020-02-01"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># extract EEZ id code</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eez <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span></span>
<span>    <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">regions</span>, <span class="fu">purrr</span><span class="fu">::</span><span class="va"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span>, <span class="st">"eez"</span><span class="op">)</span>,</span>
<span>               <span class="va">paste0</span>, collapse <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">eez</span>, <span class="va">eventId</span>, <span class="va">eventType</span>, <span class="va">start</span>, <span class="va">end</span>, <span class="va">lat</span>, <span class="va">lon</span><span class="op">)</span> </span>
<span><span class="co">#&gt; [1] "Downloading 63 events from GFW"</span></span>
<span></span>
<span><span class="va">fishing_events</span></span>
<span><span class="co">#&gt; # A tibble: 63 × 7</span></span>
<span><span class="co">#&gt;    eez   eventId  eventType start               end                   lat    lon</span></span>
<span><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;dttm&gt;              &lt;dttm&gt;              &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 8456  0a79fe4… fishing   2020-01-05 03:57:26 2020-01-05 05:24:51  44.4 -124. </span></span>
<span><span class="co">#&gt;  2 8456  7812ab3… fishing   2020-01-22 03:07:24 2020-01-23 03:57:57  38.0  -73.9</span></span>
<span><span class="co">#&gt;  3 8456  0b0e500… fishing   2020-01-25 12:32:16 2020-01-25 13:32:16  39.9  -73.0</span></span>
<span><span class="co">#&gt;  4 8456  cf7977e… fishing   2020-01-18 08:32:40 2020-01-19 20:25:48  41.4  -69.3</span></span>
<span><span class="co">#&gt;  5 8456  c5409b5… fishing   2020-01-13 15:19:52 2020-01-13 17:47:54  41.5  -69.3</span></span>
<span><span class="co">#&gt;  6 8456  6640019… fishing   2020-01-14 04:56:04 2020-01-14 08:13:47  41.4  -68.7</span></span>
<span><span class="co">#&gt;  7 8456  ea4db5b… fishing   2020-01-13 20:43:47 2020-01-14 04:08:49  41.4  -68.7</span></span>
<span><span class="co">#&gt;  8 8456  ce3b328… fishing   2020-01-26 14:54:28 2020-01-27 10:03:45  39.6  -72.8</span></span>
<span><span class="co">#&gt;  9 8456  6937c9b… fishing   2020-01-25 13:58:44 2020-01-26 13:47:48  39.8  -72.8</span></span>
<span><span class="co">#&gt; 10 8456  ea857a1… fishing   2020-01-31 05:25:15 2020-01-31 06:43:40  42.8 -125. </span></span>
<span><span class="co">#&gt; # ℹ 53 more rows</span></span></code></pre></div>
<p>We can apply <code><a href="reference/get_region_id.html">get_region_id()</a></code> to the numeric vector to extract the labels:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fishing_events</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>eez_name <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_df</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">fishing_events</span><span class="op">$</span><span class="va">eez</span><span class="op">)</span>,</span>
<span>                                  <span class="op">~</span><span class="fu"><a href="reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="va">.x</span>,</span>
<span>                                                 region_source <span class="op">=</span> <span class="st">"EEZ"</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">label</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">eez</span>, <span class="va">eez_name</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 63 × 8</span></span>
<span><span class="co">#&gt;    eez   eez_name      eventId eventType start               end                </span></span>
<span><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;     &lt;dttm&gt;              &lt;dttm&gt;             </span></span>
<span><span class="co">#&gt;  1 8456  United States 0a79fe… fishing   2020-01-05 03:57:26 2020-01-05 05:24:51</span></span>
<span><span class="co">#&gt;  2 8456  United States 7812ab… fishing   2020-01-22 03:07:24 2020-01-23 03:57:57</span></span>
<span><span class="co">#&gt;  3 8456  United States 0b0e50… fishing   2020-01-25 12:32:16 2020-01-25 13:32:16</span></span>
<span><span class="co">#&gt;  4 8456  United States cf7977… fishing   2020-01-18 08:32:40 2020-01-19 20:25:48</span></span>
<span><span class="co">#&gt;  5 8456  United States c5409b… fishing   2020-01-13 15:19:52 2020-01-13 17:47:54</span></span>
<span><span class="co">#&gt;  6 8456  United States 664001… fishing   2020-01-14 04:56:04 2020-01-14 08:13:47</span></span>
<span><span class="co">#&gt;  7 8456  United States ea4db5… fishing   2020-01-13 20:43:47 2020-01-14 04:08:49</span></span>
<span><span class="co">#&gt;  8 8456  United States ce3b32… fishing   2020-01-26 14:54:28 2020-01-27 10:03:45</span></span>
<span><span class="co">#&gt;  9 8456  United States 6937c9… fishing   2020-01-25 13:58:44 2020-01-26 13:47:48</span></span>
<span><span class="co">#&gt; 10 8456  United States ea857a… fishing   2020-01-31 05:25:15 2020-01-31 06:43:40</span></span>
<span><span class="co">#&gt; # ℹ 53 more rows</span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: lat &lt;dbl&gt;, lon &lt;dbl&gt;</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/GlobalFishingWatch/gfwr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/GlobalFishingWatch/gfwr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing gfwr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Tyler Clavelle <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-2155-2459" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Rocío Joo <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-0319-4210" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Nate Miller <br><small class="roles"> Author </small>   </li>
<li>Andrea Sánchez-Tapia <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3521-4338" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://zenodo.org/badge/latestdoi/450635054" class="external-link"><img src="https://zenodo.org/badge/450635054.svg" alt="DOI"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://opensource.org/licenses/Apache-2.0" class="external-link"><img src="https://img.shields.io/badge/license-Apache%202-blue" alt="Licence"></a></li>
<li><a href="https://github.com/r-universe/globalfishingwatch/actions/workflows/sync.yml" class="external-link"><img src="https://globalfishingwatch.r-universe.dev/badges/:registry" alt=":registry status badge"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tyler Clavelle, Rocío Joo, Nate Miller, Andrea Sánchez-Tapia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>



  <!-- inserted at the end of the body -->

  </body>
</html>
