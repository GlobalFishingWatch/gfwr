<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Access data from Global Fishing Watch APIs • gfwr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Access data from Global Fishing Watch APIs">
<meta property="og:description" content="This package connects to several Global Fishing Watch APIs to get vessel and events information in an R-friendly format.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WXTMN69');</script><!-- End Google Tag Manager -->
</head>
<body data-spy="scroll" data-target="#toc">
    <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXTMN69" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">gfwr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/gfwr.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/identity.html">Using `get_vessel_info()`: the basics of vessel identity in `gfwr`</a>
    </li>
    <li>
      <a href="articles/making-maps.html">Making maps with `gfwr`</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/GlobalFishingWatch/gfwr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="gfwr-access-data-from-global-fishing-watch-apis-">
<code>gfwr</code>: Access data from Global Fishing Watch APIs <img src="reference/figures/gfwr_hex_rgb.png" align="right" width="200px"><a class="anchor" aria-label="anchor" href="#gfwr-access-data-from-global-fishing-watch-apis-"></a>
</h1></div>
<!-- badges: start -->

<blockquote>
<p><strong>Important</strong><br>
This version of <code>gfwr</code> gives access to Global Fishing Watch API <a href="https://globalfishingwatch.org/our-apis/documentation#version-3-api" class="external-link">version 3</a>. Starting April 30th, 2024, this is the official API version. To install the previous version that communicated with API <a href="https://globalfishingwatch.org/our-apis/documentation#version-2-api" class="external-link">version 2</a>, please refer to branch <code>APIv2</code> in this repository. <code>remotes::install_github("GlobalFishingWatch/gfwr", ref = "APIv2")</code></p>
</blockquote>
<p>The <code>gfwr</code> R package is a simple wrapper for the Global Fishing Watch (GFW) <a href="https://globalfishingwatch.org/our-apis/documentation#introduction" class="external-link">APIs</a>. It provides convenient functions to freely pull GFW data directly into R in tidy formats.</p>
<p>The package currently works with the following APIs:</p>
<ul>
<li>
<a href="https://globalfishingwatch.org/our-apis/documentation#vessels-api" class="external-link">Vessels API</a>: vessel search and identity based on AIS self reported data and public registry information</li>
<li>
<a href="https://globalfishingwatch.org/our-apis/documentation#events-api" class="external-link">Events API</a>: encounters, loitering, port visits, AIS-disabling events and fishing events based on AIS data</li>
<li>
<a href="https://globalfishingwatch.org/our-apis/documentation#map-visualization-4wings-api" class="external-link">Gridded fishing effort (4Wings API)</a>: apparent fishing effort based on AIS data</li>
</ul>
<blockquote>
<p><strong>Note</strong>: See the <a href="https://globalfishingwatch.org/our-apis/documentation#reference-data" class="external-link">Terms of Use</a> page for GFW APIs for information on our API licenses and rate limits.</p>
</blockquote>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the most recent version of <code>gfwr</code> using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check/install remotes</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"GlobalFishingWatch/gfwr"</span><span class="op">)</span></span></code></pre></div>
<p><code>gfwr</code> is also in the rOpenSci <a href="https://globalfishingwatch.r-universe.dev/gfwr#" class="external-link">R-universe</a>, and can be installed like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"gfwr"</span>, </span>
<span>                 repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://globalfishingwatch.r-universe.dev"</span>,</span>
<span>                           <span class="st">"https://cran.r-project.org"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Once everything is installed, you can load and use <code>gfwr</code> in your scripts with <code><a href="https://github.com/GlobalFishingWatch/gfwr" class="external-link">library(gfwr)</a></code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/GlobalFishingWatch/gfwr" class="external-link">gfwr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="authorization">Authorization<a class="anchor" aria-label="anchor" href="#authorization"></a>
</h2>
<p>The use of <code>gfwr</code> requires a GFW API token, which users can request from the <a href="https://globalfishingwatch.org/our-apis/tokens" class="external-link">GFW API Portal</a>. Save this token to your <code>.Renviron</code> file using <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code> and adding a variable named <code>GFW_TOKEN</code> to the file (<code>GFW_TOKEN="PASTE_YOUR_TOKEN_HERE"</code>). Save the <code>.Renviron</code> file and restart the R session to make the edit effective.</p>
<p>Then use the <code><a href="reference/gfw_auth.html">gfw_auth()</a></code> helper function to inform the key on your function calls. You can use <code><a href="reference/gfw_auth.html">gfw_auth()</a></code> directly or save the information to an object in your R workspace every time and pass it to subsequent <code>gfwr</code> functions.</p>
<p>So you can do:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gfw_auth.html">gfw_auth</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>or this</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GFW_TOKEN"</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p><strong>Note</strong>: <code>gfwr</code> functions are set to use <code>key = gfw_auth()</code> by default.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="vessels-api">Vessels API<a class="anchor" aria-label="anchor" href="#vessels-api"></a>
</h2>
<p>The <code><a href="reference/get_vessel_info.html">get_vessel_info()</a></code> function allows you to get vessel identity details from the <a href="https://globalfishingwatch.org/our-apis/documentation#introduction-vessels-api" class="external-link">GFW Vessels API</a>.</p>
<p>There are two search types: <code>search</code>, and <code>id</code>.</p>
<ul>
<li>
<code>search</code> is performed by using parameters <code>query</code> for basic searches and <code>where</code> for advanced searchers using SQL expressions
<ul>
<li>
<code>query</code> takes a single identifier that can be the MMSI, IMO, callsign, or shipname as input and identifies all vessels that match.</li>
<li>
<code>where</code> search allows for the use of complex search with logical clauses (AND, OR) and fuzzy matching with terms such as LIKE, using SQL syntax (see examples in the function)</li>
<li>
<code>includes</code> adds information from public registries. Options are “MATCH_CRITERIA”, “OWNERSHIP” and “AUTHORIZATIONS”</li>
</ul>
</li>
</ul>
<div class="section level3">
<h3 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h3>
<p>To get information of a vessel using its MMSI, IMO number, callsign or name, the search can be done directly using the number or the string. For example, to look for a vessel with <code>MMSI = 224224000</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>query <span class="op">=</span> <span class="fl">224224000</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">"search"</span>,</span>
<span>                key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   dataset                                </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                                  </span></span>
<span><span class="co">#&gt; 1 public-global-vessel-identity:v20231026</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1                        1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 15</span></span>
<span><span class="co">#&gt;   id                    sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                 &lt;list&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 e0c9823749264a129d6b… &lt;chr [6]&gt;  2242… ESP   AGURTZA… AGURTZAB… EBSJ     8733…</span></span>
<span><span class="co">#&gt; # ℹ 7 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   transmissionDateTo &lt;chr&gt;, geartypes &lt;list&gt;, lengthM &lt;dbl&gt;, tonnageGt &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   vesselInfoReference &lt;chr&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 6</span></span>
<span><span class="co">#&gt;   name             flag  ssvid     sourceCode dateFrom             dateTo       </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;     &lt;list&gt;     &lt;chr&gt;                &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1 JEALSA RIANXEIRA ESP   306118000 &lt;chr [1]&gt;  2019-10-15T12:47:53Z 2023-09-15T1…</span></span>
<span><span class="co">#&gt; 2 JEALSA RIANXEIRA ESP   224224000 &lt;chr [1]&gt;  2015-10-13T16:06:33Z 2019-10-15T0…</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 4</span></span>
<span><span class="co">#&gt;   dateFrom             dateTo               ssvid     sourceCode</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                &lt;chr&gt;                &lt;chr&gt;     &lt;list&gt;    </span></span>
<span><span class="co">#&gt; 1 2019-10-15T00:00:00Z 2023-02-01T00:00:00Z 306118000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 2 2018-01-09T00:00:00Z 2019-10-24T00:00:00Z 224224000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 3 2012-01-01T00:00:00Z 2019-01-01T00:00:00Z 224224000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 4 2014-03-11T00:00:00Z 2016-07-28T00:00:00Z 224224000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 9</span></span>
<span><span class="co">#&gt;   vesselId  geartypes_geartype_n…¹ geartypes_geartype_s…² geartypes_geartype_y…³</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;                  &lt;chr&gt;                                   &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 6632c9eb… PURSE_SEINE_SUPPORT    GFW_VESSEL_LIST                          2019</span></span>
<span><span class="co">#&gt; 2 3c99c326… PURSE_SEINE_SUPPORT    GFW_VESSEL_LIST                          2015</span></span>
<span><span class="co">#&gt; # ℹ abbreviated names: ¹​geartypes_geartype_name, ²​geartypes_geartype_source,</span></span>
<span><span class="co">#&gt; #   ³​geartypes_geartype_yearFrom</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: geartypes_geartype_yearTo &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_shiptype_name &lt;chr&gt;, shiptypes_shiptype_source &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_shiptype_yearFrom &lt;int&gt;, shiptypes_shiptype_yearTo &lt;int&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 13</span></span>
<span><span class="co">#&gt;   vesselId         ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 6632c9eb8-8009-… 3061… AGURTZA… AGURTZAB… BES   PJBL     8733…        21772378</span></span>
<span><span class="co">#&gt; 2 3c99c326d-dd2e-… 2242… AGURTZA… AGURTZAB… ESP   EBSJ     8733…         1887249</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></code></pre></div>
<p>To do more specific searches (<code>imo = '8300949'</code>), combine different fields (<code>imo = '8300949' AND ssvid = '214182732'</code>) and do fuzzy matching (<code>"shipname LIKE '%GABU REEFE%' OR imo = '8300949'"</code>), use parameter <code>where</code> instead of <code>query</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>where <span class="op">=</span> <span class="st">"shipname LIKE '%GABU REEFE%' OR imo = '8300949'"</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">"search"</span>,</span>
<span>                key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   dataset                                </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                                  </span></span>
<span><span class="co">#&gt; 1 public-global-vessel-identity:v20231026</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1                        1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 15</span></span>
<span><span class="co">#&gt;   id                    sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                 &lt;list&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 b16ca93ea690fc725e92… &lt;chr [2]&gt;  6135… CMR   GABU RE… GABUREEF… TJMC996  8300…</span></span>
<span><span class="co">#&gt; # ℹ 7 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   transmissionDateTo &lt;chr&gt;, geartypes &lt;list&gt;, lengthM &lt;dbl&gt;, tonnageGt &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   vesselInfoReference &lt;chr&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 6</span></span>
<span><span class="co">#&gt;   name                   flag  ssvid     sourceCode dateFrom             dateTo </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                  &lt;chr&gt; &lt;chr&gt;     &lt;list&gt;     &lt;chr&gt;                &lt;chr&gt;  </span></span>
<span><span class="co">#&gt; 1 FISHING CARGO SERVICES PAN   613590000 &lt;chr [1]&gt;  2022-01-24T09:16:50Z 2024-0…</span></span>
<span><span class="co">#&gt; 2 FISHING CARGO SERVICES PAN   214182732 &lt;chr [1]&gt;  2019-02-23T11:06:32Z 2022-0…</span></span>
<span><span class="co">#&gt; 3 FISHING CARGO SERVICES PAN   616852000 &lt;chr [1]&gt;  2014-01-04T11:52:41Z 2019-0…</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; # A tibble: 0 × 1</span></span>
<span><span class="co">#&gt; # ℹ 1 variable: &lt;list&gt; &lt;list&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 9</span></span>
<span><span class="co">#&gt;   vesselId  geartypes_geartype_n…¹ geartypes_geartype_s…² geartypes_geartype_y…³</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;                  &lt;chr&gt;                                   &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 1da8dbc2… CARRIER                GFW_VESSEL_LIST                          2022</span></span>
<span><span class="co">#&gt; 2 58cf536b… CARRIER                GFW_VESSEL_LIST                          2012</span></span>
<span><span class="co">#&gt; 3 0b7047cb… CARRIER                GFW_VESSEL_LIST                          2019</span></span>
<span><span class="co">#&gt; # ℹ abbreviated names: ¹​geartypes_geartype_name, ²​geartypes_geartype_source,</span></span>
<span><span class="co">#&gt; #   ³​geartypes_geartype_yearFrom</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: geartypes_geartype_yearTo &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_shiptype_name &lt;chr&gt;, shiptypes_shiptype_source &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_shiptype_yearFrom &lt;int&gt;, shiptypes_shiptype_yearTo &lt;int&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 13</span></span>
<span><span class="co">#&gt;   vesselId         ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 1da8dbc23-3c48-… 6135… GABU RE… GABUREEF… CMR   TJMC996  8300…        71748394</span></span>
<span><span class="co">#&gt; 2 0b7047cb5-58c8-… 2141… GABU RE… GABUREEF… MDA   ER2732   8300…        70035084</span></span>
<span><span class="co">#&gt; 3 58cf536b1-1fca-… 6168… GABU RE… GABUREEF… COM   D6FJ2    8300…        32121624</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></code></pre></div>
<ul>
<li>The <code>id</code> search allows the user to specify a vector of <code>vesselId</code>s</li>
</ul>
<blockquote>
<p><strong>Note</strong>: <code>vesselId</code> is an internal ID generated by GFW to connect data accross APIs and involves a combination of vessel and tracking data information. It can be retrieved using <code><a href="reference/get_vessel_info.html">get_vessel_info()</a></code> and fetching the vector of responses inside <code>$selfReportedInfo$vesselId</code>. See the identity vignette for more information.</p>
</blockquote>
<p>To search by <code>vesselId</code>, use parameter <code>ids</code> and specify <code>search_type = "id"</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="st">"8c7304226-6c71-edbe-0b63-c246734b3c01"</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   dataset                                </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                                  </span></span>
<span><span class="co">#&gt; 1 public-global-vessel-identity:v20231026</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1                        2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 15</span></span>
<span><span class="co">#&gt;   id                    sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                 &lt;list&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 a8d00ce54b37add7f85a… &lt;chr [6]&gt;  2106… CYP   FRIO FO… FRIOFORW… 5BWC3    9076…</span></span>
<span><span class="co">#&gt; 2 a8d00ce54b37add7f85a… &lt;chr [2]&gt;  2733… RUS   FRIO FO… FRIOFORW… UCRZ     9076…</span></span>
<span><span class="co">#&gt; # ℹ 7 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   transmissionDateTo &lt;chr&gt;, geartypes &lt;list&gt;, lengthM &lt;int&gt;, tonnageGt &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   vesselInfoReference &lt;chr&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 6</span></span>
<span><span class="co">#&gt;   name    flag  ssvid     sourceCode dateFrom             dateTo              </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;     &lt;list&gt;     &lt;chr&gt;                &lt;chr&gt;               </span></span>
<span><span class="co">#&gt; 1 COLINER CYP   210631000 &lt;chr [1]&gt;  2014-01-01T00:16:58Z 2024-04-30T23:41:06Z</span></span>
<span><span class="co">#&gt; 2 COLINER CYP   273379740 &lt;chr [1]&gt;  2015-02-27T10:59:43Z 2018-03-21T07:13:09Z</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span><span class="co">#&gt;   dateFrom             dateTo               ssvid     sourceCode</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                &lt;chr&gt;                &lt;chr&gt;     &lt;list&gt;    </span></span>
<span><span class="co">#&gt; 1 2022-12-19T00:00:00Z 2024-05-01T00:00:00Z 210631000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 2 2020-01-01T00:00:00Z 2024-05-01T00:00:00Z 210631000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 9</span></span>
<span><span class="co">#&gt;   vesselId  geartypes_geartype_n…¹ geartypes_geartype_s…² geartypes_geartype_y…³</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;                  &lt;chr&gt;                                   &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 da1cd7e1… CARRIER                GFW_VESSEL_LIST                          2015</span></span>
<span><span class="co">#&gt; 2 8c730422… CARRIER                GFW_VESSEL_LIST                          2013</span></span>
<span><span class="co">#&gt; # ℹ abbreviated names: ¹​geartypes_geartype_name, ²​geartypes_geartype_source,</span></span>
<span><span class="co">#&gt; #   ³​geartypes_geartype_yearFrom</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: geartypes_geartype_yearTo &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_shiptype_name &lt;chr&gt;, shiptypes_shiptype_source &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_shiptype_yearFrom &lt;int&gt;, shiptypes_shiptype_yearTo &lt;int&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 13</span></span>
<span><span class="co">#&gt;   vesselId         ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 8c7304226-6c71-… 2106… FRIO FO… FRIOFORW… CYP   5BWC3    9076…       263134677</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></code></pre></div>
<p>To specify more than one <code>vesselId</code>, you can submit a vector:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"8c7304226-6c71-edbe-0b63-c246734b3c01"</span>,</span>
<span>                        <span class="st">"6583c51e3-3626-5638-866a-f47c3bc7ef7c"</span>,</span>
<span>                        <span class="st">"71e7da672-2451-17da-b239-857831602eca"</span><span class="op">)</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">'id'</span>,</span>
<span>                key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 1</span></span>
<span><span class="co">#&gt;   dataset                                </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                                  </span></span>
<span><span class="co">#&gt; 1 public-global-vessel-identity:v20231026</span></span>
<span><span class="co">#&gt; 2 public-global-vessel-identity:v20231026</span></span>
<span><span class="co">#&gt; 3 public-global-vessel-identity:v20231026</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 1</span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1                        2</span></span>
<span><span class="co">#&gt; 2                        1</span></span>
<span><span class="co">#&gt; 3                        1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 15</span></span>
<span><span class="co">#&gt;   id                    sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                 &lt;list&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 a8d00ce54b37add7f85a… &lt;chr [6]&gt;  2106… CYP   FRIO FO… FRIOFORW… 5BWC3    9076…</span></span>
<span><span class="co">#&gt; 2 a8d00ce54b37add7f85a… &lt;chr [2]&gt;  2733… RUS   FRIO FO… FRIOFORW… UCRZ     9076…</span></span>
<span><span class="co">#&gt; 3 b82d02e5c2c11e5fe536… &lt;chr [5]&gt;  4417… KOR   ADRIA    ADRIA     DTBY3    8919…</span></span>
<span><span class="co">#&gt; 4 685862e0626f6234c844… &lt;chr [5]&gt;  5480… PHL   JOHNREY… JOHNREYN… DUQA7    8118…</span></span>
<span><span class="co">#&gt; # ℹ 7 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   transmissionDateTo &lt;chr&gt;, geartypes &lt;list&gt;, lengthM &lt;dbl&gt;, tonnageGt &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   vesselInfoReference &lt;chr&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 6</span></span>
<span><span class="co">#&gt;   name                          flag  ssvid     sourceCode dateFrom       dateTo</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                         &lt;chr&gt; &lt;chr&gt;     &lt;list&gt;     &lt;chr&gt;          &lt;chr&gt; </span></span>
<span><span class="co">#&gt; 1 COLINER                       CYP   210631000 &lt;chr [1]&gt;  2014-01-01T00… 2024-…</span></span>
<span><span class="co">#&gt; 2 COLINER                       CYP   273379740 &lt;chr [1]&gt;  2015-02-27T10… 2018-…</span></span>
<span><span class="co">#&gt; 3 DONGWON INDUSTRIES            KOR   441734000 &lt;chr [2]&gt;  2014-01-18T19… 2024-…</span></span>
<span><span class="co">#&gt; 4 TRANS PACIFIC JOURNEY FISHING PHL   548012100 &lt;chr [3]&gt;  2017-02-07T00… 2019-…</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span><span class="co">#&gt;   dateFrom             dateTo               ssvid     sourceCode</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                &lt;chr&gt;                &lt;chr&gt;     &lt;list&gt;    </span></span>
<span><span class="co">#&gt; 1 2022-12-19T00:00:00Z 2024-05-01T00:00:00Z 210631000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 2 2020-01-01T00:00:00Z 2024-05-01T00:00:00Z 210631000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 3 2013-09-20T00:00:00Z 2024-05-01T00:00:00Z 441734000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 4 2015-10-08T00:00:00Z 2020-07-21T00:00:00Z 441734000 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 5 2012-01-01T00:00:00Z 2024-05-01T00:00:00Z 548012100 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; 6 2012-01-01T00:00:00Z 2017-10-25T00:00:00Z 548012100 &lt;chr [1]&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 9</span></span>
<span><span class="co">#&gt;   vesselId  geartypes_geartype_n…¹ geartypes_geartype_s…² geartypes_geartype_y…³</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;                  &lt;chr&gt;                                   &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 da1cd7e1… CARRIER                GFW_VESSEL_LIST                          2015</span></span>
<span><span class="co">#&gt; 2 8c730422… CARRIER                GFW_VESSEL_LIST                          2013</span></span>
<span><span class="co">#&gt; 3 6583c51e… OTHER                  COMBINATION_OF_REGIST…                   2013</span></span>
<span><span class="co">#&gt; 4 6583c51e… OTHER                  COMBINATION_OF_REGIST…                   2013</span></span>
<span><span class="co">#&gt; 5 6583c51e… TUNA_PURSE_SEINES      COMBINATION_OF_REGIST…                   2014</span></span>
<span><span class="co">#&gt; 6 6583c51e… TUNA_PURSE_SEINES      COMBINATION_OF_REGIST…                   2014</span></span>
<span><span class="co">#&gt; 7 71e7da67… TUNA_PURSE_SEINES      COMBINATION_OF_REGIST…                   2017</span></span>
<span><span class="co">#&gt; 8 55889aef… TUNA_PURSE_SEINES      COMBINATION_OF_REGIST…                   2017</span></span>
<span><span class="co">#&gt; # ℹ abbreviated names: ¹​geartypes_geartype_name, ²​geartypes_geartype_source,</span></span>
<span><span class="co">#&gt; #   ³​geartypes_geartype_yearFrom</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: geartypes_geartype_yearTo &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_shiptype_name &lt;chr&gt;, shiptypes_shiptype_source &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   shiptypes_shiptype_yearFrom &lt;int&gt;, shiptypes_shiptype_yearTo &lt;int&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 13</span></span>
<span><span class="co">#&gt;   vesselId         ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 8c7304226-6c71-… 2106… FRIO FO… FRIOFORW… CYP   5BWC3    9076…       263134677</span></span>
<span><span class="co">#&gt; 2 6583c51e3-3626-… 4417… ADRIA    ADRIA     KOR   DTBY3    8919…         3742574</span></span>
<span><span class="co">#&gt; 3 71e7da672-2451-… 5480… JOHN RE… JOHNREYN… PHL   DUQA-7   8118…         1967237</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></code></pre></div>
<p>This is useful especially because a vessel can have different <code>vesselId</code>s in time. Check the function documentation for examples with the other function arguments and <a href="https://globalfishingwatch.github.io/gfwr/articles/identity" class="external-link">our dedicated vignette</a> for more information about vessel identity .</p>
</div>
</div>
<div class="section level2">
<h2 id="events-api">Events API<a class="anchor" aria-label="anchor" href="#events-api"></a>
</h2>
<p>The <code><a href="reference/get_event.html">get_event()</a></code> function allows you to get data on specific vessel activities from the <a href="https://globalfishingwatch.org/our-apis/documentation#events-api" class="external-link">GFW Events API</a>. Event types include apparent fishing events, potential transshipment events (two-vessel encounters and loitering by refrigerated carrier vessels), port visits, and AIS-disabling events (“gaps”). Find more information in our <a href="https://globalfishingwatch.org/our-apis/documentation#data-caveat" class="external-link">caveat documentation</a>.</p>
<div class="section level3">
<h3 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a>
</h3>
<p>The Events API uses <code>vesselId</code> as input, so you always need to use <code><a href="reference/get_vessel_info.html">get_vessel_info()</a></code> first to extract <code>vesselId</code> from <code>$selfReportedInfo</code> in the response.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vessel_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>query <span class="op">=</span> <span class="fl">224224000</span>, key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span></span>
<span><span class="va">id</span> <span class="op">&lt;-</span> <span class="va">vessel_info</span><span class="op">$</span><span class="va">selfReportedInfo</span><span class="op">$</span><span class="va">vesselId</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<p>To get a list of port visits for that vessel:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'PORT_VISIT'</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">id</span>,</span>
<span>          confidences <span class="op">=</span> <span class="fl">4</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 24 events from GFW"</span></span>
<span><span class="co">#&gt; # A tibble: 24 × 11</span></span>
<span><span class="co">#&gt;    start               end                 id    type    lat    lon regions     </span></span>
<span><span class="co">#&gt;    &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;list&gt;      </span></span>
<span><span class="co">#&gt;  1 2019-11-15 14:15:11 2019-11-19 07:49:20 bbee… port…  5.22  -4.00 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  2 2019-12-06 11:02:09 2019-12-11 10:20:04 bcd9… port…  5.22  -4.01 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  3 2020-01-11 11:18:49 2020-01-15 11:54:49 889b… port…  5.23  -4.01 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  4 2020-01-27 08:04:38 2020-02-23 10:18:02 abed… port… 16.9  -25.0  &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  5 2020-02-23 12:44:03 2020-02-24 10:35:02 672b… port… 16.9  -25.0  &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  6 2020-03-05 13:28:59 2020-04-05 15:03:18 f539… port…  5.26  -4.03 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  7 2020-04-19 06:16:46 2020-04-21 14:02:19 5ad5… port… 28.1  -15.4  &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  8 2020-05-05 06:52:54 2020-05-07 14:22:35 729d… port…  5.23  -4.00 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  9 2020-06-10 13:51:11 2020-06-13 13:51:28 8f14… port…  5.21  -4.05 &lt;named list&gt;</span></span>
<span><span class="co">#&gt; 10 2020-06-20 12:33:45 2020-06-20 19:43:10 a8f5… port… 14.7  -17.4  &lt;named list&gt;</span></span>
<span><span class="co">#&gt; # ℹ 14 more rows</span></span>
<span><span class="co">#&gt; # ℹ 4 more variables: boundingBox &lt;list&gt;, distances &lt;list&gt;, vessel &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   event_info &lt;list&gt;</span></span></code></pre></div>
<blockquote>
<p><em>Note</em>: Try narrowing your search using <code>start_date</code> and <code>end_date</code> if the request is too large and returns a time out error (524)</p>
</blockquote>
<p>We can also use more than one <code>vesselId</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'PORT_VISIT'</span>,</span>
<span>          vessels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'8c7304226-6c71-edbe-0b63-c246734b3c01'</span>, </span>
<span>                      <span class="st">'6583c51e3-3626-5638-866a-f47c3bc7ef7c'</span><span class="op">)</span>,</span>
<span>          confidences <span class="op">=</span> <span class="fl">4</span>,</span>
<span>          start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"2020-02-01"</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 3 events from GFW"</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 11</span></span>
<span><span class="co">#&gt;   start               end                 id      type    lat   lon regions     </span></span>
<span><span class="co">#&gt;   &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;      </span></span>
<span><span class="co">#&gt; 1 2019-12-19 23:05:31 2020-01-24 19:05:18 7cd1e3… port…  28.1 -15.4 &lt;named list&gt;</span></span>
<span><span class="co">#&gt; 2 2020-01-26 05:52:47 2020-01-29 14:39:33 c2f096… port…  20.8 -17.0 &lt;named list&gt;</span></span>
<span><span class="co">#&gt; 3 2020-01-31 02:20:08 2020-02-03 15:56:31 7c06e4… port…  28.1 -15.4 &lt;named list&gt;</span></span>
<span><span class="co">#&gt; # ℹ 4 more variables: boundingBox &lt;list&gt;, distances &lt;list&gt;, vessel &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   event_info &lt;list&gt;</span></span></code></pre></div>
<p>Or get encounters for all vessels in a given date range:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'ENCOUNTER'</span>,</span>
<span>          start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"2020-01-02"</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 248 events from GFW"</span></span>
<span><span class="co">#&gt; # A tibble: 248 × 11</span></span>
<span><span class="co">#&gt;    start               end                 id    type    lat    lon regions     </span></span>
<span><span class="co">#&gt;    &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;list&gt;      </span></span>
<span><span class="co">#&gt;  1 2019-12-17 14:10:00 2020-01-02 04:10:00 8c07… enco… 67.5    15.5 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  2 2019-12-17 14:10:00 2020-01-02 04:10:00 8c07… enco… 67.5    15.5 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  3 2019-12-26 00:20:00 2020-01-07 23:50:00 59d4… enco… -1.82 -113.  &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  4 2019-12-26 00:20:00 2020-01-07 23:50:00 59d4… enco… -1.82 -113.  &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  5 2019-12-26 14:10:00 2020-01-03 05:30:00 60c1… enco… -1.79 -113.  &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  6 2019-12-26 14:10:00 2020-01-03 05:30:00 60c1… enco… -1.79 -113.  &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  7 2019-12-27 09:10:00 2020-01-06 14:00:00 2159… enco…  9.50  -99.1 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  8 2019-12-27 09:10:00 2020-01-06 14:00:00 2159… enco…  9.50  -99.1 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  9 2019-12-30 02:20:00 2020-01-13 05:40:00 87de… enco… -1.84 -111.  &lt;named list&gt;</span></span>
<span><span class="co">#&gt; 10 2019-12-30 02:20:00 2020-01-13 05:40:00 87de… enco… -1.84 -111.  &lt;named list&gt;</span></span>
<span><span class="co">#&gt; # ℹ 238 more rows</span></span>
<span><span class="co">#&gt; # ℹ 4 more variables: boundingBox &lt;list&gt;, distances &lt;list&gt;, vessel &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   event_info &lt;list&gt;</span></span></code></pre></div>
<p>When a date range is provided to <code><a href="reference/get_event.html">get_event()</a></code> using both <code>start_date</code> and <code>end_date</code>, any event overlapping that range will be returned, including events that start prior to <code>start_date</code> or end after <code>end_date</code>. If just <code>start_date</code> or <code>end_date</code> are provided, results will include all events that end after <code>start_date</code> or begin prior to <code>end_date</code>, respectively.</p>
<blockquote>
<p><strong>Note</strong>:<br>
Because encounter events are events between two vessels, a single event will be represented twice in the data, once for each vessel. To capture this information and link the related data rows, the <code>id</code> field for encounter events includes an additional suffix (1 or 2) separated by a period. The <code>vessel</code> field will also contain different information specific to each vessel.</p>
</blockquote>
<p>As another example, let’s combine the Vessels and Events APIs to get fishing events for a list of 20 USA-flagged trawlers:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download the list of USA trawlers</span></span>
<span><span class="va">usa_trawlers</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span></span>
<span>  where <span class="op">=</span> <span class="st">"flag='USA' AND geartypes='TRAWLERS'"</span>,</span>
<span>  search_type <span class="op">=</span> <span class="st">"search"</span>,</span>
<span>  key <span class="op">=</span> <span class="va">key</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Pass the vector of vessel ids to Events API</span></span>
<span><span class="va">usa_trawler_ids</span> <span class="op">&lt;-</span> <span class="va">usa_trawlers</span><span class="op">$</span><span class="va">selfReportedInfo</span><span class="op">$</span><span class="va">vesselId</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<p><em>Note</em>: <code><a href="reference/get_event.html">get_event()</a></code> can receive up to 20 vessel ids at a time</p>
</blockquote>
<p>Now get the list of fishing events for these trawlers in January, 2020:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'FISHING'</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">usa_trawler_ids</span>,</span>
<span>          start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"2020-02-01"</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 34 events from GFW"</span></span>
<span><span class="co">#&gt; # A tibble: 34 × 11</span></span>
<span><span class="co">#&gt;    start               end                 id    type    lat    lon regions     </span></span>
<span><span class="co">#&gt;    &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;list&gt;      </span></span>
<span><span class="co">#&gt;  1 2020-01-05 04:58:45 2020-01-05 06:31:45 379d… fish…  43.7 -124.  &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  2 2020-01-07 05:10:47 2020-01-07 08:57:13 72d1… fish…  28.1  -93.9 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  3 2020-01-08 19:39:55 2020-01-08 22:43:54 94fd… fish…  43.8 -124.  &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  4 2020-01-09 12:30:54 2020-01-09 17:44:54 51c5… fish…  38.4  -73.5 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  5 2020-01-09 18:32:34 2020-01-09 19:20:15 2068… fish…  38.3  -73.6 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  6 2020-01-09 21:14:43 2020-01-10 10:16:36 c60e… fish…  38.1  -73.8 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  7 2020-01-10 12:35:22 2020-01-10 16:22:01 4f20… fish…  38.0  -73.9 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  8 2020-01-10 18:21:53 2020-01-12 03:13:04 6739… fish…  38.0  -73.9 &lt;named list&gt;</span></span>
<span><span class="co">#&gt;  9 2020-01-13 12:45:32 2020-01-13 15:38:38 46f8… fish…  38.0  -73.9 &lt;named list&gt;</span></span>
<span><span class="co">#&gt; 10 2020-01-13 13:20:55 2020-01-13 15:07:53 2333… fish…  43.7 -124.  &lt;named list&gt;</span></span>
<span><span class="co">#&gt; # ℹ 24 more rows</span></span>
<span><span class="co">#&gt; # ℹ 4 more variables: boundingBox &lt;list&gt;, distances &lt;list&gt;, vessel &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   event_info &lt;list&gt;</span></span></code></pre></div>
<p>When no events are available, the <code><a href="reference/get_event.html">get_event()</a></code> function returns nothing.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'FISHING'</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">usa_trawler_ids</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>          start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Your request returned zero results"</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="fishing-effort-api">Fishing effort API<a class="anchor" aria-label="anchor" href="#fishing-effort-api"></a>
</h2>
<p>The <code><a href="reference/get_raster.html">get_raster()</a></code> function gets a raster from the <a href="https://globalfishingwatch.org/our-apis/documentation#map-visualization-4wings-api" class="external-link">4Wings API</a> and converts the response to a data frame. In order to use it, you should specify:</p>
<ul>
<li>The spatial resolution, which can be <code>LOW</code> (0.1 degree) or <code>HIGH</code> (0.01 degree)</li>
<li>The temporal resolution, which can be <code>HOURLY</code>, <code>DAILY</code>, <code>MONTHLY</code>, <code>YEARLY</code> or <code>ENTIRE</code>.</li>
<li>The variable to group by: <code>FLAG</code>, <code>GEARTYPE</code>, <code>FLAGANDGEARTYPE</code>, <code>MMSI</code> or <code>VESSEL_ID</code>
</li>
<li>The date range <code>note: this must be 366 days or less</code>
</li>
<li>The region polygon in <code>sf</code> format or the region code (such as an EEZ code) to filter the raster</li>
<li>The source for the specified region. Currently, <code>EEZ</code>, <code>MPA</code>, <code>RFMO</code> or <code>USER_JSON</code> (for <code>sf</code> shapefiles).</li>
</ul>
<div class="section level3">
<h3 id="examples-2">Examples<a class="anchor" aria-label="anchor" href="#examples-2"></a>
</h3>
<p>You can load a sample shapefile inside <code>gfwr</code> to see how <code>'USER_JSON'</code> works:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"test_shape"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/get_raster.html">get_raster</a></span><span class="op">(</span></span>
<span>  spatial_resolution <span class="op">=</span> <span class="st">'LOW'</span>,</span>
<span>  temporal_resolution <span class="op">=</span> <span class="st">'YEARLY'</span>,</span>
<span>  group_by <span class="op">=</span> <span class="st">'FLAG'</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">'2021-01-01'</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">'2021-02-01'</span>,</span>
<span>  region <span class="op">=</span> <span class="va">test_shape</span>,</span>
<span>  region_source <span class="op">=</span> <span class="st">'USER_JSON'</span>,</span>
<span>  key <span class="op">=</span> <span class="va">key</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 2526 Columns: 6</span></span>
<span><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; Delimiter: ","</span></span>
<span><span class="co">#&gt; chr (1): flag</span></span>
<span><span class="co">#&gt; dbl (5): Lat, Lon, Time Range, Vessel IDs, Apparent Fishing Hours</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; # A tibble: 2,526 × 6</span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  14    60.9         2021 CHN              3                    21.3 </span></span>
<span><span class="co">#&gt;  2  13.8  59.3         2021 CHN              4                    15.2 </span></span>
<span><span class="co">#&gt;  3  13.7  61.2         2021 CHN              7                    63.5 </span></span>
<span><span class="co">#&gt;  4  13.7  61.8         2021 CHN              6                    33.8 </span></span>
<span><span class="co">#&gt;  5  13.5  61.5         2021 CHN              2                     7.7 </span></span>
<span><span class="co">#&gt;  6  13.4  61.3         2021 IRN              1                     3.31</span></span>
<span><span class="co">#&gt;  7  13    61.2         2021 CHN              1                    10.4 </span></span>
<span><span class="co">#&gt;  8  15    61.9         2021 CHN              3                     9.66</span></span>
<span><span class="co">#&gt;  9  14.6  62.7         2021 CHN              3                    25.4 </span></span>
<span><span class="co">#&gt; 10  14.6  63           2021 CHN              3                    35.6 </span></span>
<span><span class="co">#&gt; # ℹ 2,516 more rows</span></span></code></pre></div>
<p>If you want raster data from a particular EEZ, you can use the <code><a href="reference/get_region_id.html">get_region_id()</a></code> function to get the EEZ id, and enter that code in the <code>region</code> argument of <code><a href="reference/get_raster.html">get_raster()</a></code> instead of the region shapefile (ensuring you specify the <code>region_source</code> as <code>'EEZ'</code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># use EEZ function to get EEZ code of Cote d'Ivoire</span></span>
<span><span class="va">code_eez</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'CIV'</span>, region_source <span class="op">=</span> <span class="st">'EEZ'</span>, key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">'LOW'</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">'YEARLY'</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">'FLAG'</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2021-10-01"</span>,</span>
<span>           region <span class="op">=</span> <span class="va">code_eez</span><span class="op">$</span><span class="va">id</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">'EEZ'</span>,</span>
<span>           key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 611 Columns: 6</span></span>
<span><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; Delimiter: ","</span></span>
<span><span class="co">#&gt; chr (1): flag</span></span>
<span><span class="co">#&gt; dbl (5): Lat, Lon, Time Range, Vessel IDs, Apparent Fishing Hours</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; # A tibble: 611 × 6</span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1   4.9  -5.8         2021 CHN              4                    31   </span></span>
<span><span class="co">#&gt;  2   4.9  -5.9         2021 CHN              3                    11.7 </span></span>
<span><span class="co">#&gt;  3   5.2  -4           2021 GTM              2                     2.58</span></span>
<span><span class="co">#&gt;  4   2.7  -5.3         2021 FRA              1                     0.25</span></span>
<span><span class="co">#&gt;  5   2.7  -4           2021 ESP              1                     6.06</span></span>
<span><span class="co">#&gt;  6   1.9  -4.2         2021 FRA              1                     2.21</span></span>
<span><span class="co">#&gt;  7   1.9  -4.1         2021 FRA              1                     0.04</span></span>
<span><span class="co">#&gt;  8   4    -6.9         2021 FRA              1                     2.99</span></span>
<span><span class="co">#&gt;  9   4.3  -4.1         2021 FRA              2                     3.51</span></span>
<span><span class="co">#&gt; 10   4.7  -6.2         2021 CHN              2                    12.9 </span></span>
<span><span class="co">#&gt; # ℹ 601 more rows</span></span></code></pre></div>
<p>You could search for just one word in the name of the EEZ and then decide which one you want:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fu"><a href="reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'France'</span>, region_source <span class="op">=</span> <span class="st">'EEZ'</span>, key <span class="op">=</span> <span class="va">key</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span><span class="co">#&gt;      id label                            iso3 </span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;                            &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1  5677 France                           FRA  </span></span>
<span><span class="co">#&gt; 2 48966 Joint regime area Spain / France FRA  </span></span>
<span><span class="co">#&gt; 3 48976 Joint regime area Italy / France FRA</span></span></code></pre></div>
<p>From the results above, let’s say we’re interested in the French Exclusive Economic Zone, <code>5677</code></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">'LOW'</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">'YEARLY'</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">'FLAG'</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2021-10-01"</span>,</span>
<span>           region <span class="op">=</span> <span class="fl">5677</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">'EEZ'</span>,</span>
<span>           key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 5660 Columns: 6</span></span>
<span><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; Delimiter: ","</span></span>
<span><span class="co">#&gt; chr (1): flag</span></span>
<span><span class="co">#&gt; dbl (5): Lat, Lon, Time Range, Vessel IDs, Apparent Fishing Hours</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; # A tibble: 5,660 × 6</span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  42.6   9.5         2021 FRA              1                    26.3 </span></span>
<span><span class="co">#&gt;  2  50.9   1.4         2021 FRA             30                   831.  </span></span>
<span><span class="co">#&gt;  3  50.8   1.3         2021 BEL              1                     5.92</span></span>
<span><span class="co">#&gt;  4  51.4   2.1         2021 BEL              3                     3.14</span></span>
<span><span class="co">#&gt;  5  51.2   2.1         2021 NLD             21                   123.  </span></span>
<span><span class="co">#&gt;  6  51.3   2           2021 NLD             16                    68.9 </span></span>
<span><span class="co">#&gt;  7  51.2   2           2021 FRA             22                   465.  </span></span>
<span><span class="co">#&gt;  8  51.5   2.2         2021 NLD             20                   546.  </span></span>
<span><span class="co">#&gt;  9  51.5   2.2         2021 BEL              3                    62.6 </span></span>
<span><span class="co">#&gt; 10  51.4   2.3         2021 BEL              6                     8.07</span></span>
<span><span class="co">#&gt; # ℹ 5,650 more rows</span></span></code></pre></div>
<p>A similar approach can be used to search for a specific Marine Protected Area, in this case the Phoenix Island Protected Area (PIPA)</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># use region id function to get MPA code of Phoenix Island Protected Area</span></span>
<span><span class="va">code_mpa</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'Phoenix'</span>, region_source <span class="op">=</span> <span class="st">'MPA'</span>, key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">'LOW'</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">'YEARLY'</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">'FLAG'</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2015-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2015-06-01"</span>,</span>
<span>           region <span class="op">=</span> <span class="va">code_mpa</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">'MPA'</span>,</span>
<span>           key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 40 Columns: 6</span></span>
<span><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; Delimiter: ","</span></span>
<span><span class="co">#&gt; chr (1): flag</span></span>
<span><span class="co">#&gt; dbl (5): Lat, Lon, Time Range, Vessel IDs, Apparent Fishing Hours</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; # A tibble: 40 × 6</span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  -4.7 -176.         2015 KOR              3                    15.8 </span></span>
<span><span class="co">#&gt;  2  -4.7 -176.         2015 KIR              1                     0.36</span></span>
<span><span class="co">#&gt;  3  -3   -176.         2015 FSM              1                     2.16</span></span>
<span><span class="co">#&gt;  4  -2.9 -176.         2015 FSM              1                     5.09</span></span>
<span><span class="co">#&gt;  5  -4.1 -176.         2015 KOR              1                     2.67</span></span>
<span><span class="co">#&gt;  6  -2.2 -176.         2015 KIR              1                     1.89</span></span>
<span><span class="co">#&gt;  7  -3.6 -176.         2015 KIR              1                     5.99</span></span>
<span><span class="co">#&gt;  8  -3.1 -176.         2015 KOR              1                     0.91</span></span>
<span><span class="co">#&gt;  9  -3.5 -176.         2015 KOR              1                    10.8 </span></span>
<span><span class="co">#&gt; 10  -3.4 -176.         2015 KOR              1                     1.37</span></span>
<span><span class="co">#&gt; # ℹ 30 more rows</span></span></code></pre></div>
<p>It is also possible to filter rasters to one of the five regional fisheries management organizations (RFMO) that manage tuna and tuna-like species. These include <code>"ICCAT"</code>, <code>"IATTC"</code>,<code>"IOTC"</code>, <code>"CCSBT"</code> and <code>"WCPFC"</code>.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">'LOW'</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">'DAILY'</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">'FLAG'</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2021-01-04"</span>,</span>
<span>           region <span class="op">=</span> <span class="st">'ICCAT'</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">'RFMO'</span>,</span>
<span>           key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 17985 Columns: 6</span></span>
<span><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; Delimiter: ","</span></span>
<span><span class="co">#&gt; chr  (1): flag</span></span>
<span><span class="co">#&gt; dbl  (4): Lat, Lon, Vessel IDs, Apparent Fishing Hours</span></span>
<span><span class="co">#&gt; date (1): Time Range</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; # A tibble: 17,985 × 6</span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;       &lt;chr&gt;        &lt;dbl&gt;                    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  28.4 -96   2021-01-03   USA              1                     4.35</span></span>
<span><span class="co">#&gt;  2  28.5 -95.7 2021-01-03   USA              5                    20.3 </span></span>
<span><span class="co">#&gt;  3  28.4 -95.9 2021-01-03   USA              3                     7.05</span></span>
<span><span class="co">#&gt;  4  28.4 -95.8 2021-01-03   USA              3                    17.8 </span></span>
<span><span class="co">#&gt;  5  28.4 -95.7 2021-01-03   USA              4                    11.0 </span></span>
<span><span class="co">#&gt;  6  28.6 -95.5 2021-01-03   USA              2                     3.94</span></span>
<span><span class="co">#&gt;  7  28.7 -95.5 2021-01-03   USA              2                     5.08</span></span>
<span><span class="co">#&gt;  8  28.7 -95.4 2021-01-03   USA              2                     5.82</span></span>
<span><span class="co">#&gt;  9  28.7 -95.3 2021-01-04   USA              1                     1   </span></span>
<span><span class="co">#&gt; 10  28.8 -95.4 2021-01-03   USA              1                     0.94</span></span>
<span><span class="co">#&gt; # ℹ 17,975 more rows</span></span></code></pre></div>
<p>The <code><a href="reference/get_region_id.html">get_region_id()</a></code> function also works in reverse. If a region id is passed as a <code>numeric</code> to the function as the <code>region_name</code>, the corresponding region label or iso3 code can be returned. This is especially useful when events are returned with regions.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using same example as above</span></span>
<span><span class="fu"><a href="reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'FISHING'</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">usa_trawler_ids</span>,</span>
<span>          start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"2020-02-01"</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># extract EEZ id code</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eez <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">regions</span>, <span class="fu">purrr</span><span class="fu">::</span><span class="va"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span>, <span class="st">'eez'</span><span class="op">)</span>,</span>
<span>                                              <span class="va">paste0</span>, collapse <span class="op">=</span> <span class="st">','</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">type</span>, <span class="va">start</span>, <span class="va">end</span>, <span class="va">lat</span>, <span class="va">lon</span>, <span class="va">eez</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eez_name <span class="op">=</span> <span class="fu"><a href="reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">eez</span><span class="op">)</span>,</span>
<span>                                         region_source <span class="op">=</span> <span class="st">'EEZ'</span>,</span>
<span>                                         key <span class="op">=</span> <span class="va">key</span><span class="op">)</span><span class="op">$</span><span class="va">label</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">start</span>, <span class="op">-</span><span class="va">end</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 34 events from GFW"</span></span>
<span><span class="co">#&gt; # A tibble: 34 × 6</span></span>
<span><span class="co">#&gt; # Rowwise: </span></span>
<span><span class="co">#&gt;    id                               type      lat    lon eez   eez_name     </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                            &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;        </span></span>
<span><span class="co">#&gt;  1 379d452b49e0a2077aa92d23ab751de0 fishing  43.7 -124.  8456  United States</span></span>
<span><span class="co">#&gt;  2 72d1e4f6bf30b438f60876b0361ce75c fishing  28.1  -93.9 8456  United States</span></span>
<span><span class="co">#&gt;  3 94fdf957151db6b7e952ecd52107b443 fishing  43.8 -124.  8456  United States</span></span>
<span><span class="co">#&gt;  4 51c5140b261fca6214ea872209b74d85 fishing  38.4  -73.5 8456  United States</span></span>
<span><span class="co">#&gt;  5 2068a73ed9b3a4841be99e6f889a5cc8 fishing  38.3  -73.6 8456  United States</span></span>
<span><span class="co">#&gt;  6 c60e52370d48a741413094daec2d78ca fishing  38.1  -73.8 8456  United States</span></span>
<span><span class="co">#&gt;  7 4f20b44a59be19f188863af0a57e44c9 fishing  38.0  -73.9 8456  United States</span></span>
<span><span class="co">#&gt;  8 6739137b68e5fb477de38226f57892f7 fishing  38.0  -73.9 8456  United States</span></span>
<span><span class="co">#&gt;  9 46f8debd1e55a894ca26ac74faf11162 fishing  38.0  -73.9 8456  United States</span></span>
<span><span class="co">#&gt; 10 23330ffa0e1bbab43ead8328456c45aa fishing  43.7 -124.  8456  United States</span></span>
<span><span class="co">#&gt; # ℹ 24 more rows</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="when-your-api-request-times-out">When your API request times out<a class="anchor" aria-label="anchor" href="#when-your-api-request-times-out"></a>
</h3>
<p>For API performance reasons, the <code><a href="reference/get_raster.html">get_raster()</a></code> function restricts individual queries to a single year of data. However, even with this restriction, it is possible for API request to time out before it completes. When this occurs, the initial <code><a href="reference/get_raster.html">get_raster()</a></code> call will return an HTTP 524 error, and subsequent API requests using any <code>gfwr</code> <code>get_</code> function will return an HTTP 429 error until the original request completes:</p>
<blockquote>
<p>Error in <code><a href="https://httr2.r-lib.org/reference/req_perform.html" class="external-link">httr2::req_perform()</a></code>: ! HTTP 429 Too Many Requests. • Your application token is not currently enabled to perform more than one concurrent report. If you need to generate more than one report concurrently, contact us at <a href="mailto:apis@globalfishingwatch.org" class="email">apis@globalfishingwatch.org</a></p>
</blockquote>
<p>Although no data was received, the request is still being processed by the APIs and will become available when it completes. To account for this, <code>gfwr</code> includes the <code><a href="reference/get_last_report.html">get_last_report()</a></code> function, which lets users request the results of their last API request with <code><a href="reference/get_raster.html">get_raster()</a></code>.</p>
<p>The <code><a href="reference/get_last_report.html">get_last_report()</a></code> function will tell you if the APIs are still processing your request and will download the results if the request has finished successfully. You will receive an error message if the request finished but resulted in an error or if it’s been &gt;30 minutes since the last report was generated using <code><a href="reference/get_raster.html">get_raster()</a></code>. For more information, see the <a href="https://globalfishingwatch.org/our-apis/documentation#get-last-report-generated" class="external-link">Get last report generated endpoint</a> documentation on the GFW API page.</p>
</div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>We welcome all contributions to improve the package! Please read our <a href="https://github.com/GlobalFishingWatch/gfwr/blob/main/Contributing.md" class="external-link">Contribution Guide</a> and reach out!</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/GlobalFishingWatch/gfwr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/GlobalFishingWatch/gfwr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing gfwr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Tyler Clavelle <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2155-2459" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Rocío Joo <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-0319-4210" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Nate Miller <br><small class="roles"> Author </small>  </li>
<li>Andrea Sánchez-Tapia <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-3521-4338" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://zenodo.org/badge/latestdoi/450635054" class="external-link"><img src="https://zenodo.org/badge/450635054.svg" alt="DOI"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://opensource.org/licenses/Apache-2.0" class="external-link"><img src="https://img.shields.io/badge/license-Apache%202-blue" alt="Licence"></a></li>
<li><a href="https://github.com/r-universe/globalfishingwatch/actions/workflows/sync.yml" class="external-link"><img src="https://globalfishingwatch.r-universe.dev/badges/:registry" alt=":registry status badge"></a></li>
<li><a href="https://globalfishingwatch.r-universe.dev/" class="external-link"><img src="https://globalfishingwatch.r-universe.dev/badges/:articles" alt=":articles status badge"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Tyler Clavelle, Rocío Joo, Nate Miller, Andrea Sánchez-Tapia.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  <!-- inserted at the end of the body -->

  </body>
</html>
