<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Base function to get events stats from API and convert response to data frame — get_event_stats • gfwr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Base function to get events stats from API and convert response to data frame — get_event_stats"><meta property="og:description" content="Base function to get events stats from API and convert response to data frame"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gfwr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/GlobalFishingWatch/gfwr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Base function to get events stats from API and convert response to data frame</h1>
    <small class="dont-index">Source: <a href="https://github.com/GlobalFishingWatch/gfwr/blob/HEAD/R/get_event.R" class="external-link"><code>R/get_event.R</code></a></small>
    <div class="hidden name"><code>get_event_stats.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Base function to get events stats from API and convert response to data frame</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_event_stats</span><span class="op">(</span></span>
<span>  <span class="va">event_type</span>,</span>
<span>  encounter_types <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vessels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vessel_types <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2012-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2024-12-31"</span>,</span>
<span>  region_source <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  region <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  duration <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  confidences <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  key <span class="op">=</span> <span class="fu"><a href="gfw_auth.html">gfw_auth</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  print_request <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>event_type</dt>
<dd><p>Type of event to get data of. A vector with any combination
of "ENCOUNTER", "FISHING", "GAP", "LOITERING", "PORT_VISIT"</p></dd>


<dt>encounter_types</dt>
<dd><p>Filters for types of vessels during the encounter. A
vector with any combination of: "CARRIER-FISHING", "FISHING-CARRIER",
"FISHING-SUPPORT", "SUPPORT-FISHING"</p></dd>


<dt>vessels</dt>
<dd><p>A vector of VesselIDs, obtained via the <code><a href="get_vessel_info.html">get_vessel_info()</a></code> function</p></dd>


<dt>vessel_types</dt>
<dd><p>Optional. A vector of vessel types, any combination of:
"FISHING", "CARRIER", "SUPPORT", "PASSENGER", "OTHER_NON_FISHING", "SEISMIC_VESSEL",
"BUNKER_OR_TANKER", "CARGO"</p></dd>


<dt>start_date</dt>
<dd><p>Start of date range to search events, in YYYY-MM-DD format and including this date</p></dd>


<dt>end_date</dt>
<dd><p>End of date range to search events, in YYYY-MM-DD format and excluding this date</p></dd>


<dt>region_source</dt>
<dd><p>Optional but mandatory if using the argument region.
Source of the region. If 'EEZ','MPA', 'RFMO',
then the value for the argument region must be the code for that region.
If 'USER_JSON', then region has to point to a formatted geojson shapefile.
See Details about formatting the geojson.</p></dd>


<dt>region</dt>
<dd><p>GFW region code (such as an EEZ, MPA or RFMO code) or a
formatted geojson shape. See Details about formatting the geojson.</p></dd>


<dt>interval</dt>
<dd><p>Time series granularity. Must be a string. Possible values: 'HOUR', 'DAY', 'MONTH', 'YEAR'.</p></dd>


<dt>duration</dt>
<dd><p>duration, in minutes, of the event, ex. 30</p></dd>


<dt>confidences</dt>
<dd><p>Confidence levels (1-4) of events (port visits only)</p></dd>


<dt>key</dt>
<dd><p>Authorization token. Can be obtained with gfw_auth() function</p></dd>


<dt>quiet</dt>
<dd><p>Boolean. Whether to print the number of events returned by the
request</p></dd>


<dt>print_request</dt>
<dd><p>Boolean. Whether to print the request, for debugging
purposes. When contacting the GFW team it will be useful to send this string</p></dd>


<dt>...</dt>
<dd><p>Other arguments</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>There are currently four available event types and these events are provided
for three vessel types - fishing, carrier, and support vessels.
Fishing events (<code>event_type = "FISHING"</code>) are specific to fishing vessels and
loitering events (<code>event_type = "LOITERING"</code>) are specific to carrier vessels.
Port visits (<code>event_type = "PORT_VISIT"</code>) and encounters
(<code>event_type = "ENCOUNTER"</code>) are available for all vessel types. For more
details about the various event types, see the
<a href="https://globalfishingwatch.org/our-apis/documentation#data-caveat" class="external-link">GFW API documentation</a>.</p>
<p>The user-defined geojson has to be surrounded by a geojson tag,
that can be created using a simple paste:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>geojson_tagged <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'{"geojson":'</span>, your_geojson,<span class="st">'}'</span>).</span></code></pre><p></p></div>
<p>If you have an <strong>sf</strong> shapefile, you can also use function <code><a href="sf_to_geojson.html">sf_to_geojson()</a></code>
to obtain the correctly-formatted geojson.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/GlobalFishingWatch/gfwr" class="external-link">gfwr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co"># stats for encounters involving Russian carriers in given time range</span></span></span>
<span class="r-in"><span><span class="fu">get_event_stats</span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'ENCOUNTER'</span>,</span></span>
<span class="r-in"><span>encounter_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CARRIER-FISHING"</span>,<span class="st">"FISHING-CARRIER"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>vessel_types <span class="op">=</span> <span class="st">'CARRIER'</span>,</span></span>
<span class="r-in"><span>start_date <span class="op">=</span> <span class="st">"2018-01-01"</span>,</span></span>
<span class="r-in"><span>end_date <span class="op">=</span> <span class="st">"2023-01-31"</span>,</span></span>
<span class="r-in"><span>flags <span class="op">=</span> <span class="st">'RUS'</span>,</span></span>
<span class="r-in"><span>duration <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>interval <span class="op">=</span> <span class="st">"YEAR"</span>,</span></span>
<span class="r-in"><span>key <span class="op">=</span> <span class="fu"><a href="gfw_auth.html">gfw_auth</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Downloading 25388 events for  197  vessels from  1 flag(s) from GFW"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   numEvents numFlags numVessels flags      timeseries</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     <span style="text-decoration: underline;">25</span>388        1        197 <span style="color: #949494;">&lt;list [1]&gt;</span> <span style="color: #949494;">&lt;list [6]&gt;</span></span>
<span class="r-in"><span> <span class="co"># port visits stats in a region (Senegal)</span></span></span>
<span class="r-in"><span> <span class="fu">get_event_stats</span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'PORT_VISIT'</span>,</span></span>
<span class="r-in"><span>start_date <span class="op">=</span> <span class="st">"2018-01-01"</span>,</span></span>
<span class="r-in"><span>end_date <span class="op">=</span> <span class="st">"2019-01-31"</span>,</span></span>
<span class="r-in"><span>confidences <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'3'</span>,<span class="st">'4'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>region <span class="op">=</span> <span class="fl">8371</span>,</span></span>
<span class="r-in"><span>region_source <span class="op">=</span> <span class="st">'EEZ'</span>,</span></span>
<span class="r-in"><span>interval <span class="op">=</span> <span class="st">"YEAR"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Downloading 4365 events for  1368  vessels from  72 flag(s) from GFW"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   numEvents numFlags numVessels flags       timeseries</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>      <span style="text-decoration: underline;">4</span>365       72       <span style="text-decoration: underline;">1</span>368 <span style="color: #949494;">&lt;list [73]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tyler Clavelle, Rocío Joo, Nate Miller, Andrea Sánchez-Tapia.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

