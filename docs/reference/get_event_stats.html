<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Base function to get events stats from API and convert response to data frame — get_event_stats • gfwr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Base function to get events stats from API and convert response to data frame — get_event_stats"><meta name="description" content="Base function to get events stats from API and convert response to data frame"><meta property="og:description" content="Base function to get events stats from API and convert response to data frame"><meta property="og:image" content="https://globalfishingwatch.github.io/gfwr/logo.png"><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WXTMN69');</script><!-- End Google Tag Manager --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXTMN69" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) -->

    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <!-- inserted before the package title in the header ->
    <a class="navbar-brand me-2" href="../index.html">gfwr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.4</small>

    <!-- inserted before the navbar links -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/identity.html">Using get_vessel_info(): the basics of vessel identity in Global Fishing Watch and gfwr</a></li>
    <li><a class="dropdown-item" href="../articles/making-maps.html">Making maps with `gfwr`</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GlobalFishingWatch/gfwr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>

    <!-- inserted after the navbar links -->
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Base function to get events stats from API and convert response to data frame</h1>
      <small class="dont-index">Source: <a href="https://github.com/GlobalFishingWatch/gfwr/blob/HEAD/R/get_event_stats.R" class="external-link"><code>R/get_event_stats.R</code></a></small>
      <div class="d-none name"><code>get_event_stats.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Base function to get events stats from API and convert response to data frame</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_event_stats</span><span class="op">(</span></span>
<span>  <span class="va">event_type</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2012-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2024-12-31"</span>,</span>
<span>  interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vessels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  flags <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vessel_types <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  region_source <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  region <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  duration <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  encounter_types <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  confidences <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  key <span class="op">=</span> <span class="fu"><a href="gfw_auth.html">gfw_auth</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  print_request <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-event-type">event_type<a class="anchor" aria-label="anchor" href="#arg-event-type"></a></dt>
<dd><p>Type of event to get data of. A vector with any combination
of "ENCOUNTER", "FISHING", "GAP", "LOITERING", "PORT_VISIT"</p></dd>


<dt id="arg-start-date">start_date<a class="anchor" aria-label="anchor" href="#arg-start-date"></a></dt>
<dd><p>Start of date range to search events, in YYYY-MM-DD format and including this date</p></dd>


<dt id="arg-end-date">end_date<a class="anchor" aria-label="anchor" href="#arg-end-date"></a></dt>
<dd><p>End of date range to search events, in YYYY-MM-DD format and excluding this date</p></dd>


<dt id="arg-interval">interval<a class="anchor" aria-label="anchor" href="#arg-interval"></a></dt>
<dd><p>Time series granularity. Must be a string. Possible values: 'HOUR', 'DAY', 'MONTH', 'YEAR'.</p></dd>


<dt id="arg-vessels">vessels<a class="anchor" aria-label="anchor" href="#arg-vessels"></a></dt>
<dd><p>A vector of vesselIds, obtained via the <code><a href="get_vessel_info.html">get_vessel_info()</a></code> function</p></dd>


<dt id="arg-flags">flags<a class="anchor" aria-label="anchor" href="#arg-flags"></a></dt>
<dd><p>ISO3 code for the flag of the vessels. Null by default.</p></dd>


<dt id="arg-vessel-types">vessel_types<a class="anchor" aria-label="anchor" href="#arg-vessel-types"></a></dt>
<dd><p>Optional. A vector of vessel types, any combination of:
"FISHING", "CARRIER", "SUPPORT", "PASSENGER", "OTHER_NON_FISHING", "SEISMIC_VESSEL",
"BUNKER_OR_TANKER", "CARGO"</p></dd>


<dt id="arg-region-source">region_source<a class="anchor" aria-label="anchor" href="#arg-region-source"></a></dt>
<dd><p>Optional but mandatory if using the argument region.
Source of the region. If 'EEZ','MPA', 'RFMO',
then the value for the argument region must be the code for that region.
If 'USER_SHAPEFILE', then region has to be an sf object</p></dd>


<dt id="arg-region">region<a class="anchor" aria-label="anchor" href="#arg-region"></a></dt>
<dd><p>GFW region code (such as an EEZ, MPA or RFMO code) or a
formatted geojson shape. See Details about formatting the geojson.</p></dd>


<dt id="arg-duration">duration<a class="anchor" aria-label="anchor" href="#arg-duration"></a></dt>
<dd><p>minimum duration of the event in minutes. The default value is 1.</p></dd>


<dt id="arg-encounter-types">encounter_types<a class="anchor" aria-label="anchor" href="#arg-encounter-types"></a></dt>
<dd><p>Only useful when event_type = "ENCOUNTER".
Filters for types of vessels during the encounter. A
vector with any combination of: "CARRIER-FISHING", "FISHING-CARRIER",
"FISHING-SUPPORT", "SUPPORT-FISHING"</p></dd>


<dt id="arg-confidences">confidences<a class="anchor" aria-label="anchor" href="#arg-confidences"></a></dt>
<dd><p>Only useful when event_type = "PORT_VISIT". Confidence
levels (1-4) of events.</p></dd>


<dt id="arg-key">key<a class="anchor" aria-label="anchor" href="#arg-key"></a></dt>
<dd><p>Authorization token. Can be obtained with gfw_auth() function</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Boolean. Whether to print the number of events returned by the
request</p></dd>


<dt id="arg-print-request">print_request<a class="anchor" aria-label="anchor" href="#arg-print-request"></a></dt>
<dd><p>Boolean. Whether to print the request, for debugging
purposes. When contacting the GFW team it will be useful to send this string</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>There are currently four available event types and these events are provided
for three vessel types - fishing, carrier, and support vessels.
Fishing events (<code>event_type = "FISHING"</code>) are specific to fishing vessels and
loitering events (<code>event_type = "LOITERING"</code>) are specific to carrier vessels.
Port visits (<code>event_type = "PORT_VISIT"</code>) and encounters
(<code>event_type = "ENCOUNTER"</code>) are available for all vessel types. For more
details about the various event types, see the
<a href="https://globalfishingwatch.org/our-apis/documentation#data-caveat" class="external-link">GFW API documentation</a>.</p>
<p>The user-defined geojson has to be surrounded by a geojson tag,
that can be created using a simple paste:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>geojson_tagged <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'{"geojson":'</span>, your_geojson,<span class="st">'}'</span>).</span></code></pre><p></p></div>
<p>If you have an <strong>sf</strong> shapefile, you can also use function <code><a href="sf_to_geojson.html">sf_to_geojson()</a></code>
to obtain the correctly-formatted geojson.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/GlobalFishingWatch/gfwr" class="external-link">gfwr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co"># stats for encounters involving Russian carriers in given time range</span></span></span>
<span class="r-in"><span><span class="fu">get_event_stats</span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'ENCOUNTER'</span>,</span></span>
<span class="r-in"><span>encounter_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CARRIER-FISHING"</span>,<span class="st">"FISHING-CARRIER"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>vessel_types <span class="op">=</span> <span class="st">'CARRIER'</span>,</span></span>
<span class="r-in"><span>start_date <span class="op">=</span> <span class="st">"2018-01-01"</span>,</span></span>
<span class="r-in"><span>end_date <span class="op">=</span> <span class="st">"2023-01-31"</span>,</span></span>
<span class="r-in"><span>flags <span class="op">=</span> <span class="st">'RUS'</span>,</span></span>
<span class="r-in"><span>duration <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>interval <span class="op">=</span> <span class="st">"YEAR"</span>,</span></span>
<span class="r-in"><span>key <span class="op">=</span> <span class="fu"><a href="gfw_auth.html">gfw_auth</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co"># port visits stats in a region (Senegal)</span></span></span>
<span class="r-in"><span> <span class="fu">get_event_stats</span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'PORT_VISIT'</span>,</span></span>
<span class="r-in"><span>start_date <span class="op">=</span> <span class="st">"2018-01-01"</span>,</span></span>
<span class="r-in"><span>end_date <span class="op">=</span> <span class="st">"2019-01-31"</span>,</span></span>
<span class="r-in"><span>confidences <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'3'</span>,<span class="st">'4'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>region <span class="op">=</span> <span class="fl">8371</span>,</span></span>
<span class="r-in"><span>region_source <span class="op">=</span> <span class="st">'EEZ'</span>,</span></span>
<span class="r-in"><span>interval <span class="op">=</span> <span class="st">"YEAR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tyler Clavelle, Rocío Joo, Nate Miller, Andrea Sánchez-Tapia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>



  <!-- inserted at the end of the body -->

  </body></html>

