<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>`gfwr`: Access data from Global Fishing Watch APIs • gfwr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="`gfwr`: Access data from Global Fishing Watch APIs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WXTMN69');</script><!-- End Google Tag Manager -->
</head>
<body data-spy="scroll" data-target="#toc">
    <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXTMN69" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gfwr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/gfwr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/identity.html">Using `get_vessel_info()`: the basics of vessel identity in `gfwr`</a>
    </li>
    <li>
      <a href="../articles/making-maps.html">Making maps with `gfwr`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/GlobalFishingWatch/gfwr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>
<code>gfwr</code>: Access data from Global
Fishing Watch APIs</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/GlobalFishingWatch/gfwr/blob/HEAD/vignettes/articles/gfwr.Rmd" class="external-link"><code>vignettes/articles/gfwr.Rmd</code></a></small>
      <div class="hidden name"><code>gfwr.Rmd</code></div>

    </div>

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div class="section level2">
<h2 id="gfwr-access-data-from-global-fishing-watch-apis">
<code>gfwr</code>: Access data from Global Fishing Watch APIs
<img src="gfwr_hex_rgb.png" align="right" width="200px"><a class="anchor" aria-label="anchor" href="#gfwr-access-data-from-global-fishing-watch-apis"></a>
</h2>
<!-- badges: start -->
<p><a href="https://zenodo.org/badge/latestdoi/450635054" class="external-link"><img src="https://zenodo.org/badge/450635054.svg" alt="DOI"></a> <a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a>
<a href="https://opensource.org/licenses/Apache-2.0" class="external-link"><img src="https://img.shields.io/badge/license-Apache%202-blue" alt="Licence"></a> <a href="https://github.com/r-universe/globalfishingwatch/actions/workflows/sync.yml" class="external-link"><img src="https://globalfishingwatch.r-universe.dev/badges/:registry" alt=":registry status badge"></a> <!-- badges: end --></p>
<p>The <code>gfwr</code> R package is a simple wrapper for the Global
Fishing Watch (GFW) <a href="https://globalfishingwatch.org/our-apis/documentation#introduction" class="external-link">APIs</a>.
It provides convenient functions to freely pull GFW data directly into R
in tidy formats.</p>
<p>The package currently works with the following APIs:</p>
<ul>
<li>
<a href="https://globalfishingwatch.org/our-apis/documentation#vessels-api" class="external-link">Vessels
API</a>: vessel search and identity based on AIS self reported data and
public registry information</li>
<li>
<a href="https://globalfishingwatch.org/our-apis/documentation#events-api" class="external-link">Events
API</a>: encounters, loitering, port visits, AIS-disabling events and
fishing events based on AIS data</li>
<li>
<a href="https://globalfishingwatch.org/our-apis/documentation#map-visualization-4wings-api" class="external-link">Gridded
fishing effort (4Wings API)</a>: apparent fishing effort based on AIS
data</li>
</ul>
<blockquote>
<p><strong>Note</strong>: See the <a href="https://globalfishingwatch.org/our-apis/documentation#reference-data" class="external-link">Terms
of Use</a> page for GFW APIs for information on our API licenses and
rate limits.</p>
</blockquote>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You can install the most recent version of <code>gfwr</code>
using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check/install remotes</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"GlobalFishingWatch/gfwr"</span><span class="op">)</span></span></code></pre></div>
<p><code>gfwr</code> is also in the rOpenSci <a href="https://globalfishingwatch.r-universe.dev/gfwr#" class="external-link">R-universe</a>,
and can be installed like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"gfwr"</span>, </span>
<span>                 repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://globalfishingwatch.r-universe.dev"</span>,</span>
<span>                           <span class="st">"https://cran.r-project.org"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Once everything is installed, you can load and use <code>gfwr</code>
in your scripts with <code><a href="https://github.com/GlobalFishingWatch/gfwr" class="external-link">library(gfwr)</a></code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/GlobalFishingWatch/gfwr" class="external-link">gfwr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="authorization">Authorization<a class="anchor" aria-label="anchor" href="#authorization"></a>
</h3>
<p>The use of <code>gfwr</code> requires a GFW API token, which users
can request from the <a href="https://globalfishingwatch.org/our-apis/tokens" class="external-link">GFW API
Portal</a>. Save this token to your <code>.Renviron</code> file using
<code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code> and adding a variable named
<code>GFW_TOKEN</code> to the file
(<code>GFW_TOKEN="PASTE_YOUR_TOKEN_HERE"</code>). Save the
<code>.Renviron</code> file and restart the R session to make the edit
effective.</p>
<p>Then use the <code><a href="../reference/gfw_auth.html">gfw_auth()</a></code> helper function to inform the
key on your function calls. You can use <code><a href="../reference/gfw_auth.html">gfw_auth()</a></code> directly
or save the information to an object in your R workspace every time and
pass it to subsequent <code>gfwr</code> functions.</p>
<p>So you can do:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gfw_auth.html">gfw_auth</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>or this</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GFW_TOKEN"</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p><strong>Note</strong>: <code>gfwr</code> functions are set to use
<code>key = gfw_auth()</code> by default.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="vessels-api">Vessels API<a class="anchor" aria-label="anchor" href="#vessels-api"></a>
</h3>
<p>The <code><a href="../reference/get_vessel_info.html">get_vessel_info()</a></code> function allows you to get vessel
identity details from the <a href="https://globalfishingwatch.org/our-apis/documentation#introduction-vessels-api" class="external-link">GFW
Vessels API</a>.</p>
<p>There are two search types: <code>search</code>, and
<code>id</code>.</p>
<ul>
<li>
<code>search</code> is performed by using parameters
<code>query</code> for basic searches and <code>where</code> for
advanced searchers using SQL expressions
<ul>
<li>
<code>query</code> takes a single identifier that can be the MMSI,
IMO, callsign, or shipname as input and identifies all vessels that
match.</li>
<li>
<code>where</code> search allows for the use of complex search with
logical clauses (AND, OR) and fuzzy matching with terms such as LIKE,
using SQL syntax (see examples in the function)</li>
<li>
<code>includes</code> adds information from public registries.
Options are “MATCH_CRITERIA”, “OWNERSHIP” and “AUTHORIZATIONS”</li>
</ul>
</li>
</ul>
<div class="section level4">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h4>
<p>To get information of a vessel using its MMSI, IMO number, callsign
or name, the search can be done directly using the number or the string.
For example, to look for a vessel with
<code>MMSI = 224224000</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>query <span class="op">=</span> <span class="fl">224224000</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">"search"</span>,</span>
<span>                key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1 total vessels</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;   dataset                           </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                        1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 16</span></span></span>
<span><span class="co">#&gt;   index recordId        sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 e0c9823749264a… <span style="color: #949494;">&lt;chr [6]&gt;</span>  2242… ESP   AGURTZA… AGURTZAB… EBSJ     8733…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 7 more variables: transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   geartypes &lt;chr&gt;, lengthM &lt;dbl&gt;, tonnageGt &lt;int&gt;, vesselInfoReference &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   extraFields &lt;list&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 0 × 2</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 variables: index &lt;dbl&gt;, &lt;list&gt; &lt;list&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 5</span></span></span>
<span><span class="co">#&gt;   index dateFrom             dateTo               ssvid     sourceCode</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 2019-01-01T00:00:00Z 2019-10-01T00:00:00Z 224224000 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 2012-01-01T00:00:00Z 2019-01-01T00:00:00Z 224224000 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1 2019-10-15T00:00:00Z 2023-02-01T00:00:00Z 306118000 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 10</span></span></span>
<span><span class="co">#&gt;   index vesselId              geartypes_name geartypes_source geartypes_yearFrom</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 6632c9eb8-8009-abdb-… PURSE_SEINE_S… GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>019</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 3c99c326d-dd2e-175d-… PURSE_SEINE_S… GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>015</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: geartypes_yearTo &lt;int&gt;, shiptypes_name &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   shiptypes_source &lt;chr&gt;, shiptypes_yearFrom &lt;int&gt;, shiptypes_yearTo &lt;int&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 14</span></span></span>
<span><span class="co">#&gt;   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 6632c9eb8… 3061… AGURTZA… AGURTZAB… BES   PJBL     8733…          <span style="text-decoration: underline;">418</span>581</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 3c99c326d… 2242… AGURTZA… AGURTZAB… ESP   EBSJ     8733…          <span style="text-decoration: underline;">135</span>057</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></span></code></pre></div>
<p>To do more specific searches (<code>imo = '8300949'</code>), combine
different fields (<code>imo = '8300949' AND ssvid = '214182732'</code>)
and do fuzzy matching
(<code>"shipname LIKE '%GABU REEFE%' OR imo = '8300949'"</code>), use
parameter <code>where</code> instead of <code>query</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>where <span class="op">=</span> <span class="st">"shipname LIKE '%GABU REEFE%' OR imo = '8300949'"</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">"search"</span>,</span>
<span>                key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1 total vessels</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;   dataset                           </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                        1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 17</span></span></span>
<span><span class="co">#&gt;   index recordId        sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 b16ca93ea690fc… <span style="color: #949494;">&lt;chr [2]&gt;</span>  6290… GMB   GABU RE… GABUREEF… C5J278   8300…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   transmissionDateTo &lt;chr&gt;, geartypes &lt;chr&gt;, lengthM &lt;dbl&gt;, tonnageGt &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vesselInfoReference &lt;chr&gt;, extraFields &lt;list&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 7</span></span></span>
<span><span class="co">#&gt;   index name                   flag  ssvid     sourceCode dateFrom        dateTo</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 FISHING CARGO SERVICES PAN   629009266 <span style="color: #949494;">&lt;chr [1]&gt;</span>  2024-08-07T10:… 2024-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 FISHING CARGO SERVICES PAN   613590000 <span style="color: #949494;">&lt;chr [1]&gt;</span>  2022-01-24T09:… 2024-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1 FISHING CARGO SERVICES PAN   214182732 <span style="color: #949494;">&lt;chr [1]&gt;</span>  2019-02-23T11:… 2022-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     1 FISHING CARGO SERVICES PAN   616852000 <span style="color: #949494;">&lt;chr [1]&gt;</span>  2012-01-08T19:… 2019-…</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 0 × 2</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 variables: index &lt;dbl&gt;, &lt;list&gt; &lt;list&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 10</span></span></span>
<span><span class="co">#&gt;   index vesselId              geartypes_name geartypes_source geartypes_yearFrom</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 58cf536b1-1fca-dac3-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>012</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 1da8dbc23-3c48-d5ce-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>022</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1 0b7047cb5-58c8-6e63-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>019</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     1 9827ea1ea-a120-f374-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>024</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: geartypes_yearTo &lt;int&gt;, shiptypes_name &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   shiptypes_source &lt;chr&gt;, shiptypes_yearFrom &lt;int&gt;, shiptypes_yearTo &lt;int&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 14</span></span></span>
<span><span class="co">#&gt;   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 9827ea1ea… 6290… GABU RE… GABUREEF… GMB   C5J278   8300…          <span style="text-decoration: underline;">118</span>837</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 1da8dbc23… 6135… GABU RE… GABUREEF… CMR   TJMC996  8300…          <span style="text-decoration: underline;">973</span>251</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1 0b7047cb5… 2141… GABU RE… GABUREEF… MDA   ER2732   8300…          <span style="text-decoration: underline;">642</span>750</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     1 58cf536b1… 6168… GABU RE… GABUREEF… COM   D6FJ2    8300…          <span style="text-decoration: underline;">469</span>834</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></span></code></pre></div>
<ul>
<li>The <code>id</code> search allows the user to specify a vector of
<code>vesselId</code>s</li>
</ul>
<blockquote>
<p><strong>Note</strong>: <code>vesselId</code> is an internal ID
generated by GFW to connect data accross APIs and involves a combination
of vessel and tracking data information. It can be retrieved using
<code><a href="../reference/get_vessel_info.html">get_vessel_info()</a></code> and fetching the vector of responses
inside <code>$selfReportedInfo$vesselId</code>. See the <a href="https://globalfishingwatch.github.io/gfwr/articles/identity">identity
vignette</a> for more information.</p>
</blockquote>
<p>To search by <code>vesselId</code>, use parameter <code>ids</code>
and specify <code>search_type = "id"</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="st">"8c7304226-6c71-edbe-0b63-c246734b3c01"</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1 total vessels</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;   dataset                           </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                        5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 17</span></span></span>
<span><span class="co">#&gt;   index recordId        sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 a8d00ce54b37ad… <span style="color: #949494;">&lt;chr [3]&gt;</span>  2733… RUS   FRIO FO… FRIOFORW… UCRZ     9076…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 a8d00ce54b37ad… <span style="color: #949494;">&lt;chr [2]&gt;</span>  5111… PLW   FRIO FO… FRIOFORW… T8A4891  9076…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1 a8d00ce54b37ad… <span style="color: #949494;">&lt;chr [6]&gt;</span>  2106… CYP   FRIO FO… FRIOFORW… 5BWC3    9076…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     1 a8d00ce54b37ad… <span style="color: #949494;">&lt;chr [2]&gt;</span>  3413… KNA   FRIO FO… FRIOFORW… V4JQ3    9076…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     1 a8d00ce54b37ad… <span style="color: #949494;">&lt;chr [2]&gt;</span>  3546… PAN   FRIO AE… FRIOAEGE… 3FGY4    9076…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   transmissionDateTo &lt;chr&gt;, geartypes &lt;chr&gt;, lengthM &lt;int&gt;, tonnageGt &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vesselInfoReference &lt;chr&gt;, extraFields &lt;list&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 7</span></span></span>
<span><span class="co">#&gt;   index name    flag  ssvid     sourceCode dateFrom             dateTo          </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 COLINER RUS   273379740 <span style="color: #949494;">&lt;chr [1]&gt;</span>  2015-02-27T10:59:43Z 2024-09-30T20:2…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 COLINER CYP   511101495 <span style="color: #949494;">&lt;chr [1]&gt;</span>  2024-07-04T14:27:04Z 2024-07-24T14:2…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1 COLINER CYP   210631000 <span style="color: #949494;">&lt;chr [1]&gt;</span>  2013-05-15T20:19:43Z 2024-07-04T14:1…</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 5</span></span></span>
<span><span class="co">#&gt;   index dateFrom             dateTo               ssvid     sourceCode</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 2023-01-01T00:00:00Z 2024-09-01T00:00:00Z 210631000 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 2020-01-01T00:00:00Z 2024-09-01T00:00:00Z 210631000 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1 2024-08-09T00:00:00Z 2024-09-01T00:00:00Z 273379740 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 10</span></span></span>
<span><span class="co">#&gt;   index vesselId              geartypes_name geartypes_source geartypes_yearFrom</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 0cb77880e-ee49-2ce4-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>012</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 3c81a942b-bf0a-f476-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>015</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1 0edad163f-f53d-9ddb-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>024</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     1 8c7304226-6c71-edbe-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>013</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     1 da1cd7e1b-b8d0-539c-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>015</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: geartypes_yearTo &lt;int&gt;, shiptypes_name &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   shiptypes_source &lt;chr&gt;, shiptypes_yearFrom &lt;int&gt;, shiptypes_yearTo &lt;int&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 14</span></span></span>
<span><span class="co">#&gt;   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 8c7304226… 2106… FRIO FO… FRIOFORW… CYP   5BWC3    9076…         3<span style="text-decoration: underline;">369</span>802</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></span></code></pre></div>
<p>To specify more than one <code>vesselId</code>, you can submit a
vector:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"8c7304226-6c71-edbe-0b63-c246734b3c01"</span>,</span>
<span>                        <span class="st">"6583c51e3-3626-5638-866a-f47c3bc7ef7c"</span>,</span>
<span>                        <span class="st">"71e7da672-2451-17da-b239-857831602eca"</span><span class="op">)</span>,</span>
<span>                search_type <span class="op">=</span> <span class="st">'id'</span>,</span>
<span>                key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; 3 total vessels</span></span>
<span><span class="co">#&gt; $dataset</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 1</span></span></span>
<span><span class="co">#&gt;   dataset                           </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> public-global-vessel-identity:v3.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfoTotalRecords</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 1</span></span></span>
<span><span class="co">#&gt;   registryInfoTotalRecords</span></span>
<span><span class="co">#&gt;                      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                        5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                        2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 17</span></span></span>
<span><span class="co">#&gt;   index recordId        sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 685862e0626f62… <span style="color: #949494;">&lt;chr [5]&gt;</span>  5480… PHL   JOHNREY… JOHNREYN… DUQA7    8118…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2 a8d00ce54b37ad… <span style="color: #949494;">&lt;chr [3]&gt;</span>  2733… RUS   FRIO FO… FRIOFORW… UCRZ     9076…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     2 a8d00ce54b37ad… <span style="color: #949494;">&lt;chr [2]&gt;</span>  5111… PLW   FRIO FO… FRIOFORW… T8A4891  9076…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     2 a8d00ce54b37ad… <span style="color: #949494;">&lt;chr [6]&gt;</span>  2106… CYP   FRIO FO… FRIOFORW… 5BWC3    9076…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     2 a8d00ce54b37ad… <span style="color: #949494;">&lt;chr [2]&gt;</span>  3413… KNA   FRIO FO… FRIOFORW… V4JQ3    9076…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     2 a8d00ce54b37ad… <span style="color: #949494;">&lt;chr [2]&gt;</span>  3546… PAN   FRIO AE… FRIOAEGE… 3FGY4    9076…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>     3 b82d02e5c2c11e… <span style="color: #949494;">&lt;chr [5]&gt;</span>  4417… KOR   ADRIA    ADRIA     DTBY3    8919…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span>     3 b82d02e5c2c11e… <span style="color: #949494;">&lt;chr [4]&gt;</span>  4417… KOR   PREMIER  PREMIER   DTBY3    8919…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   transmissionDateTo &lt;chr&gt;, geartypes &lt;chr&gt;, lengthM &lt;dbl&gt;, tonnageGt &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vesselInfoReference &lt;chr&gt;, extraFields &lt;list&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryOwners</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 7</span></span></span>
<span><span class="co">#&gt;   index name                          flag  ssvid     sourceCode dateFrom dateTo</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 TRANS PACIFIC JOURNEY FISHING PHL   548012100 <span style="color: #949494;">&lt;chr [3]&gt;</span>  2017-02… 2019-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2 COLINER                       RUS   273379740 <span style="color: #949494;">&lt;chr [1]&gt;</span>  2015-02… 2024-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     2 COLINER                       CYP   511101495 <span style="color: #949494;">&lt;chr [1]&gt;</span>  2024-07… 2024-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     2 COLINER                       CYP   210631000 <span style="color: #949494;">&lt;chr [1]&gt;</span>  2013-05… 2024-…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     3 DONGWON INDUSTRIES            KOR   441734000 <span style="color: #949494;">&lt;chr [2]&gt;</span>  2013-09… 2024-…</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $registryPublicAuthorizations</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 5</span></span></span>
<span><span class="co">#&gt;   index dateFrom             dateTo               ssvid     sourceCode</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 2012-01-01T00:00:00Z 2017-10-25T00:00:00Z 548012100 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 2019-02-10T18:02:49Z 2024-09-01T00:00:00Z 548012100 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     2 2023-01-01T00:00:00Z 2024-09-01T00:00:00Z 210631000 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     2 2020-01-01T00:00:00Z 2024-09-01T00:00:00Z 210631000 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     2 2024-08-09T00:00:00Z 2024-09-01T00:00:00Z 273379740 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     3 2015-10-08T00:00:00Z 2020-07-21T00:00:00Z 441734000 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>     3 2012-01-01T00:00:00Z 2013-09-19T00:00:00Z 441734000 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span>     3 2013-09-20T00:00:00Z 2024-09-01T00:00:00Z 441734000 <span style="color: #949494;">&lt;chr [1]&gt;</span> </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $combinedSourcesInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 10</span></span></span>
<span><span class="co">#&gt;   index vesselId              geartypes_name geartypes_source geartypes_yearFrom</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 71e7da672-2451-17da-… TUNA_PURSE_SE… COMBINATION_OF_…               <span style="text-decoration: underline;">2</span>017</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 55889aefb-bef9-224c-… TUNA_PURSE_SE… COMBINATION_OF_…               <span style="text-decoration: underline;">2</span>017</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     2 0cb77880e-ee49-2ce4-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>012</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     2 3c81a942b-bf0a-f476-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>015</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     2 0edad163f-f53d-9ddb-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>024</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     2 8c7304226-6c71-edbe-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>013</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>     2 da1cd7e1b-b8d0-539c-… CARRIER        GFW_VESSEL_LIST                <span style="text-decoration: underline;">2</span>015</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span>     3 aca119c29-95dd-f5c4-… TUNA_PURSE_SE… COMBINATION_OF_…               <span style="text-decoration: underline;">2</span>012</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span>     3 6583c51e3-3626-5638-… TUNA_PURSE_SE… COMBINATION_OF_…               <span style="text-decoration: underline;">2</span>013</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: geartypes_yearTo &lt;int&gt;, shiptypes_name &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   shiptypes_source &lt;chr&gt;, shiptypes_yearFrom &lt;int&gt;, shiptypes_yearTo &lt;int&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $selfReportedInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 14</span></span></span>
<span><span class="co">#&gt;   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 71e7da672… 5480… JOHN RE… JOHNREYN… PHL   DUQA-7   8118…          <span style="text-decoration: underline;">133</span>081</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2 8c7304226… 2106… FRIO FO… FRIOFORW… CYP   5BWC3    9076…         3<span style="text-decoration: underline;">369</span>802</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3 6583c51e3… 4417… ADRIA    ADRIA     KOR   DTBY3    <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">360</span>249</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></span></code></pre></div>
<p>This is useful especially because a vessel can have different
<code>vesselId</code>s in time.</p>
<p><strong>Check the function documentation for examples with the other
function arguments and <a href="https://globalfishingwatch.github.io/gfwr/articles/identity">our
dedicated vignette</a> for more information about vessel identity
markers and the outputs retrieved.</strong></p>
</div>
</div>
<div class="section level3">
<h3 id="events-api">Events API<a class="anchor" aria-label="anchor" href="#events-api"></a>
</h3>
<p>The <code><a href="../reference/get_event.html">get_event()</a></code> function allows you to get data on
specific vessel activities from the <a href="https://globalfishingwatch.org/our-apis/documentation#events-api" class="external-link">GFW
Events API</a>. Event types include apparent fishing events, potential
transshipment events (two-vessel encounters and loitering by
refrigerated carrier vessels), port visits, and AIS-disabling events
(“gaps”). Find more information about events in our <a href="https://globalfishingwatch.org/our-apis/documentation#data-caveat" class="external-link">caveat
documentation</a>.</p>
<div class="section level4">
<h4 id="events-in-a-given-time-range">Events in a given time range<a class="anchor" aria-label="anchor" href="#events-in-a-given-time-range"></a>
</h4>
<p>You can get events in a given date range. By not specifying
<code>vessels</code>, the response will return results for all
vessels.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'ENCOUNTER'</span>,</span>
<span>          start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"2020-01-02"</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 286 events from GFW"</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 286 × 16</span></span></span>
<span><span class="co">#&gt;    start               end                 eventId       eventType    lat    lon</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2020-01-01 <span style="color: #949494;">00:40:00</span> 2020-01-01 <span style="color: #949494;">09:50:00</span> 99d023bde785… encounter -<span style="color: #BB0000;">17.7</span>   -<span style="color: #BB0000;">79.2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2020-01-01 <span style="color: #949494;">06:40:00</span> 2020-01-01 <span style="color: #949494;">21:20:00</span> 8506ab1afebe… encounter -<span style="color: #BB0000;">61.5</span>    34.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020-01-01 <span style="color: #949494;">19:30:00</span> 2020-01-01 <span style="color: #949494;">23:50:00</span> 2879e4d9ffee… encounter  30.6   123. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2020-01-01 <span style="color: #949494;">16:10:00</span> 2020-01-01 <span style="color: #949494;">18:30:00</span> bfffbb6b67ec… encounter -<span style="color: #BB0000;">19.5</span>  -<span style="color: #BB0000;">106.</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2020-01-01 <span style="color: #949494;">08:10:00</span> 2020-01-01 <span style="color: #949494;">10:50:00</span> 9c8905e1c007… encounter  -<span style="color: #BB0000;">2.44</span>   50.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2020-01-01 <span style="color: #949494;">06:00:00</span> 2020-01-01 <span style="color: #949494;">08:30:00</span> 8822076ecce8… encounter  34.7   129. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020-01-01 <span style="color: #949494;">00:50:00</span> 2020-01-01 <span style="color: #949494;">03:10:00</span> b9f97eda6297… encounter  30.1   122. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2020-01-01 <span style="color: #949494;">18:00:00</span> 2020-01-01 <span style="color: #949494;">21:20:00</span> e5fc17eae361… encounter  38.5   121. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2020-01-01 <span style="color: #949494;">19:00:00</span> 2020-01-01 <span style="color: #949494;">21:30:00</span> e8d849c5554c… encounter  38.5   121. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2020-01-01 <span style="color: #949494;">10:50:00</span> 2020-01-01 <span style="color: #949494;">14:50:00</span> 62c229a0f918… encounter -<span style="color: #BB0000;">18.2</span>   -<span style="color: #BB0000;">79.1</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 276 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 10 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vessel_type &lt;chr&gt;, vessel_publicAuthorizations &lt;list&gt;, event_info &lt;list&gt;</span></span></span></code></pre></div>
<blockquote>
<p><em>Note</em>: We do not recommend trying too large downloads, such
as all sencounters for all vessels over a long period of time. This will
possibly return time out (524) errors. Our team is working on a bulk
download solution for the future.</p>
</blockquote>
</div>
<div class="section level4">
<h4 id="events-in-a-specific-area">Events in a specific area<a class="anchor" aria-label="anchor" href="#events-in-a-specific-area"></a>
</h4>
<p>You can provide a polygon in <code>sf</code> format or the region
code (such as an EEZ code) to filter the raster. Check the function
documentation for more information about parameters <code>region</code>
and <code>region_source</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="co"># fishing events in user shapefile</span></span>
<span><span class="va">test_polygon</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="op">-</span><span class="fl">70</span>, xmax <span class="op">=</span> <span class="op">-</span><span class="fl">40</span>, ymin <span class="op">=</span> <span class="op">-</span><span class="fl">10</span>, ymax <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sfc.html" class="external-link">st_as_sfc</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'FISHING'</span>,</span>
<span>               start_date <span class="op">=</span> <span class="st">"2020-10-01"</span>,</span>
<span>               end_date <span class="op">=</span> <span class="st">"2020-10-31"</span>,</span>
<span>               region <span class="op">=</span> <span class="va">test_polygon</span>,</span>
<span>               region_source <span class="op">=</span> <span class="st">'USER_SHAPEFILE'</span>,</span>
<span>               key <span class="op">=</span> <span class="fu"><a href="../reference/gfw_auth.html">gfw_auth</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 59 events from GFW"</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 59 × 16</span></span></span>
<span><span class="co">#&gt;    start               end                 eventId       eventType     lat   lon</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2020-10-20 <span style="color: #949494;">03:23:35</span> 2020-10-20 <span style="color: #949494;">16:14:26</span> 97790a3a15dc… fishing    4.89   -<span style="color: #BB0000;">51.8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2020-10-19 <span style="color: #949494;">11:28:05</span> 2020-10-19 <span style="color: #949494;">15:56:47</span> 52b41baac7ea… fishing    0.376  -<span style="color: #BB0000;">47.8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020-10-11 <span style="color: #949494;">20:13:50</span> 2020-10-12 <span style="color: #949494;">02:24:29</span> 2dd889e7f9ec… fishing    0.140  -<span style="color: #BB0000;">47.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2020-10-25 <span style="color: #949494;">13:25:27</span> 2020-10-25 <span style="color: #949494;">19:48:17</span> 75143d8026e8… fishing    0.193  -<span style="color: #BB0000;">47.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2020-10-22 <span style="color: #949494;">01:59:54</span> 2020-10-22 <span style="color: #949494;">03:58:15</span> 2ed40086d273… fishing   -<span style="color: #BB0000;">0.063</span><span style="color: #BB0000; text-decoration: underline;">5</span> -<span style="color: #BB0000;">47.8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2020-10-11 <span style="color: #949494;">10:42:33</span> 2020-10-11 <span style="color: #949494;">14:06:06</span> 791924103dda… fishing    0.183  -<span style="color: #BB0000;">47.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020-10-03 <span style="color: #949494;">05:50:14</span> 2020-10-05 <span style="color: #949494;">03:35:27</span> b68b49e7e365… fishing    4.73   -<span style="color: #BB0000;">51.5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2020-10-01 <span style="color: #949494;">12:54:31</span> 2020-10-01 <span style="color: #949494;">21:26:31</span> 083f87bff859… fishing    4.75   -<span style="color: #BB0000;">51.6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2020-10-05 <span style="color: #949494;">08:50:27</span> 2020-10-06 <span style="color: #949494;">17:35:21</span> c75671db2488… fishing    4.71   -<span style="color: #BB0000;">51.5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2020-10-01 <span style="color: #949494;">23:29:31</span> 2020-10-03 <span style="color: #949494;">03:11:17</span> 4d538f3b37e2… fishing    4.74   -<span style="color: #BB0000;">51.5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 49 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 10 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vessel_type &lt;chr&gt;, vessel_publicAuthorizations &lt;list&gt;, event_info &lt;list&gt;</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="events-for-specific-vessels">Events for specific vessels<a class="anchor" aria-label="anchor" href="#events-for-specific-vessels"></a>
</h4>
<p>To extract events for specific vessels, the Events API needs
<code>vesselId</code> as input, so you always need to use
<code><a href="../reference/get_vessel_info.html">get_vessel_info()</a></code> first to extract <code>vesselId</code>
from <code>$selfReportedInfo</code> in the response.</p>
<div class="section level5">
<h5 id="single-vessel-events">Single vessel events<a class="anchor" aria-label="anchor" href="#single-vessel-events"></a>
</h5>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vessel_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>query <span class="op">=</span> <span class="fl">224224000</span>, key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1 total vessels</span></span>
<span><span class="va">vessel_info</span><span class="op">$</span><span class="va">selfReportedInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 14</span></span></span>
<span><span class="co">#&gt;   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 6632c9eb8… 3061… AGURTZA… AGURTZAB… BES   PJBL     8733…          <span style="text-decoration: underline;">418</span>581</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 3c99c326d… 2242… AGURTZA… AGURTZAB… ESP   EBSJ     8733…          <span style="text-decoration: underline;">135</span>057</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></span></code></pre></div>
<p>The results show this vessel’s story is grouped in two
<code>vesselIds</code>.</p>
<p>To get a list of port visits for that vessel, you can use a single
<code>vesselId</code> of your interest:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="va">vessel_info</span><span class="op">$</span><span class="va">selfReportedInfo</span><span class="op">$</span><span class="va">vesselId</span></span>
<span><span class="va">id</span></span>
<span><span class="co">#&gt; [1] "6632c9eb8-8009-abdb-baf9-b67d65f20510"</span></span>
<span><span class="co">#&gt; [2] "3c99c326d-dd2e-175d-626f-a3c488a4342b"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'PORT_VISIT'</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>          confidences <span class="op">=</span> <span class="fl">4</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 25 events from GFW"</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 25 × 15</span></span></span>
<span><span class="co">#&gt;    start               end                 eventId        eventType   lat    lon</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2020-06-25 <span style="color: #949494;">09:13:36</span> 2020-06-25 <span style="color: #949494;">20:31:10</span> 29863e18bfa98… port_vis… 16.9  -<span style="color: #BB0000;">25.0</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2020-06-20 <span style="color: #949494;">12:33:45</span> 2020-06-20 <span style="color: #949494;">19:43:10</span> a8f5401a3bbec… port_vis… 14.6  -<span style="color: #BB0000;">17.4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020-02-23 <span style="color: #949494;">12:44:03</span> 2020-02-24 <span style="color: #949494;">10:35:02</span> 672bc20417b3c… port_vis… 16.9  -<span style="color: #BB0000;">25.0</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2020-08-08 <span style="color: #949494;">06:40:40</span> 2020-08-10 <span style="color: #949494;">08:13:39</span> acd48bf28e6b3… port_vis… 14.6  -<span style="color: #BB0000;">17.4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2020-03-05 <span style="color: #949494;">13:28:59</span> 2020-03-10 <span style="color: #949494;">02:26:24</span> 0d845cb306614… port_vis…  5.20  -<span style="color: #BB0000;">4.02</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2020-04-01 <span style="color: #949494;">05:55:58</span> 2020-04-05 <span style="color: #949494;">15:03:18</span> 953e1cf8246db… port_vis…  5.23  -<span style="color: #BB0000;">4.02</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020-04-19 <span style="color: #949494;">06:16:46</span> 2020-04-21 <span style="color: #949494;">14:02:19</span> 5ad5c93c5448d… port_vis… 28.1  -<span style="color: #BB0000;">15.4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2020-07-06 <span style="color: #949494;">06:45:06</span> 2020-07-12 <span style="color: #949494;">09:13:39</span> 6845cffacfe25… port_vis…  5.20  -<span style="color: #BB0000;">4.02</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2020-11-01 <span style="color: #949494;">14:17:48</span> 2020-11-06 <span style="color: #949494;">12:25:53</span> f39043169c3c4… port_vis…  5.20  -<span style="color: #BB0000;">4.02</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2021-05-19 <span style="color: #949494;">22:46:40</span> 2021-06-08 <span style="color: #949494;">08:54:49</span> ed0ffc8600077… port_vis… 14.7  -<span style="color: #BB0000;">17.4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 9 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vessel_type &lt;chr&gt;, event_info &lt;list&gt;</span></span></span></code></pre></div>
<p>But to get the whole event history, you can also use the whole vector
of <code>vesselId</code> for that vessel:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'PORT_VISIT'</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">id</span>, <span class="co">#using the whole vector of vesselIds</span></span>
<span>          confidences <span class="op">=</span> <span class="fl">4</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 74 events from GFW"</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 74 × 15</span></span></span>
<span><span class="co">#&gt;    start               end                 eventId        eventType   lat    lon</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2019-08-05 <span style="color: #949494;">07:57:25</span> 2019-08-07 <span style="color: #949494;">14:33:40</span> 86eadd44ab4a9… port_vis… 14.6  -<span style="color: #BB0000;">17.4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2019-07-09 <span style="color: #949494;">09:31:01</span> 2019-07-13 <span style="color: #949494;">13:19:15</span> 557fe44f868f3… port_vis…  5.23  -<span style="color: #BB0000;">3.97</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2016-03-03 <span style="color: #949494;">05:47:02</span> 2016-03-03 <span style="color: #949494;">11:46:33</span> 4a7f8049e265e… port_vis…  5.20  -<span style="color: #BB0000;">4.02</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2015-12-29 <span style="color: #949494;">14:52:13</span> 2016-01-03 <span style="color: #949494;">16:38:59</span> ecd93cc08b521… port_vis…  5.29  -<span style="color: #BB0000;">4.01</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2018-09-19 <span style="color: #949494;">06:32:12</span> 2018-09-22 <span style="color: #949494;">11:02:34</span> 04989af5b8533… port_vis…  5.23  -<span style="color: #BB0000;">3.97</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2019-11-15 <span style="color: #949494;">14:15:11</span> 2019-11-19 <span style="color: #949494;">07:49:20</span> bbeed3f884a6f… port_vis…  5.20  -<span style="color: #BB0000;">4.02</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2019-09-29 <span style="color: #949494;">05:40:18</span> 2019-10-02 <span style="color: #949494;">17:16:39</span> baa809792afe6… port_vis… 14.6  -<span style="color: #BB0000;">17.4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2016-03-31 <span style="color: #949494;">04:43:41</span> 2016-04-02 <span style="color: #949494;">09:07:10</span> 617db86945865… port_vis…  5.20  -<span style="color: #BB0000;">4.02</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2018-11-06 <span style="color: #949494;">17:27:26</span> 2018-11-11 <span style="color: #949494;">09:43:00</span> a1e988d982768… port_vis…  5.23  -<span style="color: #BB0000;">4.02</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2017-05-13 <span style="color: #949494;">07:10:29</span> 2017-05-13 <span style="color: #949494;">09:11:40</span> 757664f40518d… port_vis… 14.7  -<span style="color: #BB0000;">17.3</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 64 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 9 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vessel_type &lt;chr&gt;, event_info &lt;list&gt;</span></span></span></code></pre></div>
<blockquote>
<p><em>Note</em>: Try narrowing your search using
<code>start_date</code> and <code>end_date</code> if the request is too
large and returns a time out error (524)</p>
</blockquote>
<p>When a date range is provided to <code><a href="../reference/get_event.html">get_event()</a></code> using both
<code>start_date</code> and <code>end_date</code>, any event overlapping
that range will be returned, including events that start prior to
<code>start_date</code> or end after <code>end_date</code>. If just
<code>start_date</code> or <code>end_date</code> are provided, results
will include all events that end after <code>start_date</code> or begin
prior to <code>end_date</code>, respectively.</p>
</div>
<div class="section level5">
<h5 id="multiple-vessel-events">Multiple vessel events<a class="anchor" aria-label="anchor" href="#multiple-vessel-events"></a>
</h5>
<p>As another example, let’s combine the Vessels and Events APIs to get
fishing events for a list of USA-flagged trawlers:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download the list of USA trawlers</span></span>
<span><span class="va">usa_trawlers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span></span>
<span>  where <span class="op">=</span> <span class="st">"flag='USA' AND geartypes='TRAWLERS'"</span>,</span>
<span>  search_type <span class="op">=</span> <span class="st">"search"</span>,</span>
<span>  key <span class="op">=</span> <span class="va">key</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span> <span class="co">#uncomment this if you want an estimate progress of the download</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; 4144 total vessels</span></span>
<span><span class="co">#&gt; Downloading 2 %Downloading 3 %Downloading 4 %Downloading 6 %Downloading 7 %Downloading 8 %Downloading 9 %Downloading 10 %Downloading 12 %Downloading 13 %Downloading 14 %Downloading 15 %Downloading 16 %Downloading 18 %Downloading 19 %Downloading 20 %Downloading 21 %Downloading 22 %Downloading 24 %Downloading 25 %Downloading 26 %Downloading 27 %Downloading 28 %Downloading 30 %Downloading 31 %Downloading 32 %Downloading 33 %Downloading 34 %Downloading 36 %Downloading 37 %Downloading 38 %Downloading 39 %Downloading 40 %Downloading 42 %Downloading 43 %Downloading 44 %Downloading 45 %Downloading 46 %Downloading 48 %Downloading 49 %Downloading 50 %Downloading 51 %Downloading 53 %Downloading 54 %Downloading 55 %Downloading 56 %Downloading 57 %Downloading 59 %Downloading 60 %Downloading 61 %Downloading 62 %Downloading 63 %Downloading 65 %Downloading 66 %Downloading 67 %Downloading 68 %Downloading 69 %Downloading 71 %Downloading 72 %Downloading 73 %Downloading 74 %Downloading 75 %Downloading 77 %Downloading 78 %Downloading 79 %Downloading 80 %Downloading 81 %Downloading 83 %Downloading 84 %Downloading 85 %Downloading 86 %Downloading 87 %Downloading 89 %Downloading 90 %Downloading 91 %Downloading 92 %Downloading 93 %Downloading 95 %Downloading 96 %Downloading 97 %Downloading 98 %Downloading 100 %</span></span></code></pre></div>
<p>This list returns 6592 <code>vesselIds</code> belonging to 4144
vessels.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">usa_trawlers</span><span class="op">$</span><span class="va">selfReportedInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6,592 × 14</span></span></span>
<span><span class="co">#&gt;    index vesselId  ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1 c698dfcc… 3677… TREMONT  TREMONT   USA   WDJ5556  <span style="color: #BB0000;">NA</span>              <span style="text-decoration: underline;">71</span>116</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2 64907178… 3662… SUSAN L  SUSANL    USA   WQZ4631  <span style="color: #BB0000;">NA</span>            1<span style="text-decoration: underline;">539</span>173</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     3 5e6c03ec… 3682… CAPTAIN… CAPTAINT… USA   WDN3761  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">786</span>924</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     3 045a49e9… 3680… AMG      AMG       USA   WDK2542  <span style="color: #BB0000;">NA</span>               <span style="text-decoration: underline;">9</span>964</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     3 161cee78… 3677… ATLANTI… ATLANTIS1 USA   WDI5729  <span style="color: #BB0000;">NA</span>               <span style="text-decoration: underline;">3</span>288</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     4 242fa3fb… 3670… TAUNY A… TAUNYANN  USA   WDC4097  <span style="color: #BB0000;">NA</span>            2<span style="text-decoration: underline;">038</span>373</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     5 0dddd2a8… 3673… SHAMROCK SHAMROCK  USA   WDD8722  <span style="color: #BB0000;">NA</span>               <span style="text-decoration: underline;">2</span>720</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     5 695b254f… 3673… SHAMROCK SHAMROCK  USA   <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>                477</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     5 ac994bda… 3673… <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>        USA   WDD8722  <span style="color: #BB0000;">NA</span>               <span style="text-decoration: underline;">3</span>179</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     6 47b94476… 3668… ORION    ORION     USA   <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>              <span style="text-decoration: underline;">23</span>007</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6,582 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></span></code></pre></div>
<p>For clarity, we should try to send groups of <code>vesselIds</code>
that belong to the same vessels. For this, we should check the
<code>index</code> column in the <code>$selfReportedInfo</code>
dataset.</p>
<blockquote>
<p><em>Note</em>: <code><a href="../reference/get_event.html">get_event()</a></code> can receive up to 20 vessel
ids at a time</p>
</blockquote>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">each_USA_trawler</span> <span class="op">&lt;-</span> <span class="va">usa_trawlers</span><span class="op">$</span><span class="va">selfReportedInfo</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index"</span>, <span class="st">"vesselId"</span><span class="op">)</span><span class="op">]</span> </span>
<span><span class="co"># how many vessels correspond to the first ten vessels. </span></span>
<span><span class="va">each_USA_trawler</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">index</span> <span class="op">&lt;=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 21 × 2</span></span></span>
<span><span class="co">#&gt;    index vesselId                             </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1 c698dfcc5-5c85-9329-b1ac-8b3656ea9233</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2 64907178b-b02a-f401-afa1-b3a099d7a142</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     3 5e6c03ecd-d774-2d00-6b39-21ab335fca3b</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     3 045a49e97-7d67-6ef7-219c-fd1a270af740</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     3 161cee78f-f568-b97e-cb75-5348a2d811ba</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     4 242fa3fbf-fa03-eb47-5855-f0880b8e7acf</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     5 0dddd2a83-3626-24f1-0fe6-3c4d45bbb409</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     5 695b254f7-7e6c-ff50-dc63-55139d9e0101</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     5 ac994bdab-b59c-9fcc-659e-40179e5dddfb</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     6 47b944765-5819-b2ab-8c2e-cfc82bd2e82c</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more rows</span></span></span>
<span><span class="co"># It's exactly 20 in this case to we will request those.</span></span>
<span><span class="va">ten_usa_trawlers</span> <span class="op">&lt;-</span> <span class="va">each_USA_trawler</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">index</span> <span class="op">&lt;=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>The first 20 <code>vesselIds</code> correspond to 10 vessels
according to <code>index</code>.</p>
<p>Let’s pass the vector of vessel ids to Events API. Now get the list
of fishing events for these trawlers in January, 2020:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'FISHING'</span>,</span>
<span>                    vessels <span class="op">=</span> <span class="va">ten_usa_trawlers</span><span class="op">$</span><span class="va">vesselId</span>,</span>
<span>                    start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>, </span>
<span>                    end_date <span class="op">=</span> <span class="st">"2020-02-01"</span>, </span>
<span>                    key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 31 events from GFW"</span></span>
<span><span class="va">events</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 31 × 16</span></span></span>
<span><span class="co">#&gt;    start               end                 eventId         eventType   lat   lon</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2020-01-21 <span style="color: #949494;">18:13:58</span> 2020-01-22 <span style="color: #949494;">00:01:04</span> 1ad29cb3dcfcaf… fishing    38.0 -<span style="color: #BB0000;">73.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2020-01-29 <span style="color: #949494;">06:29:45</span> 2020-01-29 <span style="color: #949494;">21:15:18</span> 4ffea71b304a65… fishing    38.0 -<span style="color: #BB0000;">73.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020-01-09 <span style="color: #949494;">21:14:43</span> 2020-01-10 <span style="color: #949494;">10:16:36</span> c60e52370d48a7… fishing    38.1 -<span style="color: #BB0000;">73.8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2020-01-10 <span style="color: #949494;">18:21:53</span> 2020-01-12 <span style="color: #949494;">03:13:04</span> 6739137b68e5fb… fishing    38.0 -<span style="color: #BB0000;">73.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2020-01-22 <span style="color: #949494;">03:07:24</span> 2020-01-23 <span style="color: #949494;">03:57:57</span> 7812ab3b7950fc… fishing    38.0 -<span style="color: #BB0000;">73.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2020-01-24 <span style="color: #949494;">14:05:32</span> 2020-01-24 <span style="color: #949494;">22:02:36</span> 761b7338d7e866… fishing    38.0 -<span style="color: #BB0000;">74.0</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020-01-21 <span style="color: #949494;">10:19:37</span> 2020-01-21 <span style="color: #949494;">15:31:33</span> b07cba0b120d99… fishing    38.1 -<span style="color: #BB0000;">73.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2020-01-09 <span style="color: #949494;">12:30:54</span> 2020-01-09 <span style="color: #949494;">17:44:54</span> 51c5140b261fca… fishing    38.4 -<span style="color: #BB0000;">73.5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2020-01-23 <span style="color: #949494;">11:55:49</span> 2020-01-23 <span style="color: #949494;">22:03:58</span> 6662cc521a4c81… fishing    38.0 -<span style="color: #BB0000;">73.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2020-01-30 <span style="color: #949494;">12:02:27</span> 2020-01-30 <span style="color: #949494;">21:34:23</span> 9e8b988bfdfa30… fishing    38.0 -<span style="color: #BB0000;">73.9</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 21 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 10 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vessel_type &lt;chr&gt;, vessel_publicAuthorizations &lt;list&gt;, event_info &lt;list&gt;</span></span></span></code></pre></div>
<p>The columns starting by <code>vessel</code> have the vessel-related
information for each event: <code>vesselId</code>,
<code>vessel_name</code>, <code>ssvid</code> (MMSI), <code>flag</code>,
<code>vessel type</code> and public authorizations.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">events</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"vessel"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 31 × 6</span></span></span>
<span><span class="co">#&gt;    vesselId                     vessel_name vessel_ssvid vessel_flag vessel_type</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 64907178b-b02a-f401-afa1-b3… SUSAN L     366211560    USA         fishing    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 21 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: vessel_publicAuthorizations &lt;list&gt;</span></span></span></code></pre></div>
<p>When no events are available, the <code><a href="../reference/get_event.html">get_event()</a></code> function
returns nothing.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'FISHING'</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">ten_usa_trawlers</span><span class="op">$</span><span class="va">vesselId</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>          start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Your request returned zero results"</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="fishing-effort-api">Fishing effort API<a class="anchor" aria-label="anchor" href="#fishing-effort-api"></a>
</h3>
<p>The <code><a href="../reference/get_raster.html">get_raster()</a></code> function gets a raster from the <a href="https://globalfishingwatch.org/our-apis/documentation#map-visualization-4wings-api" class="external-link">4Wings
API</a> and converts the response to a data frame. In order to use it,
you should specify:</p>
<ul>
<li>The spatial resolution, which can be <code>LOW</code> (0.1 degree)
or <code>HIGH</code> (0.01 degree)</li>
<li>The temporal resolution, which can be <code>HOURLY</code>,
<code>DAILY</code>, <code>MONTHLY</code>, <code>YEARLY</code> or
<code>ENTIRE</code>.</li>
<li>The variable to group by: <code>FLAG</code>, <code>GEARTYPE</code>,
<code>FLAGANDGEARTYPE</code>, <code>MMSI</code> or
<code>VESSEL_ID</code>
</li>
<li>The date range <code>note: this must be 366 days or less</code>
</li>
<li>The region polygon in <code>sf</code> format or the region code
(such as an EEZ code) to filter the raster</li>
<li>The source for the specified region. Currently, <code>EEZ</code>,
<code>MPA</code>, <code>RFMO</code> or <code>USER_SHAPEFILE</code> (for
<code>sf</code> shapefiles).</li>
</ul>
<div class="section level4">
<h4 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a>
</h4>
<p>We added a sample shapefile inside <code>gfwr</code> to show how
<code>'USER_SHAPEFILE'</code> works:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"test_shape"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/get_raster.html">get_raster</a></span><span class="op">(</span></span>
<span>  spatial_resolution <span class="op">=</span> <span class="st">'LOW'</span>,</span>
<span>  temporal_resolution <span class="op">=</span> <span class="st">'YEARLY'</span>,</span>
<span>  group_by <span class="op">=</span> <span class="st">'FLAG'</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">'2021-01-01'</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">'2021-02-01'</span>,</span>
<span>  region <span class="op">=</span> <span class="va">test_shape</span>,</span>
<span>  region_source <span class="op">=</span> <span class="st">'USER_SHAPEFILE'</span>,</span>
<span>  key <span class="op">=</span> <span class="va">key</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">2682</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (1): flag</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (5): Lat, Lon, Time Range, Vessel IDs, Apparent Fishing Hours</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,682 × 6</span></span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  16.8  60.6         <span style="text-decoration: underline;">2</span>021 CHN              1                     6.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  16.7  60.6         <span style="text-decoration: underline;">2</span>021 CHN              1                    10.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  16.7  60.7         <span style="text-decoration: underline;">2</span>021 CHN              1                     3.46</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  17.2  61.5         <span style="text-decoration: underline;">2</span>021 CHN              1                     2.96</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  16.6  61.7         <span style="text-decoration: underline;">2</span>021 CHN              1                     5.88</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  16.7  61.7         <span style="text-decoration: underline;">2</span>021 CHN              1                     5.44</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  16.6  61.6         <span style="text-decoration: underline;">2</span>021 CHN              1                    16.6 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  17    62.4         <span style="text-decoration: underline;">2</span>021 CHN              1                     1.64</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  16.9  62.4         <span style="text-decoration: underline;">2</span>021 CHN              1                     6.38</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  16.9  62.3         <span style="text-decoration: underline;">2</span>021 CHN              1                     7.85</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,672 more rows</span></span></span></code></pre></div>
<p>If you want raster data from a particular EEZ, you can use the
<code><a href="../reference/get_region_id.html">get_region_id()</a></code> function to get the EEZ id, and enter that
code in the <code>region</code> argument of <code><a href="../reference/get_raster.html">get_raster()</a></code>
instead of the region shapefile (ensuring you specify the
<code>region_source</code> as <code>'EEZ'</code>:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># use EEZ function to get EEZ code of Cote d'Ivoire</span></span>
<span><span class="va">code_eez</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'CIV'</span>, region_source <span class="op">=</span> <span class="st">'EEZ'</span>, key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">'LOW'</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">'YEARLY'</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">'FLAG'</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2021-10-01"</span>,</span>
<span>           region <span class="op">=</span> <span class="va">code_eez</span><span class="op">$</span><span class="va">id</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">'EEZ'</span>,</span>
<span>           key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">596</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (1): flag</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (5): Lat, Lon, Time Range, Vessel IDs, Apparent Fishing Hours</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 596 × 6</span></span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   1.5  -<span style="color: #BB0000;">6.6</span>         <span style="text-decoration: underline;">2</span>021 CPV              1                     3.97</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   4    -<span style="color: #BB0000;">6.9</span>         <span style="text-decoration: underline;">2</span>021 FRA              1                     7.4 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   5.2  -<span style="color: #BB0000;">4</span>           <span style="text-decoration: underline;">2</span>021 ESP              9                    13.6 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   4.3  -<span style="color: #BB0000;">4.1</span>         <span style="text-decoration: underline;">2</span>021 FRA              2                     3.57</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   3.7  -<span style="color: #BB0000;">4</span>           <span style="text-decoration: underline;">2</span>021 ESP              1                     0.94</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   4.5  -<span style="color: #BB0000;">3.8</span>         <span style="text-decoration: underline;">2</span>021 SLV              1                     8.13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   3.4  -<span style="color: #BB0000;">3.9</span>         <span style="text-decoration: underline;">2</span>021 BES              1                     1.65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   5    -<span style="color: #BB0000;">5.3</span>         <span style="text-decoration: underline;">2</span>021 CHN              2                    43.0 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   4.6  -<span style="color: #BB0000;">5.2</span>         <span style="text-decoration: underline;">2</span>021 GHA              1                     2.97</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   4.4  -<span style="color: #BB0000;">3.9</span>         <span style="text-decoration: underline;">2</span>021 SEN              1                     1.84</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 586 more rows</span></span></span></code></pre></div>
<p>You could search for just one word in the name of the EEZ and then
decide which one you want:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fu"><a href="../reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'France'</span>, region_source <span class="op">=</span> <span class="st">'EEZ'</span>, key <span class="op">=</span> <span class="va">key</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;      id label                            iso3 </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">5</span>677 France                           FRA  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> <span style="text-decoration: underline;">48</span>966 Joint regime area Spain / France FRA  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> <span style="text-decoration: underline;">48</span>976 Joint regime area Italy / France FRA</span></span></code></pre></div>
<p>From the results above, let’s say we’re interested in the French
Exclusive Economic Zone, <code>5677</code></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">'LOW'</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">'YEARLY'</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">'FLAG'</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2021-10-01"</span>,</span>
<span>           region <span class="op">=</span> <span class="fl">5677</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">'EEZ'</span>,</span>
<span>           key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">5433</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (1): flag</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (5): Lat, Lon, Time Range, Vessel IDs, Apparent Fishing Hours</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5,433 × 6</span></span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  51     1.4         <span style="text-decoration: underline;">2</span>021 NLD              5                     8.62</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  50.9   1.4         <span style="text-decoration: underline;">2</span>021 FRA             28                   885.  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  50.9   1.3         <span style="text-decoration: underline;">2</span>021 FRA             23                    87   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  50.8   1.3         <span style="text-decoration: underline;">2</span>021 BEL              1                     4.86</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  50.8   1.3         <span style="text-decoration: underline;">2</span>021 FRA             39                   685.  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  50.8   1.2         <span style="text-decoration: underline;">2</span>021 GBR             11                   255.  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  50.7   1.4         <span style="text-decoration: underline;">2</span>021 FRA             53                  <span style="text-decoration: underline;">2</span>669.  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  51.5   2.1         <span style="text-decoration: underline;">2</span>021 BEL              1                     7.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  51.3   2.1         <span style="text-decoration: underline;">2</span>021 NLD             19                    97.2 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  51.2   1.9         <span style="text-decoration: underline;">2</span>021 FRA             20                   560.  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5,423 more rows</span></span></span></code></pre></div>
<p>A similar approach can be used to search for a specific Marine
Protected Area, in this case the Phoenix Island Protected Area
(PIPA)</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># use region id function to get MPA code of Phoenix Island Protected Area</span></span>
<span><span class="va">code_mpa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'Phoenix'</span>,</span>
<span>                          region_source <span class="op">=</span> <span class="st">'MPA'</span>,</span>
<span>                          key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">'LOW'</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">'YEARLY'</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">'FLAG'</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2015-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2015-06-01"</span>,</span>
<span>           region <span class="op">=</span> <span class="va">code_mpa</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">'MPA'</span>,</span>
<span>           key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">38</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (1): flag</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (5): Lat, Lon, Time Range, Vessel IDs, Apparent Fishing Hours</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 38 × 6</span></span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  -<span style="color: #BB0000;">3.6</span> -<span style="color: #BB0000;">176.</span>         <span style="text-decoration: underline;">2</span>015 KIR              1                     6.07</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  -<span style="color: #BB0000;">3.1</span> -<span style="color: #BB0000;">176.</span>         <span style="text-decoration: underline;">2</span>015 KOR              1                     0.91</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  -<span style="color: #BB0000;">3.4</span> -<span style="color: #BB0000;">176.</span>         <span style="text-decoration: underline;">2</span>015 KOR              1                     2.38</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  -<span style="color: #BB0000;">3.5</span> -<span style="color: #BB0000;">176.</span>         <span style="text-decoration: underline;">2</span>015 KOR              1                     9.74</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  -<span style="color: #BB0000;">3.6</span> -<span style="color: #BB0000;">176.</span>         <span style="text-decoration: underline;">2</span>015 KOR              2                     9.34</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  -<span style="color: #BB0000;">3.6</span> -<span style="color: #BB0000;">176.</span>         <span style="text-decoration: underline;">2</span>015 KOR              1                     1.98</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  -<span style="color: #BB0000;">3.6</span> -<span style="color: #BB0000;">176.</span>         <span style="text-decoration: underline;">2</span>015 KOR              1                     7.9 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  -<span style="color: #BB0000;">4.2</span> -<span style="color: #BB0000;">176.</span>         <span style="text-decoration: underline;">2</span>015 KOR              1                     0.05</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  -<span style="color: #BB0000;">1</span>   -<span style="color: #BB0000;">170.</span>         <span style="text-decoration: underline;">2</span>015 KOR              1                     2.39</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  -<span style="color: #BB0000;">2.2</span> -<span style="color: #BB0000;">176.</span>         <span style="text-decoration: underline;">2</span>015 KIR              1                     1.89</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 28 more rows</span></span></span></code></pre></div>
<p>It is also possible to filter rasters to one of the five regional
fisheries management organizations (RFMO) that manage tuna and tuna-like
species. These include <code>"ICCAT"</code>,
<code>"IATTC"</code>,<code>"IOTC"</code>, <code>"CCSBT"</code> and
<code>"WCPFC"</code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_raster.html">get_raster</a></span><span class="op">(</span>spatial_resolution <span class="op">=</span> <span class="st">'LOW'</span>,</span>
<span>           temporal_resolution <span class="op">=</span> <span class="st">'DAILY'</span>,</span>
<span>           group_by <span class="op">=</span> <span class="st">'FLAG'</span>,</span>
<span>           start_date <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>           end_date <span class="op">=</span> <span class="st">"2021-01-04"</span>,</span>
<span>           region <span class="op">=</span> <span class="st">'ICCAT'</span>,</span>
<span>           region_source <span class="op">=</span> <span class="st">'RFMO'</span>,</span>
<span>           key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">16709</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>  (1): flag</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span>  (4): Lat, Lon, Vessel IDs, Apparent Fishing Hours</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">date</span> (1): Time Range</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 16,709 × 6</span></span></span>
<span><span class="co">#&gt;      Lat   Lon `Time Range` flag  `Vessel IDs` `Apparent Fishing Hours`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  69.4 -<span style="color: #BB0000;">58.5</span> 2021-01-01   GRL              1                     4.03</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  69.4 -<span style="color: #BB0000;">58.4</span> 2021-01-01   GRL              1                     1.26</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  69.3 -<span style="color: #BB0000;">58.4</span> 2021-01-01   GRL              1                     3.21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  69.1 -<span style="color: #BB0000;">58.5</span> 2021-01-01   GRL              1                     1.24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  69.1 -<span style="color: #BB0000;">58.4</span> 2021-01-01   GRL              1                     1.05</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  69   -<span style="color: #BB0000;">58.5</span> 2021-01-01   GRL              2                     5.71</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  69   -<span style="color: #BB0000;">58.4</span> 2021-01-01   GRL              1                     0.71</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  67.8 -<span style="color: #BB0000;">56.6</span> 2021-01-03   GRL              2                     1.78</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  67.7 -<span style="color: #BB0000;">56.6</span> 2021-01-02   GRL              3                    39.6 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  67.8 -<span style="color: #BB0000;">56.6</span> 2021-01-02   GRL              1                     1.25</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16,699 more rows</span></span></span></code></pre></div>
<p>The <code><a href="../reference/get_region_id.html">get_region_id()</a></code> function also works in reverse. If a
region id is passed as a <code>numeric</code> to the function as the
<code>region_name</code>, the corresponding region label or iso3 code
can be returned. This is especially useful when events are returned with
regions.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using same example as above</span></span>
<span><span class="fu"><a href="../reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">'FISHING'</span>,</span>
<span>          vessels <span class="op">=</span> <span class="va">ten_usa_trawlers</span><span class="op">$</span><span class="va">vesselId</span>,</span>
<span>          start_date <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>          end_date <span class="op">=</span> <span class="st">"2020-02-01"</span>,</span>
<span>          key <span class="op">=</span> <span class="va">key</span></span>
<span>          <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="co"># extract EEZ id code</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eez <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span></span>
<span>    <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">regions</span>, <span class="fu">purrr</span><span class="fu">::</span><span class="va"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span>, <span class="st">'eez'</span><span class="op">)</span>,</span>
<span>               <span class="va">paste0</span>, collapse <span class="op">=</span> <span class="st">','</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">eventId</span>, <span class="va">eventType</span>, <span class="va">start</span>, <span class="va">end</span>, <span class="va">lat</span>, <span class="va">lon</span>, <span class="va">eez</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eez_name <span class="op">=</span> <span class="fu"><a href="../reference/get_region_id.html">get_region_id</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">eez</span><span class="op">)</span>,</span>
<span>                                         region_source <span class="op">=</span> <span class="st">'EEZ'</span>,</span>
<span>                                         key <span class="op">=</span> <span class="va">key</span><span class="op">)</span><span class="op">$</span><span class="va">label</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">start</span>, <span class="op">-</span><span class="va">end</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Downloading 31 events from GFW"</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 31 × 6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Rowwise: </span></span></span>
<span><span class="co">#&gt;    eventId                          eventType   lat   lon eez   eez_name     </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1ad29cb3dcfcafaf027afc7d0e5c5c22 fishing    38.0 -<span style="color: #BB0000;">73.9</span> 8456  United States</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 4ffea71b304a651b9c17b580f1d06091 fishing    38.0 -<span style="color: #BB0000;">73.9</span> 8456  United States</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> c60e52370d48a741413094daec2d78ca fishing    38.1 -<span style="color: #BB0000;">73.8</span> 8456  United States</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 6739137b68e5fb477de38226f57892f7 fishing    38.0 -<span style="color: #BB0000;">73.9</span> 8456  United States</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 7812ab3b7950fc01a2e0e1e8fda3710a fishing    38.0 -<span style="color: #BB0000;">73.9</span> 8456  United States</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 761b7338d7e8667cbb220f7c2c49af43 fishing    38.0 -<span style="color: #BB0000;">74.0</span> 8456  United States</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> b07cba0b120d99d177191663a3e1c67d fishing    38.1 -<span style="color: #BB0000;">73.9</span> 8456  United States</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 51c5140b261fca6214ea872209b74d85 fishing    38.4 -<span style="color: #BB0000;">73.5</span> 8456  United States</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 6662cc521a4c81f9943f6f006b939770 fishing    38.0 -<span style="color: #BB0000;">73.9</span> 8456  United States</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 9e8b988bfdfa302f5c44b75f73208cf1 fishing    38.0 -<span style="color: #BB0000;">73.9</span> 8456  United States</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 21 more rows</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="when-your-api-request-times-out">When your API request times out<a class="anchor" aria-label="anchor" href="#when-your-api-request-times-out"></a>
</h4>
<p>For API performance reasons, the <code><a href="../reference/get_raster.html">get_raster()</a></code> function
restricts individual queries to a single year of data. However, even
with this restriction, it is possible for API request to time out before
it completes. When this occurs, the initial <code><a href="../reference/get_raster.html">get_raster()</a></code>
call will return an HTTP 524 error, and subsequent API requests using
any <code>gfwr</code> <code>get_</code> function will return an HTTP 429
error until the original request completes:</p>
<blockquote>
<p>Error in <code><a href="https://httr2.r-lib.org/reference/req_perform.html" class="external-link">httr2::req_perform()</a></code>: ! HTTP 429 Too Many
Requests. • Your application token is not currently enabled to perform
more than one concurrent report. If you need to generate more than one
report concurrently, contact us at <a href="mailto:apis@globalfishingwatch.org" class="email">apis@globalfishingwatch.org</a></p>
</blockquote>
<p>Although no data was received, the request is still being processed
by the APIs and will become available when it completes. To account for
this, <code>gfwr</code> includes the <code><a href="../reference/get_last_report.html">get_last_report()</a></code>
function, which lets users request the results of their last API request
with <code><a href="../reference/get_raster.html">get_raster()</a></code>.</p>
<p>The <code><a href="../reference/get_last_report.html">get_last_report()</a></code> function will tell you if the APIs
are still processing your request and will download the results if the
request has finished successfully. You will receive an error message if
the request finished but resulted in an error or if it’s been &gt;30
minutes since the last report was generated using
<code><a href="../reference/get_raster.html">get_raster()</a></code>. For more information, see the <a href="https://globalfishingwatch.org/our-apis/documentation#get-last-report-generated" class="external-link">Get
last report generated endpoint</a> documentation on the GFW API
page.</p>
</div>
</div>
<div class="section level3">
<h3 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h3>
<p>We welcome all contributions to improve the package! Please read our
<a href="https://github.com/GlobalFishingWatch/gfwr/blob/main/Contributing.md" class="external-link">Contribution
Guide</a> and reach out!</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Tyler Clavelle, Rocío Joo, Nate Miller, Andrea Sánchez-Tapia.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>




  <!-- inserted at the end of the body -->

  </body>
</html>
