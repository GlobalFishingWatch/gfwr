<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using `get_vessel_info()`: the basics of vessel identity in `gfwr` • gfwr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using `get_vessel_info()`: the basics of vessel identity in `gfwr`">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WXTMN69');</script><!-- End Google Tag Manager -->
</head>
<body data-spy="scroll" data-target="#toc">
    <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXTMN69" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gfwr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/gfwr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/identity.html">Using `get_vessel_info()`: the basics of vessel identity in `gfwr`</a>
    </li>
    <li>
      <a href="../articles/making-maps.html">Making maps with `gfwr`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/GlobalFishingWatch/gfwr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using <code>get_vessel_info()</code>: the basics
of vessel identity in <code>gfwr</code>
</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/GlobalFishingWatch/gfwr/blob/HEAD/vignettes/articles/identity.Rmd" class="external-link"><code>vignettes/articles/identity.Rmd</code></a></small>
      <div class="hidden name"><code>identity.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/GlobalFishingWatch/gfwr" class="external-link">gfwr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette explains the use of <code><a href="../reference/get_vessel_info.html">get_vessel_info()</a></code> as a
key function to understand vessel identity and to use all the other
Global Fishing Watch API endpoints.</p>
<p>We discuss basic identity markers, why Vessel ID was created, the
structure of the <code><a href="../reference/get_vessel_info.html">get_vessel_info()</a></code> response and how to get
<strong><code>vesselId</code></strong> for use in the functions
<code><a href="../reference/get_event.html">get_event()</a></code> and <code><a href="../reference/get_event_stats.html">get_event_stats()</a></code>.</p>
<div class="section level3">
<h3 id="automatic-identification-system-ais">Automatic Identification System (AIS)<a class="anchor" aria-label="anchor" href="#automatic-identification-system-ais"></a>
</h3>
<p>The Automatic Identification System (AIS) is an automatic tracking
system originally developed to help preventing collisions between
vessels at sea. Vessels broadcast AIS to alert other vessels of their
presence, but terrestrial and satellite receivers can also receive these
messages and monitor vessel movements. AIS is at the core of Global
Fishing Watch analysis pipelines, including the AIS-based fishing effort
calculation displayed on our map and available through function
<code><a href="../reference/get_raster.html">get_raster()</a></code> in <code>gfwr</code>.</p>
<p>AIS messages include identity information about the vessel, such as
ship name, call sign, and International Maritime Organization (IMO)
number, as well as an identifier known as the Maritime Mobile Service
Identity (MMSI).</p>
<ul>
<li><p><strong>MMSI</strong> are nine-digit numbers broadcasted in AIS
messages. MMSIs are supposed to be unique for each vessel, but 1. a
vessel can change MMSIs throughout its lifecycle–for example when it’s
reflagged, because the first three digits refer to the flag country 2.
several vessels can broadcast the same MMSI at the same time. This
happens for many reasons, including the fact that data entry in AIS
messages is manual.</p></li>
<li><p><strong>Shipname</strong> and <strong>callsign</strong> can be
also transmitted in AIS messages but they are optional, not every
AIS-broadcasting vessel transmits them, and their transmission can be
inconsistent. Shipnames can also vary a lot in their spelling, requiring
some fuzzy matching to detect if they refer to the same vessel.</p></li>
<li><p><strong>IMO numbers</strong> are permanent unique identifiers
that follow a vessel from construction to scrapping. Assigned by the
International Maritime Organization, IMO numbers are required for only a
subset of industrial fishing vessels. IMO number can be transmitted
along with MMSI in AIS messages but they are frequently
missing.</p></li>
</ul>
<p>These identity markers are often the starting point of any inquiry
around vessel identity. However, due to their characteristics, none of
these identifiers should be interpreted as the sole identity source for
a vessel. Global Fishing Watch does extensive work to analyze and gather
all the information available for a given vessel into cohesive sets.</p>
<blockquote>
<p><strong>Note:</strong> MMSI is referred to as <code>ssvid</code> in
our tables. <code>ssvid</code> stands for “source-specific vessel
identity”. In this case, the source is AIS, and ssvid = MMSI.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="vesselid">
<strong><code>vesselId</code></strong><a class="anchor" aria-label="anchor" href="#vesselid"></a>
</h3>
<p>To solve the complexity of having several vessel identifiers that can
be duplicated or missing for each vessel and that can change in time,
Global Fishing Watch developed <strong><code>vesselId</code></strong>, a
vessel identity variable that combines vessel information and is
specific to a specific time interval.</p>
<p>A <strong><code>vesselId</code></strong> is formed by a combination
of the MMSI and the IMO number when available, or by the MMSI, callsign
and shipname transmitted in AIS messages. Each
<strong><code>vesselId</code></strong> is associated to a single MMSI at
a specific period of time, and refers to a single vessel.</p>
<p>On the other side, a single vessel can have several
<strong><code>vesselId</code></strong> in time, and this is why simple
calls to <code><a href="../reference/get_vessel_info.html">get_vessel_info()</a></code> can return tables that have many
<code>vesselIds</code> and different identity markers in time.</p>
</div>
<div class="section level3">
<h3 id="basic-and-advanced-searches">Basic and advanced searches<a class="anchor" aria-label="anchor" href="#basic-and-advanced-searches"></a>
</h3>
<p>The function <code><a href="../reference/get_vessel_info.html">get_vessel_info()</a></code> allows a user to run a
basic query using MMSI, callsign, shipname or IMO number but it also
allows for complex searches, using a combination of these to retrieve
the vessel of interest more accurately:</p>
<p><strong>Do a simple search using “query” and search_type = “search”
(which is the default so it can be omitted from the function
call)</strong></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>query <span class="op">=</span> <span class="fl">224224000</span>, search_type <span class="op">=</span> <span class="st">"search"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Do complex search or fuzzy matching using
<code>"where"</code> and
<code>search_type = "search"</code></strong></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>where <span class="op">=</span> <span class="st">"imo = '8300949'"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>where <span class="op">=</span> <span class="st">"imo = '8300949' AND ssvid = '214182732'"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>where <span class="op">=</span> <span class="st">"shipname LIKE '%GABU REEFE%' OR imo = '8300949'"</span><span class="op">)</span></span></code></pre></div>
<p>Importantly, <strong>the response will return all the information it
has for the vessel that matches the combination of identity markers
requested, not only the ones requested</strong>.</p>
<p>This means that the function does not “filter” the results as
requested in the function call. Instead, the function returns all the
<code>vesselIds</code> belonging to the same vessel.</p>
<blockquote>
<p><strong>Note</strong>: The same logic does not apply to
<code><a href="../reference/get_event.html">get_event()</a></code>: calls to <code><a href="../reference/get_event.html">get_event()</a></code> using a
single <code>vesselId</code> will return events only for the requested
<code>vesselId</code>.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="use-examples">Use examples<a class="anchor" aria-label="anchor" href="#use-examples"></a>
</h3>
<p>Let’s go back to the simple search. To get information of a vessel
using its MMSI, IMO number, callsign or name, the search can be done
directly using the number or the string. For example, to look for a
vessel with <code>MMSI = 224224000</code>, the number is enough:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mmsi_search</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span><span class="fl">224224000</span><span class="op">)</span></span>
<span><span class="co"># 1 total vessels</span></span></code></pre></div>
<p>The response from the API is a list with seven elements:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mmsi_search</span><span class="op">)</span></span>
<span><span class="co"># [1] "dataset"                      "registryInfoTotalRecords"    </span></span>
<span><span class="co"># [3] "registryInfo"                 "registryOwners"              </span></span>
<span><span class="co"># [5] "registryPublicAuthorizations" "combinedSourcesInfo"         </span></span>
<span><span class="co"># [7] "selfReportedInfo"</span></span></code></pre></div>
<p>The content of the original AIS messages transmitted by the vessel
appears in <code>$selfReportedInfo</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mmsi_search</span><span class="op">$</span><span class="va">selfReportedInfo</span></span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 2 × 14</span></span></span>
<span><span class="co">#   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span>     1 6632c9eb8… 3061… AGURTZA… AGURTZAB… BES   PJBL     8733…          <span style="text-decoration: underline;">418</span>581</span></span>
<span><span class="co"># <span style="color: #BCBCBC;">2</span>     1 3c99c326d… 2242… AGURTZA… AGURTZAB… ESP   EBSJ     8733…          <span style="text-decoration: underline;">135</span>057</span></span>
<span><span class="co"># <span style="color: #949494;"># ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></span></code></pre></div>
<p>As you can see, this vessel returns a dataframe with two rows. One
corresponds to our original search, where ssvid (MMSI) equals
224224000.</p>
<p>The second line has a different ssvid, but the same name and IMO
number.</p>
<p>The two lines correspond to the same vessel, and as you can see from
the fields <code>transmissionDateFrom</code> and
<code>transmissionDateTo</code>, <code>flag</code>, and
<code>ssvid</code>, the vessel operated with a Spain flag (ESP) and one
ssvid between 2015 and 2019, then it was reflagged and operated with a
BES flag (from Bonaire, Sint Eustatius and Saba) between 2019 and 2023.
The change in ssvid reflects the reflagging operation because the first
three digits of MMSI correspond to the flag country.</p>
<p>Variable <code>matchFields</code> reports that the matching was done
using <code>"SEVERAL_FIELDS"</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mmsi_search</span><span class="op">$</span><span class="va">selfReportedInfo</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">vesselId</span>, <span class="va">ssvid</span>, <span class="va">flag</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"Date"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 2 × 5</span></span></span>
<span><span class="co">#   vesselId                   ssvid flag  transmissionDateFrom transmissionDateTo</span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span> 6632c9eb8-8009-abdb-baf9-… 3061… BES   2019-10-15T12:16:54Z 2023-11-30T18:22:…</span></span>
<span><span class="co"># <span style="color: #BCBCBC;">2</span> 3c99c326d-dd2e-175d-626f-… 2242… ESP   2015-10-13T15:47:16Z 2019-10-15T12:10:…</span></span></code></pre></div>
<p>This is a simple case, in which the successive
<strong><code>vesselId</code></strong> do not overlap in time and most
identifiers match, in spite of some changes.</p>
<p>For some vessels, variables <code>transmissionDateFrom</code> and
<code>transmissionDateTo</code> can overlap and other fields can be
different.</p>
<div class="section level4">
<h4 id="using-vesselid-in-other-functions">Using <strong><code>vesselId</code></strong> in other functions<a class="anchor" aria-label="anchor" href="#using-vesselid-in-other-functions"></a>
</h4>
<p><strong><code>vesselId</code></strong> can be extracted from
<code>$selfReportedInfo$vesselId</code>, but it is highly recommended to
take a look at the response and confirm which of the values returned as
<code>vesselId</code> should be selected.</p>
<p>Before picking a <strong><code>vesselId</code></strong> to use in
other functions, it is useful to examine:</p>
<ul>
<li>which <strong><code>vesselId</code></strong> corresponds to the time
interval of interest</li>
<li>if other identifiers are matching, indicating there is enough
confidence that different <strong><code>vesselId</code></strong> refer
to the vessels of interest</li>
<li>the number of messages transmitted, in <code>messagesCounter</code>.
Sometimes very few positions are transmitted for a short time interval
and that <strong><code>vesselId</code></strong> can be treated as an
exception</li>
</ul>
<p>You can use the selected <strong><code>vesselId</code></strong> to
get any events related to the vessel of interest in other functions.</p>
<p>Let’s find encounter events for all the <code>vesselIds</code> from
the previous search:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="va">mmsi_search</span><span class="op">$</span><span class="va">selfReportedInfo</span><span class="op">$</span><span class="va">vesselId</span></span>
<span><span class="va">id</span></span>
<span><span class="co"># [1] "6632c9eb8-8009-abdb-baf9-b67d65f20510"</span></span>
<span><span class="co"># [2] "3c99c326d-dd2e-175d-626f-a3c488a4342b"</span></span>
<span><span class="va">events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_event.html">get_event</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="st">"ENCOUNTER"</span>, vessels <span class="op">=</span> <span class="va">id</span><span class="op">)</span> </span>
<span><span class="co"># [1] "Downloading 2 events from GFW"</span></span>
<span><span class="va">events</span></span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 2 × 16</span></span></span>
<span><span class="co">#   start               end                 eventId          eventType   lat   lon</span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span> 2020-09-14 <span style="color: #949494;">08:30:00</span> 2020-09-14 <span style="color: #949494;">11:50:00</span> da911addfabd3ce… encounter  8.01 -<span style="color: #BB0000;">20.8</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">2</span> 2021-04-19 <span style="color: #949494;">09:40:00</span> 2021-04-19 <span style="color: #949494;">12:50:00</span> 5cdd7f497291e06… encounter  3.08 -<span style="color: #BB0000;">12.2</span></span></span>
<span><span class="co"># <span style="color: #949494;"># ℹ 10 more variables: regions &lt;list&gt;, boundingBox &lt;list&gt;, distances &lt;list&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   vesselId &lt;chr&gt;, vessel_name &lt;chr&gt;, vessel_ssvid &lt;chr&gt;, vessel_flag &lt;chr&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   vessel_type &lt;chr&gt;, vessel_publicAuthorizations &lt;list&gt;, event_info &lt;list&gt;</span></span></span></code></pre></div>
<p>In our example, Global Fishing Watch analyses report that the vessel
had 2 encounters.</p>
</div>
</div>
<div class="section level3">
<h3 id="registry-data">Registry data<a class="anchor" aria-label="anchor" href="#registry-data"></a>
</h3>
<p>Vessel registries carry important vessel identity information, like
vessel characteristics, registration history, licenses to fish in
certain areas, and vessel ownership data. Global Fishing Watch compiles
vessel information from over 40 public vessel registries and matches
this information with the AIS-transmitted identity fields to provide a
better overview of a vessel’s identity.</p>
<p>This information is requested by parameter <code>"includes"</code>
and returned in the element</p>
<ul>
<li>
<code>$registryInfoTotalRecords</code> (number of records in
registries),</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mmsi_search</span><span class="op">$</span><span class="va">registryInfoTotalRecords</span></span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#   registryInfoTotalRecords</span></span>
<span><span class="co">#                      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span>                        1</span></span></code></pre></div>
<ul>
<li>
<code>$registryInfo</code> the actual information in the registry,
including identity, vessel characteristics and dates of
transmission</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mmsi_search</span><span class="op">$</span><span class="va">registryInfo</span></span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 1 × 16</span></span></span>
<span><span class="co">#   index recordId        sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span>     1 e0c9823749264a… <span style="color: #949494;">&lt;chr [6]&gt;</span>  2242… ESP   AGURTZA… AGURTZAB… EBSJ     8733…</span></span>
<span><span class="co"># <span style="color: #949494;"># ℹ 7 more variables: transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   geartypes &lt;chr&gt;, lengthM &lt;dbl&gt;, tonnageGt &lt;int&gt;, vesselInfoReference &lt;chr&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   extraFields &lt;list&gt;</span></span></span></code></pre></div>
<ul>
<li>
<code>$registryOwners</code> with their name, country of origin,
ssvid of the vessel and dates of ownership. Sometimes the vessel can
change identities and flags but its owners remain the same, and
sometimes changes in identity correspond to changes in ownership.</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mmsi_search</span><span class="op">$</span><span class="va">registryOwners</span></span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 0 × 2</span></span></span>
<span><span class="co"># <span style="color: #949494;"># ℹ 2 variables: index &lt;dbl&gt;, &lt;list&gt; &lt;list&gt;</span></span></span></code></pre></div>
<ul>
<li>
<code>$registryPublicAuthorizations</code> of the response and the
respective organizations</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mmsi_search</span><span class="op">$</span><span class="va">registryPublicAuthorizations</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">sourceCode</span><span class="op">)</span></span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 3 × 5</span></span></span>
<span><span class="co">#   index dateFrom             dateTo               ssvid     sourceCode</span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span>     1 2019-01-01T00:00:00Z 2019-10-01T00:00:00Z 224224000 ICCAT     </span></span>
<span><span class="co"># <span style="color: #BCBCBC;">2</span>     1 2012-01-01T00:00:00Z 2019-01-01T00:00:00Z 224224000 IOTC      </span></span>
<span><span class="co"># <span style="color: #BCBCBC;">3</span>     1 2019-10-15T00:00:00Z 2023-02-01T00:00:00Z 306118000 ICCAT</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="matching-ais-and-registries-case-examples">Matching AIS and registries: case examples<a class="anchor" aria-label="anchor" href="#matching-ais-and-registries-case-examples"></a>
</h3>
<p>In the best of cases, AIS messages match registry information and the
whole identity of the vessel can be reconstructed. Here are two examples
with registry and AIS data not overlapping in time.</p>
<p>This vessel has a single <code>vesselId</code> throughout its entire
history:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">one_vesselId</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>where <span class="op">=</span> <span class="st">"ssvid='701024000'"</span><span class="op">)</span></span>
<span><span class="co"># 1 total vessels</span></span>
<span></span>
<span><span class="co">#see AIS-based identities</span></span>
<span><span class="va">one_vesselId</span><span class="op">$</span><span class="va">selfReportedInfo</span></span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 1 × 14</span></span></span>
<span><span class="co">#   index vesselId   ssvid shipname nShipname flag  callsign imo   messagesCounter</span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span>     1 8e930bac5… 7010… ATLANTI… ATLANTIC… ARG   LW3233   8615…         7<span style="text-decoration: underline;">978</span>834</span></span>
<span><span class="co"># <span style="color: #949494;"># ℹ 5 more variables: positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   matchFields &lt;chr&gt;, transmissionDateFrom &lt;chr&gt;, transmissionDateTo &lt;chr&gt;</span></span></span>
<span><span class="co">#check registry info:</span></span>
<span><span class="va">one_vesselId</span><span class="op">$</span><span class="va">registryInfo</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">transmissionDateFrom</span>, <span class="va">transmissionDateTo</span><span class="op">)</span> <span class="co">#changing column order for visualization</span></span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 1 × 17</span></span></span>
<span><span class="co">#   transmissionDateFrom transmissionDateTo  index recordId sourceCode ssvid flag </span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span> 2012-01-04T05:00:00Z 2025-01-31T18:31:4…     1 4550252… <span style="color: #949494;">&lt;chr [1]&gt;</span>  7010… ARG  </span></span>
<span><span class="co"># <span style="color: #949494;"># ℹ 10 more variables: shipname &lt;chr&gt;, nShipname &lt;chr&gt;, callsign &lt;chr&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   imo &lt;chr&gt;, latestVesselInfo &lt;lgl&gt;, geartypes &lt;chr&gt;, lengthM &lt;dbl&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   tonnageGt &lt;int&gt;, vesselInfoReference &lt;chr&gt;, extraFields &lt;list&gt;</span></span></span></code></pre></div>
<p>This other vessel has had more than one <code>vesselId</code> based
on AIS, but the history is easy to reconstruct:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiple_vesselIds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_vessel_info.html">get_vessel_info</a></span><span class="op">(</span>where <span class="op">=</span> <span class="st">"ssvid='412217989'"</span><span class="op">)</span> </span>
<span><span class="co"># 1 total vessels</span></span>
<span><span class="co"># see AIS-based identities:</span></span>
<span><span class="va">multiple_vesselIds</span><span class="op">$</span><span class="va">selfReportedInfo</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">transmissionDateFrom</span>, <span class="va">transmissionDateTo</span><span class="op">)</span> </span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 3 × 14</span></span></span>
<span><span class="co">#   transmissionDateFrom transmissionDateTo   index vesselId        ssvid shipname</span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span> 2021-11-29T06:20:07Z 2025-01-03T03:26:57Z     1 b373b6306-6d0e… 4122… HAO YAN…</span></span>
<span><span class="co"># <span style="color: #BCBCBC;">2</span> 2014-03-29T00:32:05Z 2021-11-27T20:13:55Z     1 305097c65-5323… 4122… JIN LIA…</span></span>
<span><span class="co"># <span style="color: #BCBCBC;">3</span> 2012-08-01T01:47:23Z 2014-03-29T00:14:05Z     1 95a173191-11f9… 4316… HAKKO M…</span></span>
<span><span class="co"># <span style="color: #949494;"># ℹ 8 more variables: nShipname &lt;chr&gt;, flag &lt;chr&gt;, callsign &lt;chr&gt;, imo &lt;chr&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   messagesCounter &lt;int&gt;, positionsCounter &lt;int&gt;, sourceCode &lt;list&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   matchFields &lt;chr&gt;</span></span></span>
<span><span class="co">#check registry info:</span></span>
<span><span class="va">multiple_vesselIds</span><span class="op">$</span><span class="va">registryInfo</span> </span>
<span><span class="co"># <span style="color: #949494;"># A tibble: 1 × 17</span></span></span>
<span><span class="co">#   index recordId        sourceCode ssvid flag  shipname nShipname callsign imo  </span></span>
<span><span class="co">#   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co"># <span style="color: #BCBCBC;">1</span>     1 bdd48f4144f4fd… <span style="color: #949494;">&lt;chr [5]&gt;</span>  4122… CHN   HAOYANG… HAOYANG77 BAWB     9038…</span></span>
<span><span class="co"># <span style="color: #949494;"># ℹ 8 more variables: latestVesselInfo &lt;lgl&gt;, transmissionDateFrom &lt;chr&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   transmissionDateTo &lt;chr&gt;, geartypes &lt;chr&gt;, lengthM &lt;int&gt;, tonnageGt &lt;dbl&gt;,</span></span></span>
<span><span class="co"># <span style="color: #949494;">#   vesselInfoReference &lt;chr&gt;, extraFields &lt;list&gt;</span></span></span></code></pre></div>
<p>However, sometimes a vessel found in AIS has no registry information
and the registry fields come back empty. It is also possible that a
search returns a vessel with no matching AIS information and no
registry.</p>
</div>
<div class="section level2">
<h2 id="read-more">Read more:<a class="anchor" aria-label="anchor" href="#read-more"></a>
</h2>
<ul>
<li>Park et al. (2023). Tracking elusive and shifting identities of the
global fishing fleet <a href="https://www.science.org/doi/full/10.1126/sciadv.abp8200" class="external-link">link</a>
for a more detailed account of Global Fishing Watch identity work.</li>
<li><a href="https://globalfishingwatch.org/datasets-and-code-vessel-identity/" class="external-link uri">https://globalfishingwatch.org/datasets-and-code-vessel-identity/</a></li>
<li><a href="https://globalfishingwatch.org/data/spoofing-one-identity-shared-by-multiple-vessels/" class="external-link uri">https://globalfishingwatch.org/data/spoofing-one-identity-shared-by-multiple-vessels/</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Tyler Clavelle, Rocío Joo, Nate Miller, Andrea Sánchez-Tapia.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>




  <!-- inserted at the end of the body -->

  </body>
</html>
